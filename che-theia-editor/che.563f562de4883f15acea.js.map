{"version":3,"sources":["webpack:///./node_modules/che-theia-terminal/src/browser/terminal-widget/terminal.css?fcdb","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-task-provider.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/interface.svg","webpack:///./node_modules/github-extension/src/browser/github-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/class.svg","webpack:///./node_modules/theia-machines-extension/src/browser/theia-machines-frontend-module.ts","webpack:///./node_modules/che-theia-ssh-extension/src/browser/clipboard-service.ts","webpack:///./node_modules/che-theia-terminal/src/browser/contribution/keybinding-context.ts","webpack:///./node_modules/che-theia-terminal/src/browser/terminal-widget/remote-terminal-widget.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/common/che-workspace-client-service.ts","webpack:///./node_modules/theia-machines-extension/src/browser/che-workspace-machines-service.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/che-theia-java-frontend-module.ts","webpack:///./node_modules/che-theia-terminal/src/browser/contribution/exec-terminal-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-dashboard-extension/src/browser/style/che-theia-dashboard-module.css?b2b8","webpack:///./node_modules/che-theia-terminal/src/browser/server-definition/base-terminal-protocol.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/navigation/file-structure.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/style/index.css","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/navigation/find-implementers.ts","webpack:///./node_modules/theia-machines-extension/src/browser/machines-view-widget.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/machine-picker.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-task-watcher.ts","webpack:///./node_modules/@eclipse-che/theia-dashboard-extension/src/browser/che-theia-dashboard-module.ts","webpack:///./node_modules/che-theia-terminal/src/browser/server-definition/terminal-proxy-creator.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/method.svg","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/field.svg","webpack:///./node_modules/@eclipse-che/theia-activity-tracker/src/common/activity-tracker-protocol.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/package.svg","webpack:///./node_modules/theia-machines-extension/src/browser/machines-view-service.ts","webpack:///./node_modules/@eclipse-che/theia-dashboard-extension/src/browser/style/che-theia-dashboard-module.css","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-terminal-widget.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/file.svg","webpack:///./node_modules/che-theia-terminal/src/browser/contribution/terminal-quick-open.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/java-keybinding-contexts.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/common/che-api-external-endpoint-provider.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/externalLibraries.svg","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/enum.svg","webpack:///./node_modules/che-theia-terminal/src/browser/server-definition/remote-connection.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/che-theia-java-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/common/che-api-endpoint-provider.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-task-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/variable/che-task-variables-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-task-resolver.ts","webpack:///./node_modules/che-theia-ssh-extension/src/browser/ssh-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/style/index.css?39e1","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/che-task-preview-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/previews-contribution.ts","webpack:///./node_modules/che-theia-ssh-extension/src/common/ssh-protocol.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/previews-widget-model.ts","webpack:///./node_modules/che-theia-ssh-extension/src/browser/ssh-frontend-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-dashboard-extension/src/browser/che-workspace-client-service.ts","webpack:///./node_modules/@eclipse-che/theia-activity-tracker/src/browser/che-theia-activity-tracker-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/jar.svg","webpack:///./node_modules/che-theia-terminal/src/browser/terminal-widget/terminal.css","webpack:///./node_modules/@eclipse-che/theia-dashboard-extension/src/browser/theia-dashboard-client.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons.css?fa37","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/che-task-service.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/common/task-protocol.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/preview-url-watcher.ts","webpack:///./src-gen/frontend/index.js","webpack:///./node_modules/github-extension/src/common/github-service.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/che-ls-jdt-commands.ts","webpack:///./node_modules/@eclipse-che/theia-activity-tracker/src/browser/che-theia-activity-tracker-contribution.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/previews-widget.tsx","webpack:///./node_modules/theia-machines-extension/src/browser/che-workspace-client-service.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons/folder.svg","webpack:///./node_modules/che-theia-terminal/src/browser/terminal-frontend-module.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/task-preferences.ts","webpack:///./node_modules/@eclipse-che/theia-java-extension/src/browser/styles/icons.css","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/variable/server-variables-contribution.ts","webpack:///./node_modules/che-theia-ssh-extension/src/browser/ssh-quick-open-service.ts","webpack:///./node_modules/che-theia-terminal/src/common/workspace-service.ts","webpack:///./node_modules/@eclipse-che/theia-task-extension/src/browser/preview/preview-url-open-service.ts","webpack:///./node_modules/theia-machines-extension/src/browser/machines-view-contribution.ts"],"names":["content","__webpack_require__","module","i","locals","exports","inversify_1","task_protocol_1","che_workspace_client_service_1","CheTaskProvider","prototype","provideTasks","tasks","this","cheWsClient","getCommands","commands","_b","sent","commands_1","__values","commands_1_1","next","done","command","value","providedTask","type","CHE_TASK_TYPE","label","name","commandLine","target","machineName","getCommandAttribute","previewUrl","push","attrName","attributes","attr","__decorate","inject","CheWorkspaceClientService","injectable","github_service_1","browser_1","default","ContainerModule","bind","GithubService","toDynamicValue","ctx","container","get","WebSocketConnectionProvider","createProxy","githubKeyServicePath","inSingletonScope","keybinding_1","widget_manager_1","command_1","menu_1","machines_view_service_1","machines_view_contribution_1","che_workspace_machines_service_1","machines_view_widget_1","toSelf","CheWorkspaceMachinesService","MachinesViewWidgetFactory","toFactory","context","parent","child","createTreeContainer","unbind","TreeWidget","MachinesViewWidget","MachinesViewService","WidgetFactory","MachinesViewContribution","FrontendApplicationContribution","c","CommandContribution","KeybindingContribution","MenuContribution","ClipboardService","copy","textarea","document","createElement","body","appendChild","select","execCommand","removeChild","TerminalKeybindingContext","remote_terminal_widget_1","terminal_keybinding_contexts_1","contextId","RemoteTerminaActiveKeybingContext","_super","_this","apply","arguments","id","__extends","isEnabled","shell","activeWidget","RemoteTerminalWidget","TerminalActiveContext","terminal_widget_impl_1","base_terminal_protocol_1","base_terminal_protocol_2","remote_connection_1","promise_util_1","vscode_jsonrpc_1","uri_1","REMOTE_TERMINAL_WIDGET_FACTORY_ID","RemoteTerminalWidgetOptions","Symbol","start","termServer","termProxyCreatorProvider","termProxyCreator","_c","create","toDispose","onDidCloseConnection","disposable","onDidOpenConnection","dispose","reconnectTerminalProcess","Error","err_1","_a","createTerminal","attachTerminal","terminalId","resizeTerminalProcess","connectTerminalProcess","IBaseTerminalServer","validateId","toDisposeOnConnect","term","reset","connectSocket","waitForRemoteConnection","Deferred","socket","createWebSocket","toString","onopen","resolve","sendListener","data","send","on","onmessage","ev","write","Disposable","off","close","onerror","err","console","error","pid","url","options","endpoint","ATTACH_TERMINAL_SEGMENT","WebSocket","check","termId","logger","cols","rows","machineExec","identifier","workspaceId","cmd","tty","resize","sendText","text","promise","then","RemoteWebSocketConnectionProvider","TerminalWidgetImpl","cheWorkspaceClientServicePath","env_variables_1","cheWorkspaceClient","baseEnvVariablesServer","runtimeMachines","waitWorkspaceId","getValue","workspaceIdEnv","Promise","reject","updateMachines","restClient","remoteApi","getById","workspace","workspaceMachines","runtime","machines","config","environments","defaultEnv","length","Object","keys","forEach","machine","defineProperty","__param","EnvVariablesServer","che_theia_java_contribution_1","common_1","file_structure_1","find_implementers_1","java_keybinding_contexts_1","to","JavaExtensionContribution","FileStructure","FindImplementers","KeybindingContext","JavaEditorTextFocusContext","terminal_quick_open_1","terminal_frontend_contribution_1","browser_menu_plugin_1","widgets_1","keybinding_context_1","NewTerminalInSpecificContainer","ExecTerminalFrontendContribution","mainMenuId","registerCommands","registry","termApiEndPointProvider","registerCommand","execute","terminalQuickOpen","displayListMachines","call","registerMenus","menus","registerMenuAction","CommonMenus","FILE","commandId","getWidgets","widget","MenuBar","newMenu","mainMenuFactory","createMenuBar","addWidget","area","registerKeybindings","registerKeybinding","keybinding","registerTerminalKeybindings","registerRangeKeyBindings","KeyModifier","CTRL","Key","KEY_A","Alt","DIGIT0","registerKeyBinding","SPACE","BRACKET_LEFT","BRACKET_RIGHT","BACKSLASH","BACKQUOTE","keyModifiers","startKey","offSet","codePrefix","keyCode","key","code","String","fromCharCode","KeyCode","createKeyCode","first","modifiers","KeybindingRegistry","PASSTHROUGH_PSEUDO_COMMAND","TerminalQuickOpenService","ApplicationShell","BrowserMainMenuFactory","TerminalFrontendContribution","terminal_watcher_1","TERMINAL_SERVER_TYPE","CONNECT_TERMINAL_SEGMENT","RemoteTerminalServer","RemoteTerminalServerProxy","RemoteTerminaWatcher","getTerminalClient","onTerminalExitChanged","event","onTerminalError","TerminalWatcher","core_1","browser_2","language_client_provider_1","browser_3","che_ls_jdt_commands_1","vscode_languageserver_types_1","keybindingRegistry","quickOpenService","languageClientProvider","editorManager","showInheritedMembers","isOpen","currentLookFor","open","placeholderText","getKeyCommand","showOrHide","getLanguageClient","client","doRequestToStructure","fileStructureResponse","items","combineItems","prefix","fuzzyMatchLabel","fuzzyMatchDescription","fuzzySort","placeholder","onClose","members","members_1","members_1_1","symbolInformation","info","MemberQuickOpenItem","kind","location","children","keyCommand","getKeybindingsForCommand","Keybinding","acceleratorFor","join","currentEditor","isVisible","keybindings","__spread","EDITOR_CONTEXT_MENU","onType","lookFor","acceptor","filter","item","getLabel","toLocaleLowerCase","indexOf","javaClient","currEditor","sendRequest","ExecuteCommandRequest","FILE_STRUCTURE_COMMAND","uri","editor","showInherited","CommandRegistry","QuickOpenService","LanguageClientProvider","EditorManager","activeElement","window","getDescription","getIconClass","SymbolKind","Interface","Enum","Field","Method","run","mode","QuickOpenMode","OPEN","setTimeout","focus","selection","Range","range","end","QuickOpenItem","doRequestToimplementers","implementersResponse","implementers","firstItem","map","ImplementerQuickOpenItem","itemFoundMessage","searchedElement","JavaKeybindingContexts","javaEditorTextFocus","cursorPosition","cursor","textDocumentIdentifier","FIND_IMPLEMENTERS_COMMAND","position","textDocument","MachinesSymbolInformationNode","is","node","SelectableTreeNode","model","treeProps","contextMenuRenderer","onDidChangeOpenStateEmitter","Emitter","title","setMachinesTree","roots","root","visible","undefined","onAfterHide","msg","fire","onAfterShow","createNodeClassNames","props","classNames","iconClass","isExpandable","ExpandableTreeNode","TreeModel","TreeProps","ContextMenuRenderer","quick_open_1","MachinePicker","pick","getMachines","machines_1","machines_1_1","MachineQuickOpenItem","machineNames","hasOwnProperty","runFunc","che_terminal_widget_1","CheTaskWatcher","workspaceRootUri","onStart","workspaceService","wsRoot","taskWatcher","onTaskCreated","isEventForThisClient","attach","execId","taskLabel","widgetManager","getOrCreateWidget","CHE_TERMINAL_WIDGET_FACTORY_ID","destroyTermOnClose","activateWidget","TaskWatcher","WidgetManager","WorkspaceService","theia_dashboard_client_1","TheiaDashboardClient","TerminalProxyCreator","connProvider","apiEndPoint","ACTIVITY_TRACKER_SERVICE_PATH","ActivityTrackerService","terminal_widget_1","che_task_contribution_1","che_task_provider_1","che_task_service_1","che_task_resolver_1","che_task_watcher_1","machine_picker_1","server_variables_contribution_1","che_task_variables_contribution_1","che_api_endpoint_provider_1","che_api_external_endpoint_provider_1","che_task_preview_frontend_module_1","task_preferences_1","bindCheTaskPreferences","bindPreviewModule","VariableContribution","ServerVariablesContribution","ProjectPathVariableContribution","CheApiEndPointProvider","CheApiExternalEndPointProvider","CheTaskResolver","CheTaskContribution","TaskContribution","toService","CheTerminalWidget","inTransientScope","terminalNum","createWidget","Container","defaultScope","counter","domId","widgetOptions","__assign","useServerTitle","TerminalWidgetOptions","toConstantValue","CheTaskService","factory","onDidChangeMachinesEmitter","onDidSelectEmitter","onDidOpenEmitter","publish","disposables","DisposableCollection","onOpenNode","disposed","connect","CheTerminalWidgetOptions","RWS","RECONNECTING_OPTIONS","connectionTimeout","maxRetries","getMachineExecServerURL","websocketStream","addEventListener","message","workspace_service_1","activateTerminal","termWidget","getTabBarFor","newTerminal","findEditorMachineName","createNewTerminal","getMachineList","NewTerminalItem","newTermItemFunc","__awaiter","getOpts","QuickOpenOptions","getModel","Array","isArray","v","termApiEndPoint","created","Date","CHEWorkspaceService","Function","_machineName","canHandle","languageId","JAVA_LANGUAGE_ID","EditorTextFocusContext","env_variables_protocol_1","getCheApiEndPoint","getEnvVarValue","getCheApiEndPointEnvVariableName","envVar","envVariablesServer","variable","proxy_factory_1","lib_1","ReconnectingWebSocket","path","proxyFactory","JsonRpcProxyFactory","listen","onConnection","handler","webSocket","createLogger","ConsoleLogger","maxReconnectionDelay","minReconnectionDelay","reconnectionDelayGrowFactor","Infinity","debug","registerResolvers","resolvers","register","taskResolver","registerProviders","providers","taskProvider","message_service_1","registerVariables","variables","registerVariable","description","errorMessage","selectionService","fileStat","messageService","selectionUri","currentRoot","find","startsWith","rootWorkspaceUri","relativeSelectionPath","substr","dirIndex","split","SelectionService","MessageService","resolveTask","taskConfig","cheTaskConfig","resultTarget","getWorkspaceId","_d","machinePicker","variableResolverService","VariableResolverService","clipboard_service_1","ssh_frontend_contribution_1","ssh_quick_open_service_1","ssh_protocol_1","SshFrontendContribution","SshQuickOpenService","SshKeyServer","sshKeyServicePath","previews_contribution_1","preview_url_open_service_1","previews_widget_1","previews_widget_model_1","preview_url_watcher_1","bindViewContribution","PreviewsContribution","PreviewsWidgetModel","PreviewsWidget","PREVIEWS_WIDGET_FACTORY_ID","PreviewUrlOpenService","PreviewUrlWatcher","STATUS_BAR_ELEMENT_ID","widgetId","widgetName","defaultWidgetOptions","toggleCommandId","setStatusBarElement","statusBar","setElement","tooltip","alignment","StatusBarAlignment","LEFT","toggleCommand","StatusBar","AbstractViewContribution","onChangedEmitter","init","fetchTasks","onTaskExit","taskService","getRunningTasks","t","cheTask","fireChanged","getTasks","previewURL","task","previewService","preview","goToURL","TaskService","postConstruct","DefaultFrontendApplicationContribution","SshCommands","GENERATE","CREATE","COPY","DELETE","sshQuickOpenService","generateKeyPair","createKeyPair","copyPublicKey","deleteKeyPair","workspace_client_1","cheApi","cheApiEnv","_backend","getRestBackend","baseUrl","getRestApi","activity_tracker_protocol_1","che_theia_activity_tracker_contribution_1","CheTheiaActivityTrackerFrontendContribution","frontend_application_state_1","frontendApplicationStateService","isExpanded","reachedState","onReady","app","logoEl","getElementById","parentElement","isInFrame","dashboardEl","className","arrowEl","replaceChild","setAttribute","getDashboardWorkspaceUrl","href","postMessage","getVariables","envVariables","workspaceIdEnvVar","envVariable","links","ide","replace","FrontendApplicationStateService","taskPreferences","askUser","resolver","resolvedURL","answer","CheTaskPreferences","FrontendApplication","frontendApplicationModule","messagingFrontendModule","loggerFrontendModule","ThemeService","FrontendApplicationConfigProvider","set","load","raw","loadUserTheme","catch","reason","HELLO_WORLD_COMMAND","TEST_DETECT_COMMAND","FIND_TEST_BY_CURSOR_COMMAND","FIND_TESTS_FROM_PROJECT_COMMAND","FIND_TESTS_FROM_FOLDER_COMMAND","FIND_TESTS_FROM_ENTRY_COMMAND","FIND_TESTS_IN_FILE_COMMAND","RESOLVE_CLASSPATH_COMMAND","GET_OUTPUT_DIR_COMMAND","GET_EFFECTIVE_POM_COMMAND","GET_MAVEN_PROJECTS_COMMAND","RECOMPUTE_POM_DIAGNOSTICS","REIMPORT_MAVEN_PROJECTS_COMMAND","GET_CLASS_PATH_TREE_COMMAND","GET_EXTERNAL_LIBRARIES_COMMAND","GET_EXTERNAL_LIBRARIES_CHILDREN_COMMAND","GET_LIBRARY_CHILDREN_COMMAND","GET_LIBRARY_ENTRY_COMMAND","FIND_RESOURCES_BY_FQN","IDENTIFY_FQN_IN_RESOURCE","USAGES_COMMAND","UPDATE_WORKSPACE","CREATE_SIMPLE_PROJECT","UPDATE_PROJECT_CLASSPATH","GET_SOURCE_FOLDERS","GET_JAVA_CORE_OPTIONS_СOMMAND","UPDATE_JAVA_CORE_OPTIONS_СOMMAND","GET_PREFERENCES_СOMMAND","UPDATE_PREFERENCES_СOMMAND","ORGANIZE_IMPORTS","RENAME_COMMAND","GET_RENAME_TYPE_COMMAND","VALIDATE_RENAMED_NAME_COMMAND","GET_LINKED_ELEMENTS_COMMAND","VALIDATE_MOVE_COMMAND","GET_DESTINATIONS_COMMAND","MOVE_COMMAND","VERIFY_MOVE_DESTINATION_COMMAND","CLIENT_UPDATE_PROJECTS_CLASSPATH","CLIENT_UPDATE_PROJECT","activityService","isAnyActivity","isTimerRunning","initialize","onAnyActivity","sendRequestAndSetTimer","resetTimeout","checkActivityTimerCallback","CheTheiaActivityTrackerFrontendContribution_1","REQUEST_PERIOD_MS","react_widget_1","React","addClass","caption","closable","tabIndex","update","onChanged","onActivateRequest","render","Fragment","renderPlaceholder","renderPreviewsContents","renderURLs","idx","renderActions","onClick","ReactWidget","terminal_proxy_creator_1","exec_terminal_contribution_1","terminal_service_1","remote_terminal_widget_2","isBound","rebind","cheWorkspaceServicePath","toProvider","findTerminalServer","server","TerminalWidget","TerminalService","provider","log","preferences_1","createCheTaskPreferences","preferences","createPreferenceProxy","CheTaskConfigSchema","properties","che.task.preview.notifications","enum","PreferenceService","PreferenceContribution","schema","escape","serverName","servers","_1","window_service_1","sshKeyServer","clipboardService","windowService","downloadAction","services","displayName","chooseServiceAndName","service","generate","keyPair","privateKey","openNewWindow","encodeURIComponent","logError","error_1","__this","quickOpenModel","ProvidePublicKeyItem","publicKey","error_2","getOptions","fetchAllKeyPairs","keyPairs","error_3","executeFn","chosenKeyPair","getKeyPair","SshKeyPairItem","error_4","delete","error_5","execFunc","canClose","chosenServiceItem","quickOpenItems","getService","ProvideKeyNameItem","SshServiceItem","promises","getAll","all","promiseResults","reduce","prev","current","concat","WindowService","detail","mini_browser_1","externally","previewExternally","previewInternally","varResolver","MiniBrowser","Factory","ID","startPage","view_contribution_1","MACHINES_NAVIGATOR_ID","machineViewService","cheMachines","rank","toggleKeybinding","ids","symbolList","onDidChangeOpenState","onDidSelect","entries","machineEntry","getRandId","parentId","status","serversEntry_1","entryName","port","serverEntry","createTree","parentNode","symbolInformationList","childNodes","s","symbol","sym","convertToNode","childNode","nodeSymbol","n","getClass","symbolAndNode","selected","expanded","nodeName","uniqueId","Math","random","pow","slice","findIndex","symbolKind"],"mappings":"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","file":"che.563f562de4883f15acea.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../css-loader/index.js!./terminal.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../css-loader/index.js!./terminal.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../css-loader/index.js!./terminal.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { ICommand } from '@eclipse-che/workspace-client';\nimport { TaskProvider } from '@theia/task/lib/browser';\nimport { TaskConfiguration } from '@theia/task/lib/common';\nimport { CheTaskConfiguration, CHE_TASK_TYPE } from '../common/task-protocol';\nimport { CheWorkspaceClientService } from '../common/che-workspace-client-service';\n\n/** Reads the commands from the current Che workspace and provides it as Task Configurations. */\n@injectable()\nexport class CheTaskProvider implements TaskProvider {\n\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWsClient: CheWorkspaceClientService;\n\n    async provideTasks(): Promise<TaskConfiguration[]> {\n        const tasks: TaskConfiguration[] = [];\n\n        const commands = await this.cheWsClient.getCommands();\n        for (const command of commands) {\n            const providedTask: CheTaskConfiguration = {\n                type: CHE_TASK_TYPE,\n                label: `${command.name}`,\n                command: command.commandLine,\n                target: {\n                    machineName: this.getCommandAttribute(command, 'machineName')\n                } ,\n                previewUrl: this.getCommandAttribute(command, 'previewUrl')\n            };\n            tasks.push(providedTask);\n        }\n        return tasks;\n    }\n\n    protected getCommandAttribute(command: ICommand, attrName: string): string | undefined {\n        if (!command.attributes) {\n            return undefined;\n        }\n        for (const attr in command.attributes) {\n            if (attr === attrName) {\n                return command.attributes[attr];\n            }\n        }\n        return undefined;\n    }\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0KCiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOCBSZWQgSGF0LCBJbmMuCiAgICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgICBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYyLjAKICAgIHdoaWNoIGlzIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC0yLjAuaHRtbAogICAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjAKICAgIENvbnRyaWJ1dG9yczoKICAgICAgUmVkIEhhdCwgSW5jLiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgoKLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iaW50ZXJmYWNlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMyIDMyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzlBNUNGRiIgZD0iTTE2LDI0YzQuNDA2LDAsOC0zLjU5NCw4LThjMC00LjQwNi0zLjU5NC04LTgtOAoJCWMtNC40MDYsMC04LDMuNTk0LTgsOEM4LDIwLjQwNiwxMS41OTQsMjQsMTYsMjR6Ii8+Cgk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTE1LjI1LDEyaDEuNTAxQzE2Ljg4OCwxMiwxNywxMi4xMTIsMTcsMTIuMjV2Ny41CgkJYzAsMC4xMzgtMC4xMTIsMC4yNS0wLjI0OSwwLjI1SDE1LjI1QzE1LjExMiwyMCwxNSwxOS44ODgsMTUsMTkuNzV2LTcuNUMxNSwxMi4xMTIsMTUuMTEyLDEyLDE1LjI1LDEyeiIvPgo8L2c+Cjwvc3ZnPgo=\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { GithubService, githubKeyServicePath } from '../common/github-service';\nimport { WebSocketConnectionProvider } from \"@theia/core/lib/browser\";\n\nexport default new ContainerModule(bind => {\n    bind(GithubService).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<GithubService>(githubKeyServicePath);\n    }).inSingletonScope();\n});\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCiAgICAgIAotLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJqYXZhU291cmNlRmlsZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCiAgICAgdmlld0JveD0iNyA3IDE4IDE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMiAzMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICAgICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjNzJBRDQyIiBkPSJNMTYsMjRjNC40MDYsMCw4LTMuNTk0LDgtOGMwLTQuNDA2LTMuNTk0LTgtOC04CiAgICAgICAgICAgICAgICBjLTQuNDA2LDAtOCwzLjU5NC04LDhDOCwyMC40MDYsMTEuNTk0LDI0LDE2LDI0eiIvPgogICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTE2LDEyYzAuNzI5LDAsMS40MTIsMC4xOTUsMi4wMDEsMC41MzZsMC42NDgsMC4zNzUKICAgICAgICAgICAgICAgIGMwLjExOSwwLjA2OSwwLjE2LDAuMjIyLDAuMDkxLDAuMzQxbC0wLjc1LDEuMjk5Yy0wLjA2OCwwLjExOS0wLjIyMiwwLjE2LTAuMzQxLDAuMDkxbC0wLjYxMS0wLjM1M0MxNi43MzYsMTQuMTA2LDE2LjM4LDE0LDE2LDE0CiAgICAgICAgICAgICAgICBjLTEuMTA1LDAtMiwwLjg5Ni0yLDJjMCwxLjEwNCwwLjg5NiwyLDIsMmMwLjU1MiwwLDEuMDUyLTAuMjI0LDEuNDEzLTAuNTg1bDAuNTMxLTAuNTNjMC4wOTctMC4wOTgsMC4yNTYtMC4wOTgsMC4zNTMsMAogICAgICAgICAgICAgICAgbDEuMDYyLDEuMDYxYzAuMDk3LDAuMDk4LDAuMDk3LDAuMjU2LDAsMC4zNTRsLTAuNTMxLDAuNTNDMTguMTA0LDE5LjU1MywxNy4xMDQsMjAsMTYsMjBjLTIuMjA5LDAtNC0xLjc5MS00LTRTMTMuNzkxLDEyLDE2LDEyeiIKICAgICAgICAgICAgICAgIC8+CiAgICAgICAgPC9nPgo8L3N2Zz4K\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {ContainerModule, interfaces} from 'inversify';\nimport {FrontendApplicationContribution, createTreeContainer, TreeWidget} from '@theia/core/lib/browser';\nimport {KeybindingContribution} from '@theia/core/lib/browser/keybinding';\nimport {WidgetFactory} from '@theia/core/lib/browser/widget-manager';\nimport {CommandContribution} from '@theia/core/lib/common/command';\nimport {MenuContribution} from '@theia/core/lib/common/menu';\nimport {MachinesViewService} from './machines-view-service';\nimport {MachinesViewContribution} from './machines-view-contribution';\nimport {CheWorkspaceClientService} from './che-workspace-client-service';\nimport {CheWorkspaceMachinesService} from './che-workspace-machines-service';\nimport {MachinesViewWidgetFactory, MachinesViewWidget} from './machines-view-widget';\n\nexport default new ContainerModule(bind => {\n    // add your contribution bindings here\n    bind(CheWorkspaceClientService).toSelf();\n    bind(CheWorkspaceMachinesService).toSelf();\n\n    bind(MachinesViewWidgetFactory).toFactory(context =>\n        () => createMachinesViewWidget(context.container)\n    );\n\n    bind(MachinesViewService).toSelf().inSingletonScope();\n    bind(WidgetFactory).toDynamicValue(context => context.container.get(MachinesViewService));\n\n    bind(MachinesViewContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toDynamicValue(c => c.container.get(MachinesViewContribution));\n\n    bind(CommandContribution).toDynamicValue(context => context.container.get(MachinesViewContribution));\n    bind(KeybindingContribution).toDynamicValue(context => context.container.get(MachinesViewContribution));\n    bind(MenuContribution).toDynamicValue(context => context.container.get(MachinesViewContribution));\n});\n\nfunction createMachinesViewWidget(parent: interfaces.Container): MachinesViewWidget {\n    const child = createTreeContainer(parent);\n\n    child.unbind(TreeWidget);\n    child.bind(MachinesViewWidget).toSelf();\n\n    return child.get(MachinesViewWidget);\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport class ClipboardService {\n\n    copy(value: string): void {\n        const textarea = document.createElement('textarea');\n        textarea.value = value;\n        document.body.appendChild(textarea);\n        textarea.select();\n        document.execCommand('copy');\n        document.body.removeChild(textarea);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable } from 'inversify';\nimport { RemoteTerminalWidget } from '../terminal-widget/remote-terminal-widget';\nimport { TerminalActiveContext } from '@theia/terminal/lib/browser/terminal-keybinding-contexts';\n\nexport namespace TerminalKeybindingContext {\n    export const contextId = 'TerminalInSpecificContainerContext';\n}\n\n@injectable()\nexport class RemoteTerminaActiveKeybingContext extends TerminalActiveContext {\n\n    readonly id: string = TerminalKeybindingContext.contextId;\n\n    isEnabled(): boolean {\n        return this.shell.activeWidget instanceof RemoteTerminalWidget;\n    }\n}\n","/* tslint:disable */\n/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\n// Copied from 'terminal-widget.ts' with some modifications, CQ: https://dev.eclipse.org/ipzilla/show_bug.cgi?id=16269\n/* tslint:enable */\n\nimport { injectable, inject } from 'inversify';\nimport { TerminalWidgetImpl } from '@theia/terminal/lib/browser/terminal-widget-impl';\nimport { IBaseTerminalServer } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { TerminalProxyCreator, TerminalProxyCreatorProvider } from '../server-definition/terminal-proxy-creator';\nimport { ATTACH_TERMINAL_SEGMENT, RemoteTerminalServerProxy } from '../server-definition/base-terminal-protocol';\nimport { RemoteWebSocketConnectionProvider } from '../server-definition/remote-connection';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { Disposable } from 'vscode-jsonrpc';\nimport { TerminalWidgetOptions } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport URI from '@theia/core/lib/common/uri';\n\nexport const REMOTE_TERMINAL_WIDGET_FACTORY_ID = 'remote-terminal';\nexport const RemoteTerminalWidgetOptions = Symbol('RemoteTerminalWidgetOptions');\nexport interface RemoteTerminalWidgetOptions extends Partial<TerminalWidgetOptions> {\n    machineName: string,\n    workspaceId: string,\n    endpoint: string\n}\n\nexport interface RemoteTerminalWidgetFactoryOptions extends Partial<TerminalWidgetOptions> {\n    /* a unique string per terminal */\n    created: string\n}\n\n@injectable()\nexport class RemoteTerminalWidget extends TerminalWidgetImpl {\n\n    protected termServer: RemoteTerminalServerProxy;\n    protected waitForRemoteConnection: Deferred<WebSocket> | undefined;\n\n    @inject('TerminalProxyCreatorProvider')\n    protected readonly termProxyCreatorProvider: TerminalProxyCreatorProvider;\n    @inject(RemoteWebSocketConnectionProvider)\n    protected readonly remoteWebSocketConnectionProvider: RemoteWebSocketConnectionProvider;\n\n    @inject(RemoteTerminalWidgetOptions)\n    options: RemoteTerminalWidgetOptions;\n\n    async start(id?: number): Promise<number> {\n        try {\n            if (!this.termServer) {\n                const termProxyCreator = <TerminalProxyCreator>await this.termProxyCreatorProvider();\n                this.termServer = termProxyCreator.create();\n\n                this.toDispose.push(this.termServer.onDidCloseConnection(() => {\n                    const disposable = this.termServer.onDidOpenConnection(() => {\n                        disposable.dispose();\n                        this.reconnectTerminalProcess();\n                    });\n                    this.toDispose.push(disposable);\n                }));\n            }\n        } catch (err) {\n            throw new Error('Failed to create terminal server proxy. Cause: ' + err);\n        }\n        this.terminalId = typeof id !== 'number' ? await this.createTerminal() : await this.attachTerminal(id);\n        this.resizeTerminalProcess();\n        this.connectTerminalProcess();\n        if (IBaseTerminalServer.validateId(this.terminalId)) {\n            return this.terminalId;\n        }\n        throw new Error('Failed to start terminal' + (id ? ` for id: ${id}.` : '.'));\n    }\n\n    protected connectTerminalProcess(): void {\n        if (typeof this.terminalId !== 'number') {\n            return;\n        }\n        this.toDisposeOnConnect.dispose();\n        this.term.reset();\n        this.connectSocket(this.terminalId);\n    }\n\n    protected connectSocket(id: number) {\n        const waitForRemoteConnection = this.waitForRemoteConnection = new Deferred<WebSocket>();\n        const socket = this.createWebSocket(id.toString());\n\n        socket.onopen = () => {\n            if (waitForRemoteConnection) {\n                waitForRemoteConnection.resolve(socket);\n            }\n\n            const sendListener = (data) => socket.send(data);\n            this.term.on('data', sendListener);\n            socket.onmessage = ev => this.term.write(ev.data);\n\n            this.toDisposeOnConnect.push(Disposable.create(() => {\n                this.term.off('data', sendListener);\n                socket.close();\n            }));\n\n            socket.onerror = err => {\n                console.error(err);\n            };\n\n            this.toDispose.push(Disposable.create(() => {\n                socket.close();\n            }));\n        };\n    }\n\n    protected createWebSocket(pid: string): WebSocket {\n        const url = new URI(this.options.endpoint).resolve(ATTACH_TERMINAL_SEGMENT).resolve(this.terminalId + '');\n        return new WebSocket(url.toString());\n    }\n\n    protected async attachTerminal(id: number): Promise<number | undefined> {\n        const termId = await this.termServer.check({ id: id });\n        if (IBaseTerminalServer.validateId(termId)) {\n            return termId;\n        }\n        this.logger.error(`Error attaching to terminal id ${id}`);\n    }\n\n    protected async createTerminal(): Promise<number | undefined> {\n        const cols = this.term.cols;\n        const rows = this.term.rows;\n\n        const machineExec = {\n            identifier: {\n                machineName: this.options.machineName,\n                workspaceId: this.options.workspaceId\n            },\n            cmd: [\"sh\"],\n            cols,\n            rows,\n            tty: true,\n        };\n\n        const termId = await this.termServer.create(machineExec);\n        if (IBaseTerminalServer.validateId(termId)) {\n            return termId;\n        }\n        throw new Error('Error creating terminal widget');\n    }\n\n    protected resizeTerminalProcess(): void {\n        if (typeof this.terminalId !== 'number') {\n            return;\n        }\n\n        const cols = this.term.cols;\n        const rows = this.term.rows;\n\n        this.termServer.resize({id: this.terminalId, cols, rows});\n    }\n\n    sendText(text: string): void {\n        if (this.waitForRemoteConnection) {\n            this.waitForRemoteConnection.promise.then(socket => socket.send(text));\n        }\n    }\n\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { IWorkspace, IMachine, ICommand } from '@eclipse-che/workspace-client';\n\nexport const cheWorkspaceClientServicePath = \"/services/ws-client\";\n\nexport const CheWorkspaceClientService = Symbol('CheWorkspaceClientService');\nexport interface CheWorkspaceClientService {\n    getMachineExecServerURL(): Promise<string>;\n\n    getMachines(): Promise<{ [attrName: string]: IMachine }>;\n\n    getCommands(): Promise<ICommand[]>;\n\n    getCurrentWorkspace(): Promise<IWorkspace>;\n\n    getWorkspaceId(): Promise<string | undefined>;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {injectable, inject} from 'inversify';\nimport {EnvVariablesServer, EnvVariable} from '@theia/core/lib/common/env-variables';\nimport {CheWorkspaceClientService} from './che-workspace-client-service';\nimport {IWorkspace} from '@eclipse-che/workspace-client';\n\nexport interface IWorkspaceMachine {\n    machineName?: string;\n    servers?: {\n        [serverRef: string]: {\n            url?: string;\n            port?: string;\n        }\n    };\n    status: string;\n}\n\n@injectable()\nexport class CheWorkspaceMachinesService {\n\n    protected runtimeMachines: Array<IWorkspaceMachine> = [];\n    protected waitWorkspaceId: Promise<string>;\n\n    constructor(@inject(CheWorkspaceClientService) private readonly cheWorkspaceClient: CheWorkspaceClientService,\n                @inject(EnvVariablesServer) protected readonly baseEnvVariablesServer: EnvVariablesServer) {\n\n        this.waitWorkspaceId = this.baseEnvVariablesServer.getValue('CHE_WORKSPACE_ID')\n            .then((workspaceIdEnv: EnvVariable | undefined) => {\n                if (workspaceIdEnv && workspaceIdEnv.value) {\n                    return Promise.resolve(workspaceIdEnv.value);\n                }\n                return Promise.reject('Failed to get workspace id');\n            });\n    }\n\n    async updateMachines(): Promise<void> {\n        const workspaceId = await this.waitWorkspaceId;\n        if (!workspaceId) {\n            return Promise.reject('Failed to get workspace id');\n        }\n\n        const remoteApi = await this.cheWorkspaceClient.restClient();\n        if (!remoteApi) {\n            return Promise.reject('Failed to get Eclipse CHE api endPoint');\n        }\n\n        const workspace = await remoteApi.getById<IWorkspace>(workspaceId);\n        if (!workspace) {\n            return Promise.reject('Failed to get workspace configuration');\n        }\n\n        const workspaceMachines = workspace!.runtime\n            && workspace!.runtime!.machines\n            || workspace!.config.environments[workspace.config.defaultEnv].machines\n            || {};\n\n        this.runtimeMachines.length = 0;\n\n        Object.keys(workspaceMachines).forEach((machineName: string) => {\n            const machine: IWorkspaceMachine = workspaceMachines[machineName];\n            machine.machineName = machineName;\n            this.runtimeMachines.push(machine);\n        });\n    }\n\n    get machines(): Array<IWorkspaceMachine> {\n        return this.runtimeMachines;\n    }\n}\n","/*\n * Copyright (c) 2012-2018 Red Hat, Inc.\n * This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v2.0\n * which is available at http://www.eclipse.org/legal/epl-2.0.html\n *\n * SPDX-License-Identifier: EPL-2.0\n *\n * Contributors:\n *   Red Hat, Inc. - initial API and implementation\n */\n\nimport { JavaExtensionContribution } from './che-theia-java-contribution';\nimport {\n    CommandContribution,\n    MenuContribution\n} from \"@theia/core/lib/common\";\n\nimport { ContainerModule } from 'inversify';\nimport { KeybindingContribution, KeybindingContext } from '@theia/core/lib/browser';\n\nimport '../../src/browser/styles/icons.css';\nimport { FileStructure } from './navigation/file-structure';\nimport { FindImplementers } from './navigation/find-implementers';\nimport { JavaEditorTextFocusContext } from './java-keybinding-contexts';\n\nexport default new ContainerModule((bind) => {\n\n    bind(CommandContribution).to(JavaExtensionContribution);\n    bind(MenuContribution).to(JavaExtensionContribution);\n    bind(KeybindingContribution).to(JavaExtensionContribution);\n\n    bind(FileStructure).toSelf().inSingletonScope();\n    bind(CommandContribution).toDynamicValue(ctx => ctx.container.get(FileStructure));\n    bind(KeybindingContribution).toDynamicValue(ctx => ctx.container.get(FileStructure));\n    bind(MenuContribution).toDynamicValue(ctx => ctx.container.get(FileStructure));\n\n    bind(FindImplementers).toSelf().inSingletonScope();\n    bind(CommandContribution).toDynamicValue(ctx => ctx.container.get(FindImplementers));\n    bind(KeybindingContribution).toDynamicValue(ctx => ctx.container.get(FindImplementers));\n    bind(MenuContribution).toDynamicValue(ctx => ctx.container.get(FindImplementers));\n\n    bind(KeybindingContext).to(JavaEditorTextFocusContext).inSingletonScope();\n\n});\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { CommandRegistry, MenuModelRegistry } from '@theia/core/lib/common';\nimport { CommonMenus, ApplicationShell, KeybindingRegistry, Key, KeyCode, KeyModifier } from '@theia/core/lib/browser';\n\nimport { TerminalQuickOpenService } from './terminal-quick-open';\nimport { TerminalFrontendContribution } from '@theia/terminal/lib/browser/terminal-frontend-contribution';\nimport { TerminalApiEndPointProvider } from '../server-definition/terminal-proxy-creator';\nimport { BrowserMainMenuFactory } from '@theia/core/lib/browser/menu/browser-menu-plugin';\nimport { MenuBar as MenuBarWidget } from '@phosphor/widgets';\nimport { TerminalKeybindingContext } from './keybinding-context';\n\nexport const NewTerminalInSpecificContainer = {\n    id: 'terminal-in-specific-container:new',\n    label: 'Open Terminal in specific container'\n};\n\n@injectable()\nexport class ExecTerminalFrontendContribution extends TerminalFrontendContribution {\n\n    @inject(TerminalQuickOpenService)\n    private readonly terminalQuickOpen: TerminalQuickOpenService;\n\n    @inject('TerminalApiEndPointProvider')\n    protected readonly termApiEndPointProvider: TerminalApiEndPointProvider;\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(BrowserMainMenuFactory)\n    protected readonly mainMenuFactory: BrowserMainMenuFactory;\n\n    private readonly mainMenuId = 'theia:menubar';\n\n    async registerCommands(registry: CommandRegistry) {\n        const serverUrl = <string | undefined> await this.termApiEndPointProvider();\n        if (serverUrl) {\n            registry.registerCommand(NewTerminalInSpecificContainer, {\n                execute: () => {\n                    this.terminalQuickOpen.displayListMachines();\n                }\n            });\n        } else {\n            super.registerCommands(registry);\n        }\n    }\n\n    async registerMenus(menus: MenuModelRegistry) {\n        const serverUrl = <string | undefined> await this.termApiEndPointProvider();\n        if (serverUrl) {\n            menus.registerMenuAction(CommonMenus.FILE, {\n                commandId: NewTerminalInSpecificContainer.id,\n                label: NewTerminalInSpecificContainer.label\n            });\n        } else {\n            super.registerMenus(menus);\n        }\n\n        /*\n            TODO: We applied menu contribution to the menu model registry by 'menus.registerMenuAction' above,\n            but after that Theia doesn't redraw menu widget, because Theia already rendered ui with older data\n            and cached old state.\n            So follow we do workaround:\n            find main menu bar widget, destroy it and replace by new one widget with the latest changes.\n        */\n        const widgets = this.shell.getWidgets('top');\n        widgets.forEach(widget => {\n            if (widget.id === this.mainMenuId && widget instanceof MenuBarWidget) {\n                widget.dispose();\n                const newMenu = this.mainMenuFactory.createMenuBar();\n                this.shell.addWidget(newMenu, { area: 'top' });\n            }\n        });\n    }\n\n    async registerKeybindings(registry: KeybindingRegistry) {\n        const serverUrl = <string | undefined> await this.termApiEndPointProvider();\n        if (serverUrl) {\n            registry.registerKeybinding({\n                command: NewTerminalInSpecificContainer.id,\n                keybinding: 'ctrl+`'\n            });\n            this.registerTerminalKeybindings(registry);\n        } else {\n            super.registerKeybindings(registry);\n        }\n    }\n\n    private registerTerminalKeybindings(registry: KeybindingRegistry) {\n        // Ctrl + a-z\n        this.registerRangeKeyBindings(registry, [KeyModifier.CTRL], Key.KEY_A, 25, 'Key');\n        // Alt + a-z\n        this.registerRangeKeyBindings(registry, [KeyModifier.Alt], Key.KEY_A, 25, 'Key');\n        // Ctrl 0-9\n        this.registerRangeKeyBindings(registry, [KeyModifier.CTRL], Key.DIGIT0, 9, 'Digit');\n        // Alt 0-9\n        this.registerRangeKeyBindings(registry, [KeyModifier.Alt], Key.DIGIT0, 9, 'Digit');\n\n        this.registerKeyBinding(registry, [KeyModifier.CTRL], Key.SPACE);\n        this.registerKeyBinding(registry, [KeyModifier.CTRL], Key.BRACKET_LEFT);\n        this.registerKeyBinding(registry, [KeyModifier.CTRL], Key.BRACKET_RIGHT);\n        this.registerKeyBinding(registry, [KeyModifier.CTRL], Key.BACKSLASH);\n        this.registerKeyBinding(registry, [KeyModifier.Alt], Key.BACKQUOTE);\n    }\n\n    private registerRangeKeyBindings(registry: KeybindingRegistry, keyModifiers: KeyModifier[], startKey: Key, offSet: number, codePrefix: string) {\n        for (let i = 0; i < offSet + 1; i++) {\n            const keyCode = startKey.keyCode + i;\n            const key = {\n                keyCode: keyCode,\n                code: codePrefix + String.fromCharCode(keyCode)\n            };\n            this.registerKeyBinding(registry, keyModifiers, key);\n        }\n    }\n\n    private registerKeyBinding(registry: KeybindingRegistry, keyModifiers: KeyModifier[], key: Key) {\n        const keybinding = KeyCode.createKeyCode({ first: key, modifiers: keyModifiers }).toString();\n        registry.registerKeybinding({\n            command: KeybindingRegistry.PASSTHROUGH_PSEUDO_COMMAND,\n            keybinding: keybinding,\n            context: TerminalKeybindingContext.contextId\n        });\n    }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../css-loader/index.js!./che-theia-dashboard-module.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../css-loader/index.js!./che-theia-dashboard-module.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../css-loader/index.js!./che-theia-dashboard-module.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable } from 'inversify';\nimport { TerminalWatcher } from '@theia/terminal/lib/common/terminal-watcher';\nimport { IBaseTerminalClient, IBaseTerminalExitEvent, IBaseTerminalErrorEvent } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { JsonRpcProxy } from '@theia/core';\n\nexport const TERMINAL_SERVER_TYPE = 'terminal';\nexport const CONNECT_TERMINAL_SEGMENT = 'connect';\nexport const ATTACH_TERMINAL_SEGMENT = 'attach';\n\nexport interface MachineIdentifier {\n    machineName: string,\n    workspaceId: string\n}\n\nexport interface MachineExec {\n    identifier: MachineIdentifier,\n    cmd: string[],\n    tty: boolean,\n    cols: number,\n    rows: number,\n    id?: number\n}\n\nexport interface IdParam {\n    id: number\n}\n\nexport interface ResizeParam extends IdParam {\n    rows: number,\n    cols: number\n}\n\nexport const RemoteTerminalServer = Symbol('RemoteTerminalServer');\nexport interface RemoteTerminalServer {\n    create(machineExec: MachineExec): Promise<number>;\n    check(id: IdParam): Promise<number>;\n    resize(resizeParam: ResizeParam): Promise<void>;\n}\n\nexport const RemoteTerminalServerProxy = Symbol('RemoteTerminalServerProxy');\nexport type RemoteTerminalServerProxy = JsonRpcProxy<RemoteTerminalServer>;\n\n/**\n * For now this class it's a stub. Real implementation depends on\n * https://github.com/eclipse/che-machine-exec/issues/5\n */\n@injectable()\nexport class RemoteTerminaWatcher extends TerminalWatcher {\n    getTerminalClient(): IBaseTerminalClient {\n        return {\n            onTerminalExitChanged(event: IBaseTerminalExitEvent) {\n            },\n            onTerminalError(event: IBaseTerminalErrorEvent) {\n            }\n        };\n    }\n}\n","/*\n * Copyright (c) 2012-2018 Red Hat, Inc.\n * This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v2.0\n * which is available at http://www.eclipse.org/legal/epl-2.0.html\n *\n * SPDX-License-Identifier: EPL-2.0\n *\n * Contributors:\n *   Red Hat, Inc. - initial API and implementation\n */\n\nimport { inject, injectable } from 'inversify';\nimport { QuickOpenModel, QuickOpenItem, KeybindingRegistry, Keybinding, QuickOpenService, QuickOpenMode, KeybindingContribution } from '@theia/core/lib/browser';\nimport { CommandRegistry, CommandContribution, Command, MenuModelRegistry, MenuContribution } from '@theia/core';\nimport { ILanguageClient, ExecuteCommandRequest, SymbolKind } from '@theia/languages/lib/browser';\nimport { LanguageClientProvider } from '@theia/languages/lib/browser/language-client-provider';\nimport { EditorManager, EDITOR_CONTEXT_MENU } from '@theia/editor/lib/browser';\nimport { FILE_STRUCTURE_COMMAND } from '../che-ls-jdt-commands';\nimport URI from '@theia/core/lib/common/uri';\nimport { Range } from 'vscode-languageserver-types';\n\n/**\n * An element describes file structure.\n */\nexport interface Members {\n    info: MemberItem,\n    children: Members[]\n}\n\n/**\n * Provides an information about one member.\n */\nexport interface MemberItem {\n    name: string,\n    kind: number,\n    location: MemberLocation\n}\n\n/**\n * Contains uri and range of the member.\n */\nexport interface MemberLocation {\n    uri: string,\n    range: Range\n}\n\n/**\n * Object with parameters to execute custom command for getting file structure.\n */\nexport interface FileStructureCommandParameters {\n    uri: string,\n    showInherited: boolean\n}\n\n@injectable()\nexport class FileStructure implements QuickOpenModel, CommandContribution, KeybindingContribution, MenuContribution {\n    /**\n     * Whether to hide members from super classes.\n     */\n    protected showInheritedMembers: boolean = false;\n    /**\n     * Whether the dialog is currently open.\n     */\n    protected isOpen: boolean = false;\n    /**\n     * The current lookFor string input by the user.\n     */\n    protected currentLookFor: string = '';\n\n    private items!: QuickOpenItem[];\n    private command: Command = {\n        id: 'java.command.file.structure',\n        label: 'Java: Navigate File Structure'\n    };\n\n    constructor(\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry,\n        @inject(KeybindingRegistry) protected readonly keybindingRegistry: KeybindingRegistry,\n        @inject(QuickOpenService) protected readonly quickOpenService: QuickOpenService,\n        @inject(LanguageClientProvider) protected readonly languageClientProvider: LanguageClientProvider,\n        @inject(EditorManager) protected readonly editorManager: EditorManager\n    ) {}\n\n    async open() {\n        // Triggering the keyboard shortcut while the dialog is open toggles\n        // showing the inherited members.\n        if (this.isOpen) {\n            this.showInheritedMembers = !this.showInheritedMembers;\n        } else {\n            this.showInheritedMembers = false;\n            this.isOpen = true;\n        }\n\n        let placeholderText = 'File Structure.';\n        const keybinding = this.getKeyCommand();\n        const showOrHide = this.showInheritedMembers ? 'hide' : 'show';\n        if (keybinding) {\n            placeholderText += ` (Press ${keybinding} to ${showOrHide} inherited members)`;\n        }\n\n        const client = await this.languageClientProvider.getLanguageClient('java');\n        if (client) {\n            const fileStructureResponse = await this.doRequestToStructure(client);\n\n            this.items = [];\n            this.combineItems(fileStructureResponse);\n            this.quickOpenService.open(this, {\n                prefix: this.currentLookFor,\n                fuzzyMatchLabel: true,\n                fuzzyMatchDescription: true,\n                fuzzySort: true,\n                placeholder: placeholderText,\n                onClose: () => {\n                    this.isOpen = false;\n                    this.currentLookFor = '';\n                },\n            });\n        }\n    }\n\n    private combineItems(members: Members[]) {\n        for (const symbolInformation of members) {\n            const info = symbolInformation.info as MemberItem;\n            if (!info) {\n                continue;\n            }\n            this.items.push(new MemberQuickOpenItem(info.name, info.kind, info.location, this.editorManager));\n\n            if (symbolInformation.children.length !== 0) {\n                this.combineItems(symbolInformation.children);\n            }\n        }\n    }\n\n    /**\n    * Get a string (suitable to show to the user) representing the keyboard\n    * shortcut used to open the quick file open menu.\n    */\n    private getKeyCommand(): string | undefined {\n        const keyCommand = this.keybindingRegistry.getKeybindingsForCommand(this.command.id);\n        if (keyCommand) {\n            // We only consider the first keybinding.\n            const accel = Keybinding.acceleratorFor(keyCommand[0], '+');\n            return accel.join(' ');\n        }\n\n        return undefined;\n    }\n\n    isEnabled(): boolean {\n        return !!this.editorManager.currentEditor;\n    }\n\n    isVisible(): boolean {\n        return this.isEnabled();\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: this.command.id,\n            keybinding: 'ctrlcmd+alt+m'\n        });\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(this.command, {\n            execute: () => this.open(),\n            isEnabled: () => this.isEnabled()\n        });\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        menus.registerMenuAction([...EDITOR_CONTEXT_MENU, 'navigation'], {\n            commandId: this.command.id,\n            label: 'Navigate File Structure'\n        });\n    }\n\n    public onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        this.currentLookFor = lookFor;\n        acceptor(this.items.filter((item) => item.getLabel()!.toLocaleLowerCase().indexOf(lookFor.toLocaleLowerCase()) !== -1));\n    }\n\n    private async doRequestToStructure(javaClient: ILanguageClient): Promise<Members[]> {\n\n        const currEditor = this.editorManager.currentEditor;\n\n        if (currEditor) {\n            return await javaClient.sendRequest(ExecuteCommandRequest.type, {\n                command: FILE_STRUCTURE_COMMAND,\n                arguments: [\n                    {\n                        uri: currEditor.editor.document.uri,\n                        showInherited: this.showInheritedMembers\n                    } as FileStructureCommandParameters\n                ]\n            });\n        }\n        return [];\n    }\n}\n\nexport class MemberQuickOpenItem extends QuickOpenItem {\n    private activeElement: HTMLElement;\n    private location: MemberLocation;\n    private editorManager: EditorManager;\n    private name: string;\n    private kind: number;\n\n    constructor(\n        name: string,\n        kind: number,\n        location: MemberLocation,\n        editorManager: EditorManager\n    ) {\n        super();\n        this.activeElement = window.document.activeElement as HTMLElement;\n        this.name = name;\n        this.kind = kind;\n        this.location = location;\n        this.editorManager = editorManager;\n    }\n\n    getLabel(): string {\n        return this.name;\n    }\n\n    getDescription(): string {\n        return '';\n    }\n\n    getIconClass() {\n        switch (this.kind) {\n            case SymbolKind.Interface: {\n                return 'java-interface-icon file-icon';\n            }\n            case SymbolKind.Enum: {\n                return 'java-enum-icon file-icon';\n            }\n            case SymbolKind.Field: {\n                return 'java-field-icon file-icon';\n            }\n            case SymbolKind.Method: {\n                return 'java-method-icon file-icon';\n            }\n            default:\n                return 'java-class-icon file-icon';\n        }\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        // allow the quick open widget to close itself\n        setTimeout(() => {\n            // reset focus on the previously active element.\n            this.activeElement.focus();\n            this.editorManager.open(new URI(this.location.uri), {\n                mode: 'activate',\n                selection: Range.create(this.location.range.start, this.location.range.end)\n            });\n        }, 50);\n        return true;\n    }\n}\n","exports = module.exports = require(\"../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*********************************************************************\\n * Copyright (c) 2018 Red Hat, Inc.\\n *\\n * This program and the accompanying materials are made\\n * available under the terms of the Eclipse Public License 2.0\\n * which is available at https://www.eclipse.org/legal/epl-2.0/\\n *\\n * SPDX-License-Identifier: EPL-2.0\\n **********************************************************************/\\n\\n.preview-urls .container {\\n    padding: var(--theia-ui-padding) 0 var(--theia-ui-padding) 0;\\n    color: var(--theia-ui-font-color1);\\n}\\n\\n.preview-urls .placeholder {\\n    top: 50%;\\n    left: 50%;\\n    position: absolute;\\n    transform: translate(-50%, -50%);\\n}\\n\\n.preview-urls .url-container {\\n    padding: var(--theia-ui-padding) 0 var(--theia-ui-padding) 0;\\n    display: flex;\\n    white-space: nowrap;\\n    align-items: center;\\n}\\n\\n.preview-urls .url-container:hover {\\n    background-color: var(--theia-accent-color4);\\n}\\n\\n.preview-urls span {\\n    margin-left: var(--theia-ui-padding);\\n}\\n\\n.preview-urls .link {\\n    color: var(--theia-ui-font-color1);\\n}\\n\\n.preview-urls .label {\\n    color: var(--theia-ui-font-color2);\\n}\\n\\n.preview-urls .actions-container {\\n    margin-right: var(--theia-ui-padding);\\n    display: flex;\\n    flex: 1;\\n    justify-content: flex-end;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * Copyright (c) 2012-2018 Red Hat, Inc.\n * This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v2.0\n * which is available at http://www.eclipse.org/legal/epl-2.0\n *\n * SPDX-License-Identifier: EPL-2.0\n *\n * Contributors:\n *   Red Hat, Inc. - initial API and implementation\n */\n\nimport { inject, injectable } from 'inversify';\nimport { QuickOpenModel, QuickOpenItem, KeybindingRegistry, QuickOpenService, QuickOpenMode, KeybindingContribution } from '@theia/core/lib/browser';\nimport { CommandRegistry, CommandContribution, CommandHandler, Command, MenuModelRegistry, MenuContribution } from '@theia/core';\nimport { ILanguageClient, TextDocumentPositionParams, ExecuteCommandRequest, TextDocumentIdentifier, SymbolKind } from '@theia/languages/lib/browser';\nimport { LanguageClientProvider } from '@theia/languages/lib/browser/language-client-provider';\nimport { EditorManager, EDITOR_CONTEXT_MENU } from '@theia/editor/lib/browser';\nimport { FIND_IMPLEMENTERS_COMMAND } from '../che-ls-jdt-commands';\nimport URI from '@theia/core/lib/common/uri';\nimport { Range } from 'vscode-languageserver-types';\nimport { JavaKeybindingContexts } from '../java-keybinding-contexts';\n\nexport interface Implementers {\n    searchedElement: string,\n    implementers: ImplementationItem[]\n}\n\nexport interface ImplementationItem {\n    name: string,\n    kind: number,\n    location: ImplementationItemLocation\n}\n\nexport interface ImplementationItemLocation {\n    uri: string,\n    range: Range\n}\n\n@injectable()\nexport class FindImplementers implements QuickOpenModel, CommandContribution, KeybindingContribution, MenuContribution, CommandHandler {\n\n    private items!: QuickOpenItem[];\n    private command: Command = {\n        id: 'java.command.implementation',\n        label: 'Java: Open Implementation(s)'\n    };\n    \n    constructor(\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry,\n        @inject(KeybindingRegistry) protected readonly keybindings: KeybindingRegistry,\n        @inject(QuickOpenService) protected readonly quickOpenService: QuickOpenService,\n        @inject(LanguageClientProvider) protected readonly languageClientProvider: LanguageClientProvider,\n        @inject(EditorManager) protected readonly editorManager: EditorManager\n    ) { \n    }\n\n    async execute() {\n        const client = await this.languageClientProvider.getLanguageClient('java');\n        if (client) {\n            const implementersResponse = await this.doRequestToimplementers(client);\n\n            if (implementersResponse.implementers.length === 1) {\n                const firstItem = implementersResponse.implementers[0];\n                this.editorManager.open(new URI(firstItem.location.uri), {\n                    mode: 'activate',\n                    selection: Range.create(firstItem.location.range.start, firstItem.location.range.end)\n                });\n            }\n\n            this.items = [];\n            implementersResponse.implementers.map((item: ImplementationItem) => this.items.push(new ImplementerQuickOpenItem(item.name, item.kind, item.location, this.editorManager)));\n\n            const itemNotFoundMessage = 'Found 0 implementations'; \n            const itemFoundMessage = `Found ${implementersResponse.implementers.length} implementation(s) for ${implementersResponse.searchedElement}`; \n            this.quickOpenService.open(this, {\n                placeholder: this.items.length > 0 ? itemFoundMessage : itemNotFoundMessage\n            });\n        }\n        \n    }\n    \n    isEnabled(): boolean {\n        return !!this.editorManager.currentEditor;\n    }\n\n    isVisible(): boolean {\n        return this.isEnabled();\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: this.command.id,\n            keybinding: 'ctrlcmd+alt+b',\n            context: JavaKeybindingContexts.javaEditorTextFocus\n        });\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(this.command, this);\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        menus.registerMenuAction([...EDITOR_CONTEXT_MENU, 'navigation'], {\n            commandId: this.command.id,\n            label: 'Open Implementation(s)'\n        });\n    }\n\n    public onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    private async doRequestToimplementers(javaClient: ILanguageClient): Promise<Implementers> {\n\n        const currEditor = this.editorManager.currentEditor;\n\n        if (currEditor) {\n            const cursorPosition = currEditor.editor.cursor;\n            const textDocumentIdentifier = {\n                uri: currEditor.editor.document.uri\n            } as TextDocumentIdentifier;\n\n            const result = await javaClient.sendRequest(ExecuteCommandRequest.type, {\n                command: FIND_IMPLEMENTERS_COMMAND,\n                arguments: [\n                    {\n                        position: cursorPosition,\n                        textDocument: textDocumentIdentifier\n                    } as TextDocumentPositionParams\n                ]\n            });\n\n            return result;\n        }\n\n        return {\n            'searchedElement': '',\n            'implementers': []\n        };\n    }\n\n}\n\nexport class ImplementerQuickOpenItem extends QuickOpenItem {\n\n    private activeElement: HTMLElement;\n    private name: string;\n    private kind: number;\n    private location: ImplementationItemLocation;\n    private editorManager: EditorManager;\n\n    constructor(\n        name: string,\n        kind: number,\n        location: ImplementationItemLocation,\n        editorManager: EditorManager\n    ) {\n        super();\n        this.activeElement = window.document.activeElement as HTMLElement;\n        this.name = name;\n        this.kind = kind;\n        this.location = location;\n        this.editorManager = editorManager;\n    }\n\n    getLabel(): string {\n        return this.name;\n    }\n\n    getDescription(): string {\n        return this.location.uri;\n    }\n\n    getIconClass() {\n        switch (this.kind) {\n            case SymbolKind.Interface: {\n                return 'java-interface-icon file-icon';\n            }\n            case SymbolKind.Enum: {\n                return 'java-enum-icon file-icon';\n            }\n            default:\n                return 'java-class-icon file-icon';\n        }\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        // allow the quick open widget to close itself\n        setTimeout(() => {\n            // reset focus on the previously active element.\n            this.activeElement.focus();\n            this.editorManager.open(new URI(this.location.uri), {\n                mode: 'activate',\n                selection: Range.create(this.location.range.start, this.location.range.end)\n            });\n        }, 50);\n        return true;\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {injectable, inject} from 'inversify';\nimport {\n    TreeWidget,\n    TreeNode,\n    NodeProps,\n    SelectableTreeNode,\n    TreeProps,\n    ContextMenuRenderer,\n    TreeModel,\n    ExpandableTreeNode\n} from '@theia/core/lib/browser';\nimport {Emitter} from '@theia/core';\nimport {CompositeTreeNode} from '@theia/core/lib/browser';\nimport {Message} from '@phosphor/messaging';\n\nexport interface MachinesSymbolInformationNode extends CompositeTreeNode, SelectableTreeNode, ExpandableTreeNode {\n    iconClass: string;\n}\nexport namespace MachinesSymbolInformationNode {\n    export function is(node: TreeNode): node is MachinesSymbolInformationNode {\n        return !!node && SelectableTreeNode.is(node) && 'iconClass' in node;\n    }\n}\nexport type MachinesViewWidgetFactory = () => MachinesViewWidget;\nexport const MachinesViewWidgetFactory = Symbol('MachinesViewWidgetFactory');\n\n@injectable()\nexport class MachinesViewWidget extends TreeWidget {\n\n    readonly onDidChangeOpenStateEmitter = new Emitter<boolean>();\n\n    constructor(@inject(TreeModel) model: TreeModel,\n                @inject(TreeProps) protected readonly treeProps: TreeProps,\n                @inject(ContextMenuRenderer) protected readonly contextMenuRenderer: ContextMenuRenderer) {\n        super(treeProps, model, contextMenuRenderer);\n\n        this.id = 'machines-view';\n        this.title.label = 'Machines';\n    }\n\n    public setMachinesTree(roots: MachinesSymbolInformationNode[]) {\n        this.model.root = <CompositeTreeNode>{\n            id: 'machines-view-root',\n            name: 'Machines Root',\n            visible: false,\n            children: roots,\n            parent: undefined\n        };\n    }\n\n    protected onAfterHide(msg: Message) {\n        super.onAfterHide(msg);\n        this.onDidChangeOpenStateEmitter.fire(false);\n    }\n\n    protected onAfterShow(msg: Message) {\n        super.onAfterShow(msg);\n        this.onDidChangeOpenStateEmitter.fire(true);\n    }\n\n    protected createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (MachinesSymbolInformationNode.is(node)) {\n            classNames.push(node.iconClass);\n        }\n        return classNames;\n    }\n\n    protected isExpandable(node: TreeNode): node is ExpandableTreeNode {\n        return ExpandableTreeNode.is(node) && node.children && node.children.length > 0;\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { QuickOpenService, QuickOpenModel, QuickOpenItem, QuickOpenMode } from '@theia/core/lib/browser/quick-open/';\nimport { CheWorkspaceClientService } from '../common/che-workspace-client-service';\n\n@injectable()\nexport class MachinePicker implements QuickOpenModel {\n\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWorkspaceClient: CheWorkspaceClientService;\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    protected items: QuickOpenItem[];\n\n    /**\n     * Returns a machine name if there's just one machine in the current workspace.\n     * Shows a quick open widget allows to pick a machine if there are several ones.\n     */\n    async pick(): Promise<string> {\n        this.items = [];\n\n        const machines = await this.getMachines();\n        if (machines.length === 1) {\n            return machines[0];\n        }\n\n        const promise = new Promise<string>((resolve, reject) => {\n            for (const machineName of machines) {\n                this.items.push(new MachineQuickOpenItem(machineName, resolve));\n            }\n        });\n\n        this.quickOpenService.open(this, {\n            placeholder: 'Pick a machine to run the task'\n        });\n\n        return promise;\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    protected async getMachines(): Promise<string[]> {\n        const machineNames: string[] = [];\n        const machines = await this.cheWorkspaceClient.getMachines();\n        for (const machineName in machines) {\n            if (machines.hasOwnProperty(machineName)) {\n                machineNames.push(machineName);\n            }\n        }\n        return machineNames;\n    }\n}\n\nexport class MachineQuickOpenItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly machineName: string,\n        protected readonly runFunc: (p: string | PromiseLike<string> | undefined) => void\n    ) {\n        super({ label: machineName });\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.runFunc(this.machineName);\n        return true;\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TaskInfo, TaskWatcher } from '@theia/task/lib/common';\nimport { FrontendApplicationContribution, WidgetManager, ApplicationShell } from '@theia/core/lib/browser';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { CHE_TERMINAL_WIDGET_FACTORY_ID, CheTerminalWidget, CheTerminalWidgetFactoryOptions } from './che-terminal-widget';\nimport { CheTaskInfo, CHE_TASK_TYPE } from '../common/task-protocol';\n\n@injectable()\nexport class CheTaskWatcher implements FrontendApplicationContribution {\n\n    protected workspaceRootUri: string | undefined = undefined;\n\n    @inject(TaskWatcher)\n    protected readonly taskWatcher: TaskWatcher;\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    async onStart() {\n        // wait for the workspace root to be set\n        const wsRoot = await this.workspaceService.roots;\n        // WIP workspace folder is roots[0] https://github.com/theia-ide/theia/commit/80f402c621fe197130eae7abd22a0d89008b4ef1\n        // Beware, workspace folder concept will diseappear in the next PR.\n        this.workspaceRootUri = wsRoot[0].uri;\n\n        this.taskWatcher.onTaskCreated((event: TaskInfo) => {\n            if (this.isEventForThisClient(event.ctx)) {\n                if (event.config.type === CHE_TASK_TYPE) {\n                    this.attach((event as CheTaskInfo).execId, event.config.label);\n                }\n            }\n        });\n    }\n\n    protected isEventForThisClient(context: string | undefined): boolean {\n        return context === this.workspaceRootUri;\n    }\n\n    protected async attach(terminalId: number, taskLabel: string): Promise<void> {\n        const widget = <CheTerminalWidget>await this.widgetManager.getOrCreateWidget(\n            CHE_TERMINAL_WIDGET_FACTORY_ID,\n            <CheTerminalWidgetFactoryOptions>{\n                taskLabel: taskLabel,\n                destroyTermOnClose: true\n            });\n        this.shell.addWidget(widget, { area: 'bottom' });\n        this.shell.activateWidget(widget.id);\n        widget.start(terminalId);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { TheiaDashboardClient } from './theia-dashboard-client';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { CheWorkspaceClientService } from './che-workspace-client-service';\n\nimport { ContainerModule } from 'inversify';\n\nexport default new ContainerModule(bind => {\n    // add your contribution bindings here\n    bind(CheWorkspaceClientService).toSelf();\n    bind(TheiaDashboardClient).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toDynamicValue(c => c.container.get(TheiaDashboardClient));\n});\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { RemoteWebSocketConnectionProvider, } from './remote-connection';\nimport { CONNECT_TERMINAL_SEGMENT, RemoteTerminalServerProxy, RemoteTerminalServer } from './base-terminal-protocol';\nimport URI from '@theia/core/lib/common/uri';\n\nexport type TerminalApiEndPointProvider = () => Promise<string | undefined>;\n\nexport type TerminalProxyCreatorProvider = () => Promise<TerminalProxyCreator>;\n\n@injectable()\nexport class TerminalProxyCreator {\n\n    constructor(@inject(RemoteWebSocketConnectionProvider) protected readonly connProvider: RemoteWebSocketConnectionProvider,\n                @inject('term-api-end-point') protected readonly apiEndPoint: string,\n            ) {\n    }\n\n    create(): RemoteTerminalServerProxy {\n        const url = new URI(this.apiEndPoint).resolve(CONNECT_TERMINAL_SEGMENT);\n        return this.connProvider.createProxy<RemoteTerminalServer>(url.toString());\n    }\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0KCiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOCBSZWQgSGF0LCBJbmMuCiAgICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgICBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYyLjAKICAgIHdoaWNoIGlzIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC0yLjAuaHRtbAogICAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjAKICAgIENvbnRyaWJ1dG9yczoKICAgICAgUmVkIEhhdCwgSW5jLiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgoKLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0icHVibGljX21ldGhvZCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IgoJIHk9IjBweCIgd2lkdGg9IjEwcHgiIGhlaWdodD0iMTBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMiAzMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjNzJBRDQyIiBkPSJNMTYsOGM0LjQxOCwwLDgsMy41ODIsOCw4cy0zLjU4Miw4LTgsOHMtOC0zLjU4Mi04LTgKCVMxMS41ODIsOCwxNiw4TDE2LDh6IE0xNiwxMC42NjZjLTIuOTQ1LDAtNS4zMzQsMi4zODktNS4zMzQsNS4zMzRzMi4zODksNS4zMzQsNS4zMzQsNS4zMzRzNS4zMzQtMi4zODksNS4zMzQtNS4zMzQKCVMxOC45NDUsMTAuNjY2LDE2LDEwLjY2NnoiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0KCiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOCBSZWQgSGF0LCBJbmMuCiAgICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgICBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYyLjAKICAgIHdoaWNoIGlzIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC0yLjAuaHRtbAogICAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjAKICAgIENvbnRyaWJ1dG9yczoKICAgICAgUmVkIEhhdCwgSW5jLiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgoKLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0icHJpdmF0ZV9tZXRob2QiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIKCSB5PSIwcHgiIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0NGNDA1RiIgZD0iTTEwLjI4Niw4aDExLjQyOUMyMi45NzUsOCwyNCw5LjAyNiwyNCwxMC4yODZ2MTEuNDI5CglDMjQsMjIuOTc1LDIyLjk3NSwyNCwyMS43MTUsMjRIMTAuMjg2QzkuMDI2LDI0LDgsMjIuOTc1LDgsMjEuNzE1VjEwLjI4NkM4LDkuMDI2LDkuMDI2LDgsMTAuMjg2LDhMMTAuMjg2LDh6IE0xMC42NjcsMTAuNjY3Cgl2MTAuNjY3aDEwLjY2N1YxMC42NjdIMTAuNjY3eiIvPgo8L3N2Zz4K\"","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const ACTIVITY_TRACKER_SERVICE_PATH = '/services/activity-tracker';\n\nexport const ActivityTrackerService = Symbol('ActivityTrackerService');\n\nexport interface ActivityTrackerService {\n    /**\n     * Asks backend to reset current workspace inactivity timeout.\n     */\n    resetTimeout(): void;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { ContainerModule, Container } from 'inversify';\nimport { WidgetFactory, FrontendApplicationContribution, WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport { TaskContribution } from '@theia/task/lib/browser';\nimport { TerminalWidgetOptions } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { CheTaskContribution } from './che-task-contribution';\nimport { CheTaskProvider } from './che-task-provider';\nimport { CheTaskService } from './che-task-service';\nimport { CheTaskResolver } from './che-task-resolver';\nimport { CheTaskWatcher } from './che-task-watcher';\nimport { CHE_TERMINAL_WIDGET_FACTORY_ID, CheTerminalWidget, CheTerminalWidgetOptions } from './che-terminal-widget';\nimport { MachinePicker } from './machine-picker';\nimport { ServerVariablesContribution } from './variable/server-variables-contribution';\nimport { ProjectPathVariableContribution } from './variable/che-task-variables-contribution';\nimport { CheWorkspaceClientService, cheWorkspaceClientServicePath } from '../common/che-workspace-client-service';\nimport { CheApiEndPointProvider } from '../common/che-api-endpoint-provider';\nimport { CheApiExternalEndPointProvider } from '../common/che-api-external-endpoint-provider';\nimport { bindPreviewModule } from './preview/che-task-preview-frontend-module';\nimport { bindCheTaskPreferences } from './task-preferences';\n\nexport default new ContainerModule(bind => {\n    bindCheTaskPreferences(bind);\n    bindPreviewModule(bind);\n\n    bind(CheWorkspaceClientService).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<CheWorkspaceClientService>(cheWorkspaceClientServicePath);\n    }).inSingletonScope();\n\n    bind(VariableContribution).to(ServerVariablesContribution).inSingletonScope();\n    bind(VariableContribution).to(ProjectPathVariableContribution).inSingletonScope();\n\n    bind(MachinePicker).toSelf().inSingletonScope();\n\n    bind(CheApiEndPointProvider).to(CheApiExternalEndPointProvider).inSingletonScope();\n\n    bind(CheTaskProvider).toSelf().inSingletonScope();\n    bind(CheTaskResolver).toSelf().inSingletonScope();\n    bind(CheTaskContribution).toSelf().inSingletonScope();\n    bind(TaskContribution).toService(CheTaskContribution);\n\n    bind(CheTaskWatcher).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(CheTaskWatcher);\n\n    bind(CheTerminalWidget).toSelf().inTransientScope();\n    let terminalNum = 0;\n    bind(WidgetFactory).toDynamicValue(ctx => ({\n        id: CHE_TERMINAL_WIDGET_FACTORY_ID,\n        createWidget: (options: CheTerminalWidgetOptions) => {\n            const child = new Container({ defaultScope: 'Singleton' });\n            child.parent = ctx.container;\n            const counter = terminalNum++;\n            const domId = options.id || 'che-terminal-' + counter;\n            const widgetOptions: CheTerminalWidgetOptions = {\n                title: options.taskLabel,\n                useServerTitle: true,\n                destroyTermOnClose: true,\n                ...options\n            };\n            child.bind(TerminalWidgetOptions).toConstantValue(widgetOptions);\n            child.bind('terminal-dom-id').toConstantValue(domId);\n            return child.get(CheTerminalWidget);\n        }\n    }));\n\n    bind(CheTaskService).toSelf().inSingletonScope();\n});\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0KCiAgICBDb3B5cmlnaHQgKGMpIDIwMTItMjAxOCBSZWQgSGF0LCBJbmMuCiAgICBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzCiAgICBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYyLjAKICAgIHdoaWNoIGlzIGF2YWlsYWJsZSBhdCBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC0yLjAuaHRtbAogICAgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEVQTC0yLjAKICAgIENvbnRyaWJ1dG9yczoKICAgICAgUmVkIEhhdCwgSW5jLiAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbgoKLS0+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iamF2YVBhY2thZ2VGb2xkZXIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgogICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjcgNyAxOCAxOCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgogICAgPGc+CiAgICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjMzE5M0Q0IiBkPSJNOS4yNSw5aDEzLjUwMWMwLjEzOCwwLDAuMjUsMC4xMTIsMC4yNSwwLjI1djEzLjUKICAgICAgICAgICAgICAgIGMwLDAuMTM4LTAuMTEyLDAuMjUtMC4yNSwwLjI1SDkuMjVDOS4xMTMsMjMsOSwyMi44ODgsOSwyMi43NVY5LjI1QzksOS4xMTIsOS4xMTMsOSw5LjI1LDl6Ii8+CiAgICAgICAgICAgIDxyZWN0IHg9IjExIiB5PSIxMSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNFMEI5MUQiIHdpZHRoPSIxMC4wMDEiIGhlaWdodD0iMTAiLz4KICAgICAgICAgICAgPHJlY3QgeD0iMTUuMDAxIiB5PSI4IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzMxOTNENCIgd2lkdGg9IjIiIGhlaWdodD0iMTYiLz4KICAgICAgICAgICAgPHJlY3QgeD0iOC4wMDEiIHk9IjE1IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzMxOTNENCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjIiLz4KICAgICAgICA8L2c+Cjwvc3ZnPgo=\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {injectable, inject} from 'inversify';\nimport {WidgetFactory} from '@theia/core/lib/browser';\nimport {Event, Emitter, DisposableCollection} from '@theia/core';\nimport {MachinesViewWidget, MachinesViewWidgetFactory, MachinesSymbolInformationNode} from './machines-view-widget';\nimport {Widget} from '@phosphor/widgets';\n\n@injectable()\nexport class MachinesViewService implements WidgetFactory {\n\n    id = 'machines-view';\n\n    protected widget?: MachinesViewWidget;\n    protected readonly onDidChangeMachinesEmitter = new Emitter<MachinesSymbolInformationNode[]>();\n    protected readonly onDidChangeOpenStateEmitter = new Emitter<boolean>();\n    protected readonly onDidSelectEmitter = new Emitter<MachinesSymbolInformationNode>();\n    protected readonly onDidOpenEmitter = new Emitter<MachinesSymbolInformationNode>();\n\n    constructor( @inject(MachinesViewWidgetFactory) protected factory: MachinesViewWidgetFactory) { }\n\n    get onDidSelect(): Event<MachinesSymbolInformationNode> {\n        return this.onDidSelectEmitter.event;\n    }\n\n    get onDidOpen(): Event<MachinesSymbolInformationNode> {\n        return this.onDidOpenEmitter.event;\n    }\n\n    get onDidChangeMachines(): Event<MachinesSymbolInformationNode[]> {\n        return this.onDidChangeMachinesEmitter.event;\n    }\n\n    get onDidChangeOpenState(): Event<boolean> {\n        return this.onDidChangeOpenStateEmitter.event;\n    }\n\n    get open(): boolean {\n        return this.widget !== undefined && this.widget.isVisible;\n    }\n\n    publish(roots: MachinesSymbolInformationNode[]): void {\n        if (this.widget) {\n            this.widget.setMachinesTree(roots);\n            this.onDidChangeMachinesEmitter.fire(roots);\n        }\n    }\n\n    createWidget(): Promise<Widget> {\n        this.widget = this.factory();\n        const disposables = new DisposableCollection();\n        disposables.push(this.widget.onDidChangeOpenStateEmitter.event(open => this.onDidChangeOpenStateEmitter.fire(open)));\n        disposables.push(this.widget.model.onOpenNode(node => this.onDidOpenEmitter.fire(node as MachinesSymbolInformationNode)));\n        this.widget.disposed.connect(() => {\n            this.widget = undefined;\n            disposables.dispose();\n        });\n        return Promise.resolve(this.widget);\n    }\n}\n","exports = module.exports = require(\"../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 Red Hat, Inc. and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n.che-dashboard {\\n    width: 31px;\\n    height: 18px;\\n    margin: 5px 0 5px 0;\\n}\\n\\n.che-dashboard i,\\n.che-dashboard a {\\n    width: 100%;\\n    outline: none;\\n    color: #f1f1f1;\\n    font-size: 12px;\\n    cursor: pointer;\\n    line-height: 18px;\\n    text-align: center;\\n    text-decoration: none;\\n    background-color: #fcc13d;\\n}\\n\\n\", \"\"]);\n\n// exports\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TerminalWidgetOptions } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { TerminalWidgetImpl } from '@theia/terminal/lib/browser/terminal-widget-impl';\nimport { CheWorkspaceClientService } from '../common/che-workspace-client-service';\nimport { Disposable } from '@theia/core/lib/common';\n\nexport const CHE_TERMINAL_WIDGET_FACTORY_ID = 'che_terminal';\n\nexport const CheTerminalWidgetOptions = Symbol('CheTerminalWidgetOptions');\nexport interface CheTerminalWidgetOptions extends TerminalWidgetOptions {\n    taskLabel: string\n}\n\nexport interface CheTerminalWidgetFactoryOptions extends Partial<CheTerminalWidgetOptions> {\n}\n\nconst RWS = require('reconnecting-websocket');\nconst RECONNECTING_OPTIONS = {\n    connectionTimeout: 20000,\n    maxRetries: 3,\n};\n\n/** Extended Theia's terminal widget that connects to Che terminal-exec server. */\n@injectable()\nexport class CheTerminalWidget extends TerminalWidgetImpl {\n\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWorkspaceClient: CheWorkspaceClientService;\n\n    protected async attachTerminal(id: number): Promise<number> {\n        return id;\n    }\n\n    protected async connectTerminalProcess(): Promise<void> {\n        const termServer = await this.cheWorkspaceClient.getMachineExecServerURL();\n        const websocketStream = await new RWS(`${termServer}/attach/${this.terminalId}`, [], RECONNECTING_OPTIONS);\n\n        websocketStream.addEventListener('error', (event: Event) => {\n            console.error('WebsocketStream error:', event);\n        });\n        websocketStream.addEventListener('message', (message: any) => {\n            this.term.write(message.data);\n        });\n        this.toDispose.push(Disposable.create(() =>\n            websocketStream.close()\n        ));\n    }\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCgotLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJnZW5lcmljRmlsZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCiAgICAgd2lkdGg9IjEwcHgiIGhlaWdodD0iMTBweCIgdmlld0JveD0iNyA3IDE4IDE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMiAzMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMTkzRDQiIGQ9Ik0xMiwyMC41Nzl2LTAuNTAxYzAtMC4xMzgsMC4xMTItMC4yNSwwLjI1LTAuMjVoNC42NzMKICAgICAgICAgICAgICAgIGMwLjEzOCwwLDAuMjUsMC4xMTIsMC4yNSwwLjI1djAuNTAxYzAsMC4xMzctMC4xMTIsMC4yNDktMC4yNSwwLjI0OUgxMi4yNUMxMi4xMTIsMjAuODI4LDEyLDIwLjcxNiwxMiwyMC41NzlMMTIsMjAuNTc5egogICAgICAgICAgICAgICAgTTEyLDEyLjU3OHYtMC41YzAtMC4xMzgsMC4xMTItMC4yNSwwLjI1LTAuMjVoNC42NzNjMC4xMzgsMCwwLjI1LDAuMTEyLDAuMjUsMC4yNXYwLjVjMCwwLjEzOC0wLjExMiwwLjI1LTAuMjUsMC4yNUgxMi4yNQogICAgICAgICAgICAgICAgQzEyLjExMiwxMi44MjgsMTIsMTIuNzE2LDEyLDEyLjU3OEwxMiwxMi41Nzh6IE0xMiwxNC41Nzh2LTAuNWMwLTAuMTM3LDAuMTEyLTAuMjUsMC4yNS0wLjI1aDcuNWMwLjEzOCwwLDAuMjUsMC4xMTIsMC4yNSwwLjI1CiAgICAgICAgICAgICAgICB2MC41YzAsMC4xMzgtMC4xMTIsMC4yNS0wLjI1LDAuMjVoLTcuNUMxMi4xMTIsMTQuODI4LDEyLDE0LjcxNiwxMiwxNC41NzhMMTIsMTQuNTc4eiBNMTIsMTYuNTc4di0wLjUKICAgICAgICAgICAgICAgIGMwLTAuMTM3LDAuMTEyLTAuMjUsMC4yNS0wLjI1aDcuNWMwLjEzOCwwLDAuMjUsMC4xMTIsMC4yNSwwLjI1djAuNWMwLDAuMTM4LTAuMTEyLDAuMjUtMC4yNSwwLjI1aC03LjUKICAgICAgICAgICAgICAgIEMxMi4xMTIsMTYuODI4LDEyLDE2LjcxNiwxMiwxNi41NzhMMTIsMTYuNTc4eiBNMTIsMTguNTc4di0wLjVjMC0wLjEzOCwwLjExMi0wLjI1LDAuMjUtMC4yNWg3LjVjMC4xMzgsMCwwLjI1LDAuMTEyLDAuMjUsMC4yNQogICAgICAgICAgICAgICAgdjAuNWMwLDAuMTM4LTAuMTEyLDAuMjUtMC4yNSwwLjI1aC03LjVDMTIuMTEyLDE4LjgyOCwxMiwxOC43MTYsMTIsMTguNTc4eiIvPgogICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzgwODA4MCIgZD0iTTkuMjUsOGg5LjY2N2MwLjA2OSwwLDAuMTI5LDAuMDI1LDAuMTc4LDAuMDc0bDMuODMzLDMuODUzCiAgICAgICAgICAgICAgICBDMjIuOTc2LDExLjk3NSwyMywxMi4wMzUsMjMsMTIuMTAzVjIzLjc1YzAsMC4xMzgtMC4xMTIsMC4yNS0wLjI1LDAuMjVIOS4yNUM5LjExMiwyNCw5LDIzLjg4OCw5LDIzLjc1VjguMjUKICAgICAgICAgICAgICAgIEM5LDguMTEyLDkuMTEyLDgsOS4yNSw4TDkuMjUsOHogTTE4LjE3MywxMEwxMSwxMHYxMmgxMHYtOS4xNzJoLTIuNTc4Yy0wLjEzNywwLTAuMjQ5LTAuMTEyLTAuMjQ5LTAuMjVWMTB6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { QuickOpenService, QuickOpenModel, QuickOpenItem } from '@theia/core/lib/browser/quick-open/';\nimport { QuickOpenMode, QuickOpenOptions, WidgetManager, ApplicationShell } from '@theia/core/lib/browser';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport { REMOTE_TERMINAL_WIDGET_FACTORY_ID, RemoteTerminalWidgetFactoryOptions } from '../terminal-widget/remote-terminal-widget';\nimport {CHEWorkspaceService} from '../../common/workspace-service';\nimport {TerminalApiEndPointProvider} from '../server-definition/terminal-proxy-creator';\nimport {TerminalService} from '@theia/terminal/lib/browser/base/terminal-service';\nimport {TerminalWidget, TerminalWidgetOptions} from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { RemoteTerminalWidget } from '../terminal-widget/remote-terminal-widget';\n\n@injectable()\nexport class TerminalQuickOpenService implements TerminalService {\n\n    constructor(@inject(QuickOpenService) private readonly quickOpenService: QuickOpenService,\n        @inject(WidgetManager) private readonly widgetManager: WidgetManager,\n        @inject(EnvVariablesServer) protected readonly baseEnvVariablesServer: EnvVariablesServer,\n        @inject('TerminalApiEndPointProvider') protected readonly termApiEndPointProvider: TerminalApiEndPointProvider,\n        @inject(CHEWorkspaceService) protected readonly workspaceService: CHEWorkspaceService,\n        @inject(ApplicationShell) protected readonly shell: ApplicationShell\n    ) {\n    }\n\n    activateTerminal(termWidget: TerminalWidget): void {\n        const tabBar = this.shell.getTabBarFor(termWidget);\n        if (!tabBar) {\n            this.shell.addWidget(termWidget, { area: 'bottom' });\n        }\n        this.shell.activateWidget(termWidget.id);\n    }\n\n    async newTerminal(options: TerminalWidgetOptions): Promise<TerminalWidget> {\n        let machineName;\n\n        // todo remove rude casting when will be used theia 0.3.16.\n        if ((options as any).attributes) {\n            machineName = (options as any).attributes['CHE_MACHINE_NAME'];\n        }\n\n        if (!machineName) {\n            machineName = await this.workspaceService.findEditorMachineName();\n        }\n\n        if (machineName) {\n            const termWidget = await this.createNewTerminal(machineName, options);\n            return termWidget;\n        }\n\n        throw new Error('Unable to create new terminal widget');\n    }\n\n    async displayListMachines() {\n        const items: QuickOpenItem[] = [];\n        const machines = await this.workspaceService.getMachineList();\n\n        if (machines) {\n            for (const machineName in machines) {\n                if (!machines.hasOwnProperty(machineName)) {\n                    continue;\n                }\n                items.push(new NewTerminalItem(machineName, async (newTermItemFunc) => {\n                    const termWidget = await this.createNewTerminal(newTermItemFunc.machineName);\n                    this.activateTerminal(termWidget);\n                    termWidget.start();\n                }));\n            }\n        }\n\n        this.open(items, 'Select machine to create new terminal');\n    }\n\n    private getOpts(placeholder: string, fuzzyMatchLabel: boolean = true): QuickOpenOptions {\n        return QuickOpenOptions.resolve({\n            placeholder,\n            fuzzyMatchLabel,\n            fuzzySort: false\n        });\n    }\n\n    private open(items: QuickOpenItem | QuickOpenItem[], placeholder: string): void {\n        this.quickOpenService.open(this.getModel(Array.isArray(items) ? items : [items]), this.getOpts(placeholder));\n    }\n\n    private getModel(items: QuickOpenItem | QuickOpenItem[]): QuickOpenModel {\n        return {\n            onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                acceptor(Array.isArray(items) ? items : [items]);\n            }\n        };\n    }\n\n    protected async createNewTerminal(machineName: string, options?: TerminalWidgetOptions): Promise<TerminalWidget> {\n        try {\n            const workspaceId = <string>await this.baseEnvVariablesServer.getValue('CHE_WORKSPACE_ID').then(v => v ? v.value : undefined);\n            const termApiEndPoint = <string>await this.termApiEndPointProvider();\n\n            const widget = <RemoteTerminalWidget>await this.widgetManager.getOrCreateWidget(REMOTE_TERMINAL_WIDGET_FACTORY_ID, <RemoteTerminalWidgetFactoryOptions>{\n                created: new Date().toString(),\n                machineName: machineName,\n                workspaceId: workspaceId,\n                endpoint: termApiEndPoint,\n                ...options\n            });\n            return widget;\n        } catch (err) {\n            console.error('Failed to create terminal widget. Cause: ', err);\n        }\n        throw new Error('Unable to create new terminal for machine: ' + machineName);\n    }\n}\n\nexport class NewTerminalItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly _machineName: string,\n        private readonly execute: (item: NewTerminalItem) => void\n    ) {\n        super({\n            label: _machineName,\n        });\n    }\n\n    get machineName(): string {\n        return this._machineName;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.execute(this);\n\n        return true;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { EditorTextFocusContext, EditorWidget } from '@theia/editor/lib/browser';\nimport { JAVA_LANGUAGE_ID } from '@theia/java/lib/browser';\n\nexport namespace JavaKeybindingContexts {\n    export const javaEditorTextFocus = 'javaEditorTextFocus';\n}\n\n@injectable()\nexport class JavaEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = JavaKeybindingContexts.javaEditorTextFocus;\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return super.canHandle(widget) && widget.editor.document.languageId === JAVA_LANGUAGE_ID;\n    }\n\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables/env-variables-protocol';\nimport { CheApiEndPointProvider } from '../common/che-api-endpoint-provider';\n\n@injectable()\nexport class CheApiExternalEndPointProvider implements CheApiEndPointProvider {\n\n    @inject(EnvVariablesServer)\n    protected readonly envVariablesServer: EnvVariablesServer;\n\n    getCheApiEndPoint(): Promise<string | undefined> {\n        return this.getEnvVarValue(this.getCheApiEndPointEnvVariableName());\n    }\n\n    getCheApiEndPointEnvVariableName(): string {\n        return 'CHE_API_EXTERNAL';\n    }\n\n    protected async getEnvVarValue(envVar: string): Promise<string | undefined> {\n        const variable = await this.envVariablesServer.getValue(envVar);\n        return variable && variable.value ? variable.value : undefined;\n    }\n\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCgotLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJleHRlcm5hbExpYnJhcmllcyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCiAgICAgd2lkdGg9IjEwcHgiIGhlaWdodD0iMTBweCIgdmlld0JveD0iNyA3IDE4IDE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMiAzMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8Zz4KICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM3MkFENDIiIGQ9Ik0yMi43MzcsMTEuMjkyYy0wLjEwOS0wLjA4NS0wLjI0OS0wLjEwNC0wLjM3Mi0wLjA1MQogICAgICAgICAgICAgICAgbC01Ljk0OCwyLjU3NWMtMC4yNTgsMC4xMTMtMC41ODIsMC4xNjctMC45MTQsMC4xNjdjLTAuNDY0LDAuMDAxLTAuOTQzLTAuMTA3LTEuMjc3LTAuMjU0Yy0wLjEyLTAuMDUxLTAuMjItMC4xMDgtMC4yOTEtMC4xNgogICAgICAgICAgICAgICAgYzAuMDI2LTAuMDEyLDAuMDU2LTAuMDI2LDAuMDkxLTAuMDRsNS40MS0yLjM0MmwwLjgwOCwwLjM0NnYtMS4wMDljMC0wLjE1LTAuMDYzLTAuMjkyLTAuMTczLTAuMzc3CiAgICAgICAgICAgICAgICBjLTAuMTA5LTAuMDg1LTAuMjQ5LTAuMTA0LTAuMzcxLTAuMDUxbC01Ljk1NCwyLjU3NWMtMC4xODMsMC4wNzQtMC4zNDEsMC4xNjUtMC40NzUsMC4yOTdjLTAuMTMxLDAuMTI4LTAuMjQ0LDAuMzQtMC4yNDIsMC41NzUKICAgICAgICAgICAgICAgIGMwLDAuMDA2LDAuMDAyLDAuMDE3LDAuMDAyLDAuMDE3djkuMDY5YzAsMC4wMDQtMC4wMDEsMC4wMDgtMC4wMDEsMC4wMTJjMCwwLjAwMywwLjAwMSwwLjAwNSwwLjAwMSwwLjAwOHYwLjAxaDAuMDAxCiAgICAgICAgICAgICAgICBjMC4wMTMsMC4zMiwwLjE3MywwLjUyNSwwLjMyNSwwLjY2MWMwLjQ4LDAuNDI0LDEuMjg3LDAuNjYsMi4xNDUsMC42OGMwLjQwNywwLDAuODItMC4wNjQsMS4yMDEtMC4yMjZsNS45NDktMi41NzgKICAgICAgICAgICAgICAgIGMwLjE1Ny0wLjA2NCwwLjI2LTAuMjM1LDAuMjYtMC40MjR2LTkuMTA0QzIyLjkxMSwxMS41MTksMjIuODQ2LDExLjM3NiwyMi43MzcsMTEuMjkyeiIvPgogICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0NGNDA1RiIgZD0iTTE4Ljk2NSw5LjU2N2MtMC4wMTEtMC4xMzYtMC4wNjYtMC4yNjQtMC4xNjctMC4zNDIKICAgICAgICAgICAgICAgIGMtMC4xMDktMC4wODUtMC4yNDktMC4xMDUtMC4zNzMtMC4wNTFsLTUuOTQ3LDIuNTc1Yy0wLjI1OSwwLjExMi0wLjU4MywwLjE2Ny0wLjkxNCwwLjE2N2MtMC40NjQsMC0wLjk0NC0wLjEwNy0xLjI3OC0wLjI1NAogICAgICAgICAgICAgICAgYy0wLjExOC0wLjA1LTAuMjItMC4xMDgtMC4yOS0wLjE1OWMwLjAyNS0wLjAxMywwLjA1Ny0wLjAyNiwwLjA5LTAuMDRsNS40MS0yLjM0MmwwLjgwNywwLjM0NVY4LjQ1OAogICAgICAgICAgICAgICAgYzAtMC4xNS0wLjA2NS0wLjI5Mi0wLjE3NC0wLjM3NmMtMC4xMDktMC4wODUtMC4yNTItMC4xMDUtMC4zNzQtMC4wNTFsLTUuOTQ4LDIuNTc1Yy0wLjE4NCwwLjA3NC0wLjM0LDAuMTY1LTAuNDc0LDAuMjk4CiAgICAgICAgICAgICAgICBjLTAuMTMyLDAuMTI4LTAuMjQ0LDAuMzM5LTAuMjQzLDAuNTc1YzAsMC4wMDYsMC4wMDIsMC4wMTYsMC4wMDIsMC4wMTZ2OS4wNjljMCwwLjAwNCwwLDAuMDA5LDAsMC4wMTNjMCwwLjAwMiwwLDAuMDAzLDAsMC4wMTMKICAgICAgICAgICAgICAgIHYwLjAxM2gwLjAwMWMwLjAxNCwwLjMyLDAuMTczLDAuNTI1LDAuMzI1LDAuNjU5YzAuNDgxLDAuNDI0LDEuMjg4LDAuNjUzLDIuMTQ2LDAuNjc1YzAuMjMxLDAsMC40NjQtMC4wMywwLjY5My0wLjA3M3YtOC4yOTkKICAgICAgICAgICAgICAgIGMtMC4wMDYtMC40MzEsMC4xNjYtMC44NDUsMC40NjktMS4xNDNjMC4xOTYtMC4xOTQsMC40MzYtMC4zNDcsMC43MzItMC40NjVMMTguOTY1LDkuNTY3eiIvPgogICAgICAgIDwvZz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCgotLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJlbnVtX3R5cGUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjcgNyAxOCAxOCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRTBCOTFEIiBkPSJNMTYsMjRjNC40MDYsMCw4LTMuNTk0LDgtOGMwLTQuNDA2LTMuNTk0LTgtOC04CgkJYy00LjQwNiwwLTgsMy41OTQtOCw4QzgsMjAuNDA2LDExLjU5NCwyNCwxNiwyNHoiLz4KCTxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRkZGRkZGIiBkPSJNMTMuMjUsMTJjMS44MzMsMCwzLjY2NywwLDUuNTAxLDBDMTguODg4LDEyLDE5LDEyLjExMywxOSwxMi4yNQoJCXYxLjVjMCwwLjEzNy0wLjExMiwwLjI1LTAuMjQ5LDAuMjVIMTV2MWgzLjc1QzE4Ljg4OCwxNSwxOSwxNS4xMTMsMTksMTUuMjV2MS41MDFDMTksMTYuODg4LDE4Ljg4OCwxNywxOC43NTEsMTdIMTV2MWgzLjc1CgkJQzE4Ljg4OCwxOCwxOSwxOC4xMTIsMTksMTguMjV2MS41YzAsMC4xMzgtMC4xMTIsMC4yNS0wLjI0OSwwLjI1Yy0xLjgzNCwwLTMuNjY3LDAtNS41MDEsMEMxMy4xMTIsMjAsMTMsMTkuODg4LDEzLDE5Ljc1di03LjUKCQlDMTMsMTIuMTEyLDEzLjExMiwxMiwxMy4yNSwxMnoiLz4KPC9nPgo8L3N2Zz4K\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable } from 'inversify';\nimport { WebSocketOptions } from '@theia/core/lib/browser';\nimport { JsonRpcProxy, JsonRpcProxyFactory } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { ConnectionHandler } from '@theia/core/lib/common/messaging';\nimport { listen as doListen, Logger, ConsoleLogger } from 'vscode-ws-jsonrpc/lib';\nconst ReconnectingWebSocket = require('reconnecting-websocket');\n\n@injectable()\nexport class RemoteWebSocketConnectionProvider {\n\n    createProxy<T extends object>(path: string, target?: object): JsonRpcProxy<T> {\n        const proxyFactory = new JsonRpcProxyFactory<T>(target);\n        this.listen({\n            path,\n            onConnection: c => proxyFactory.listen(c)\n        });\n        return proxyFactory.createProxy();\n    }\n\n    protected listen(handler: ConnectionHandler, options?: WebSocketOptions): void {\n        const webSocket = this.createWebSocket(handler.path);\n\n        const logger = this.createLogger();\n        webSocket.onerror = function (error: Event) {\n            logger.error('' + error);\n            return;\n        };\n        doListen({\n            webSocket,\n            onConnection: handler.onConnection.bind(handler),\n            logger\n        });\n    }\n\n    protected createLogger(): Logger {\n        return new ConsoleLogger();\n    }\n\n    createWebSocket(url: string): WebSocket {\n        return new ReconnectingWebSocket(url, undefined, {\n            maxReconnectionDelay: 10000,\n            minReconnectionDelay: 1000,\n            reconnectionDelayGrowFactor: 1.3,\n            connectionTimeout: 10000,\n            maxRetries: Infinity,\n            debug: false\n        });\n    }\n}\n","/*\n * Copyright (c) 2012-2018 Red Hat, Inc.\n * This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v2.0\n * which is available at http://www.eclipse.org/legal/epl-2.0.html\n *\n * SPDX-License-Identifier: EPL-2.0\n *\n * Contributors:\n *   Red Hat, Inc. - initial API and implementation\n */\n\nimport { injectable } from 'inversify';\nimport { CommandContribution, CommandRegistry, MenuContribution, MenuModelRegistry } from '@theia/core/lib/common';\nimport { KeybindingContribution, KeybindingRegistry } from '@theia/core/lib/browser';\n\n@injectable()\nexport class JavaExtensionContribution implements CommandContribution, MenuContribution, KeybindingContribution {\n\n    registerCommands(registry: CommandRegistry): void {\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\nexport const CheApiEndPointProvider = Symbol('CheApiEndPointProvider');\n\nexport interface CheApiEndPointProvider {\n    getCheApiEndPoint(): Promise<string | undefined>;\n    getCheApiEndPointEnvVariableName(): string;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { TaskContribution, TaskResolverRegistry, TaskProviderRegistry } from '@theia/task/lib/browser';\nimport { CheTaskProvider } from './che-task-provider';\nimport { CheTaskResolver } from './che-task-resolver';\nimport { CHE_TASK_TYPE } from '../common/task-protocol';\n\n@injectable()\nexport class CheTaskContribution implements TaskContribution {\n\n    @inject(CheTaskResolver)\n    protected readonly taskResolver: CheTaskResolver;\n\n    @inject(CheTaskProvider)\n    protected readonly taskProvider: CheTaskProvider;\n\n    registerResolvers(resolvers: TaskResolverRegistry): void {\n        resolvers.register(CHE_TASK_TYPE, this.taskResolver);\n    }\n\n    registerProviders(providers: TaskProviderRegistry): void {\n        providers.register(CHE_TASK_TYPE, this.taskProvider);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {inject, injectable} from 'inversify';\nimport {VariableContribution, VariableRegistry} from '@theia/variable-resolver/lib/browser';\nimport {CheWorkspaceClientService} from '../../common/che-workspace-client-service';\nimport {WorkspaceService} from '@theia/workspace/lib/browser/workspace-service';\nimport {SelectionService} from '@theia/core/lib/common';\nimport {FileStat} from '@theia/filesystem/lib/common/filesystem';\nimport {MessageService} from '@theia/core/lib/common/message-service';\n\n/**\n * Contributes the path for current project as a relative path to the first directory under the root workspace.\n */\n@injectable()\nexport class ProjectPathVariableContribution implements VariableContribution {\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWsClient: CheWorkspaceClientService;\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    async registerVariables(variables: VariableRegistry): Promise<void> {\n\n        variables.registerVariable({\n            name: 'current.project.path',\n            description: 'The path of the project root folder',\n            resolve: async () => {\n                let errorMessage = 'Can not resolve \\'current.project.path\\' variable. ';\n\n                const selection = this.selectionService.selection;\n                if (!Array.isArray(selection) || !selection[0] || !selection[0].fileStat || !selection[0].fileStat.uri) {\n                    errorMessage += 'No item selected in the project explorer.';\n                    await this.messageService.error(errorMessage);\n                    return undefined;\n                }\n                const selectionUri = selection[0]!.fileStat!.uri;\n\n                // WIP workspace folder is roots[0] https://github.com/theia-ide/theia/commit/80f402c621fe197130eae7abd22a0d89008b4ef1\n                // Beware, workspace folder concept will diseappear in the next PR.\n                const wsRoot = await this.workspaceService.roots;\n                const currentRoot = wsRoot.find((root: FileStat) => {\n                    // if multi-root\n                    return selectionUri.startsWith(root.uri);\n                });\n                if (!currentRoot || !currentRoot.uri) {\n                    errorMessage += 'Get current workspace root URI error.';\n                    await this.messageService.error(errorMessage);\n                    return undefined;\n                }\n                const rootWorkspaceUri = currentRoot.uri;\n\n                if (!selectionUri.startsWith(rootWorkspaceUri)) {\n                    errorMessage += 'The selection isn\\'t under the current workspace root folder.';\n                    await this.messageService.error(errorMessage);\n                    return undefined;\n                }\n\n                const relativeSelectionPath = selectionUri.substr(rootWorkspaceUri.length);\n                if (!relativeSelectionPath.length) {\n                    errorMessage += 'Workspace root folder is selected and is not a project. Please select a project.';\n                    await this.messageService.error(errorMessage);\n                    return undefined;\n                }\n                const splitter = '/';\n                const dirIndex = relativeSelectionPath[0] === splitter ? 1 : 0;\n\n                return relativeSelectionPath.split(splitter)[dirIndex];\n            }\n        });\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TaskResolver } from '@theia/task/lib/browser';\nimport { VariableResolverService } from '@theia/variable-resolver/lib/browser';\nimport { TaskConfiguration } from '@theia/task/lib/common';\nimport { MachinePicker } from './machine-picker';\nimport { CheTaskConfiguration, Target, CHE_TASK_TYPE } from '../common/task-protocol';\nimport { CheWorkspaceClientService } from '../common/che-workspace-client-service';\n\n/**\n * Prepares a Che Task config for execution:\n * - resolves the variables in a command line;\n * - sets the current Che workspace's ID if it's not specified;\n * - allows to choose a target machine if it's not specified.\n */\n@injectable()\nexport class CheTaskResolver implements TaskResolver {\n\n    @inject(VariableResolverService)\n    protected readonly variableResolverService: VariableResolverService;\n\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWorkspaceClient: CheWorkspaceClientService;\n\n    @inject(MachinePicker)\n    protected readonly machinePicker: MachinePicker;\n\n    async resolveTask(taskConfig: TaskConfiguration): Promise<TaskConfiguration> {\n        if (taskConfig.type !== CHE_TASK_TYPE) {\n            throw new Error(`Unsupported task configuration type: ${taskConfig.type}`);\n        }\n        const cheTaskConfig = taskConfig as CheTaskConfiguration;\n        const target = cheTaskConfig.target;\n        const resultTarget: Target = {};\n\n        if (target && target.workspaceId) {\n            resultTarget.workspaceId = target.workspaceId;\n        } else {\n            resultTarget.workspaceId = await this.cheWorkspaceClient.getWorkspaceId();\n        }\n\n        if (target && target.machineName) {\n            resultTarget.machineName = target.machineName;\n        } else {\n            resultTarget.machineName = await this.machinePicker.pick();\n        }\n\n        const resultTask: CheTaskConfiguration = {\n            type: cheTaskConfig.type,\n            label: cheTaskConfig.label,\n            command: await this.variableResolverService.resolve(cheTaskConfig.command),\n            target: resultTarget,\n            previewUrl: cheTaskConfig.previewUrl\n        };\n        return resultTask;\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport { CommandContribution } from '@theia/core/lib/common';\nimport { ClipboardService } from './clipboard-service';\nimport { SshFrontendContribution } from './ssh-frontend-contribution';\nimport { SshQuickOpenService } from './ssh-quick-open-service';\nimport { SshKeyServer, sshKeyServicePath } from '../common/ssh-protocol';\n\nexport default new ContainerModule(bind => {\n    bind(CommandContribution).to(SshFrontendContribution).inSingletonScope();\n    bind(SshQuickOpenService).toSelf().inSingletonScope();\n    bind(ClipboardService).toSelf().inSingletonScope();\n    bind(SshKeyServer).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<SshKeyServer>(sshKeyServicePath);\n    }).inSingletonScope();\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../css-loader/index.js!./index.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../css-loader/index.js!./index.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../css-loader/index.js!./index.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { WidgetFactory, FrontendApplicationContribution, bindViewContribution } from '@theia/core/lib/browser';\nimport { PreviewsContribution } from './previews-contribution';\nimport { PreviewUrlOpenService } from './preview-url-open-service';\nimport { PreviewsWidget, PREVIEWS_WIDGET_FACTORY_ID } from './previews-widget';\nimport { PreviewsWidgetModel } from './previews-widget-model';\nimport { PreviewUrlWatcher } from './preview-url-watcher';\n\nimport '../../../src/browser/preview/style/index.css';\n\nexport function bindPreviewModule(bind: interfaces.Bind) {\n\n    bindViewContribution(bind, PreviewsContribution);\n    bind(FrontendApplicationContribution).toService(PreviewsContribution);\n\n    bind(PreviewsWidgetModel).toSelf().inTransientScope();\n    bind(PreviewsWidget).toSelf().inTransientScope();\n    bind(WidgetFactory).toDynamicValue(ctx => ({\n        id: PREVIEWS_WIDGET_FACTORY_ID,\n        createWidget: () => ctx.container.get(PreviewsWidget)\n    }));\n\n    bind(PreviewUrlOpenService).toSelf().inSingletonScope();\n\n    bind(PreviewUrlWatcher).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(PreviewUrlWatcher);\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { AbstractViewContribution, StatusBar, StatusBarAlignment, FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { PreviewsWidget, PREVIEWS_WIDGET_FACTORY_ID } from './previews-widget';\n\nexport const STATUS_BAR_ELEMENT_ID: string = 'che-previews';\n\n@injectable()\nexport class PreviewsContribution extends AbstractViewContribution<PreviewsWidget> implements FrontendApplicationContribution {\n\n    @inject(StatusBar)\n    protected readonly statusBar: StatusBar;\n\n    constructor() {\n        super({\n            widgetId: PREVIEWS_WIDGET_FACTORY_ID,\n            widgetName: 'Preview URLs',\n            defaultWidgetOptions: {\n                area: 'bottom'\n            },\n            toggleCommandId: 'previewURLsView:toggle',\n        });\n    }\n\n    onStart(): void {\n        this.setStatusBarElement();\n    }\n\n    protected setStatusBarElement(): void {\n        this.statusBar.setElement(STATUS_BAR_ELEMENT_ID, {\n            text: '$(link) Previews',\n            tooltip: 'Show Preview URLs',\n            alignment: StatusBarAlignment.LEFT,\n            command: this.toggleCommand ? this.toggleCommand.id : undefined\n        });\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nexport const sshKeyServicePath = '/services/ssh-key';\nexport const SshKeyServer = Symbol(\"SshKeyServer\");\n\n/**\n * Representation of JSON-RPC service for SSH key pair management.\n */\nexport interface SshKeyServer {\n\n    generate(service: string, name: string): Promise<SshKeyPair>;\n\n    create(sshKeyPair: SshKeyPair): Promise<void>;\n\n    get(service: string, name: string): Promise<SshKeyPair>;\n\n    getAll(service: string): Promise<SshKeyPair[]>;\n\n    delete(service: string, name: string): Promise<void>;\n}\n\n/**\n * Representation of a SSH key pair.\n */\nexport interface SshKeyPair {\n    /**\n     * Che service that uses SSH key pair, e.g. workspace, machine, vcs.\n     */\n    service: string;\n    /**\n     * Key pair identifier.\n     */\n    name: string;\n    privateKey?: string;\n    publicKey?: string;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { Emitter, Event } from '@theia/core';\nimport { DefaultFrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { TaskService } from '@theia/task/lib/browser';\nimport { TaskWatcher } from '@theia/task/lib/common';\nimport { PreviewUrlOpenService } from './preview-url-open-service';\nimport { CheTaskConfiguration, CHE_TASK_TYPE } from '../../common/task-protocol';\n\n@injectable()\nexport class PreviewsWidgetModel extends DefaultFrontendApplicationContribution {\n\n    @inject(TaskService)\n    protected readonly taskService: TaskService;\n\n    @inject(TaskWatcher)\n    protected readonly taskWatcher: TaskWatcher;\n\n    @inject(PreviewUrlOpenService)\n    protected readonly previewService: PreviewUrlOpenService;\n\n    protected tasks: CheTaskConfiguration[] = [];\n\n    protected readonly onChangedEmitter = new Emitter<void>();\n\n    @postConstruct()\n    init(): void {\n        this.fetchTasks();\n        this.taskWatcher.onTaskCreated(() => this.fetchTasks());\n        this.taskWatcher.onTaskExit(() => this.fetchTasks());\n    }\n\n    protected async fetchTasks(): Promise<void> {\n        this.tasks = [];\n        const runningTasks = await this.taskService.getRunningTasks();\n        runningTasks.filter(t => t.config.type === CHE_TASK_TYPE).forEach(cheTask => {\n            const cheTaskConfig = cheTask.config as CheTaskConfiguration;\n            if (cheTaskConfig.previewUrl) {\n                this.tasks.push(cheTaskConfig);\n            }\n        });\n        this.fireChanged();\n    }\n\n    getTasks(): CheTaskConfiguration[] {\n        return this.tasks;\n    }\n\n    get onChanged(): Event<void> {\n        return this.onChangedEmitter.event;\n    }\n\n    protected fireChanged(): void {\n        this.onChangedEmitter.fire(undefined);\n    }\n\n    previewURL(task: CheTaskConfiguration): void {\n        this.previewService.preview(task);\n    }\n\n    goToURL(task: CheTaskConfiguration): void {\n        this.previewService.preview(task, true);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Command, CommandRegistry, CommandContribution } from '@theia/core';\nimport { SshQuickOpenService } from './ssh-quick-open-service';\n\nexport namespace SshCommands {\n    export const GENERATE: Command = {\n        id: 'ssh:generate',\n        label: 'SSH: generate key pair...'\n    };\n    export const CREATE: Command = {\n        id: 'ssh:create',\n        label: 'SSH: create key pair...'\n    };\n    export const COPY: Command = {\n        id: 'ssh:copy',\n        label: 'SSH: copy public key to clipboard...'\n    };\n    export const DELETE: Command = {\n        id: 'ssh:delete',\n        label: 'SSH: delete key pair...'\n    };\n}\n\n@injectable()\nexport class SshFrontendContribution implements CommandContribution {\n\n    constructor(\n        @inject(SshQuickOpenService) protected readonly sshQuickOpenService: SshQuickOpenService\n    ) { }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(SshCommands.GENERATE, {\n            isEnabled: () => true,\n            execute: () => this.sshQuickOpenService.generateKeyPair()\n        });\n        commands.registerCommand(SshCommands.CREATE, {\n            isEnabled: () => true,\n            execute: () => this.sshQuickOpenService.createKeyPair()\n        });\n        commands.registerCommand(SshCommands.COPY, {\n            isEnabled: () => true,\n            execute: () => this.sshQuickOpenService.copyPublicKey()\n        });\n        commands.registerCommand(SshCommands.DELETE, {\n            isEnabled: () => true,\n            execute: () => this.sshQuickOpenService.deleteKeyPair()\n        });\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {inject, injectable} from 'inversify';\nimport WorkspaceClient, {IRemoteAPI, IBackend} from '@eclipse-che/workspace-client';\nimport {EnvVariablesServer, EnvVariable} from '@theia/core/lib/common/env-variables';\n\n@injectable()\nexport class CheWorkspaceClientService {\n\n    private cheApi: Promise<string>;\n    private _backend: IBackend;\n\n    constructor(@inject(EnvVariablesServer) protected readonly baseEnvVariablesServer: EnvVariablesServer) {\n        this.cheApi = this.baseEnvVariablesServer.getValue('CHE_API_EXTERNAL').then((cheApiEnv: EnvVariable | undefined) => {\n            if (cheApiEnv && cheApiEnv.value) {\n                return Promise.resolve(cheApiEnv.value);\n            }\n            return Promise.reject('Failed to get Eclipse CHE api endPoint');\n        });\n        this._backend = WorkspaceClient.getRestBackend();\n    }\n\n    async restClient(): Promise<IRemoteAPI> {\n        const config = {\n            baseUrl: await this.cheApi\n        };\n        return WorkspaceClient.getRestApi(config);\n    }\n\n    get backend(): IBackend {\n        return this._backend;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { WebSocketConnectionProvider, FrontendApplicationContribution } from \"@theia/core/lib/browser\";\nimport { ActivityTrackerService, ACTIVITY_TRACKER_SERVICE_PATH } from \"../common/activity-tracker-protocol\";\nimport { CheTheiaActivityTrackerFrontendContribution } from \"./che-theia-activity-tracker-contribution\";\n\nexport default new ContainerModule(bind => {\n    bind(ActivityTrackerService).toDynamicValue(context =>\n        context.container.get(WebSocketConnectionProvider).createProxy<ActivityTrackerService>(ACTIVITY_TRACKER_SERVICE_PATH)\n    ).inSingletonScope();\n\n    bind(FrontendApplicationContribution).to(CheTheiaActivityTrackerFrontendContribution);\n});\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCgotLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJqYXJGaWxlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKICAgICB3aWR0aD0iMTBweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSI3IDcgMTggMTgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDMyIDMyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICAgIDxnPgogICAgICAgICAgICA8cmVjdCB4PSIxMi4xNjYiIHk9IjgiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRTBCOTFEIiB3aWR0aD0iNy42NjkiIGhlaWdodD0iMS4yOTgiLz4KICAgICAgICAgICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMTkzRDQiIGQ9Ik0xNiwyMy44NTZsLTMuNzY3LDAuMTQzYzAsMC0xLjQyNiwwLjA1OC0xLjQyNi0xLjIyMgogICAgICAgICAgICAgICAgczAtMTIuMDgyLDAtMTIuMDgyczAuMDY3LTEuMTM3LDEuMzU4LTEuMTM3aDcuNjY5YzEuMjg5LDAsMS4zNTgsMS4xMzcsMS4zNTgsMS4xMzdjMCwxMC45MzUsMCwxMC41MDgsMCwxMi4wODIKICAgICAgICAgICAgICAgIGMwLDEuMjc5LTEuNDI2LDEuMjIyLTEuNDI2LDEuMjIyTDE2LDIzLjg1NkwxNiwyMy44NTZ6IE0xNC42NzQsMTQuODc3di0wLjU5OGMwLTAuMzgyLTAuMDktMC42NzItMC4yNjktMC44NjkKICAgICAgICAgICAgICAgIGMtMC4xNzktMC4xOTYtMC40MjEtMC4yOTQtMC43MjQtMC4yOTRjLTAuMzA1LDAtMC41NDYsMC4wOTgtMC43MjMsMC4yOTRjLTAuMTc3LDAuMTk1LTAuMjY2LDAuNDg1LTAuMjY2LDAuODY5djAuNTk4CiAgICAgICAgICAgICAgICBjMCwwLjM4NCwwLjA5LDAuNjc0LDAuMjY4LDAuODY5YzAuMTc5LDAuMTk2LDAuNDIsMC4yOTQsMC43MjUsMC4yOTRjMC4zMDIsMCwwLjU0My0wLjA5OCwwLjcyMS0wLjI5NAogICAgICAgICAgICAgICAgQzE0LjU4NSwxNS41NTEsMTQuNjc0LDE1LjI2MSwxNC42NzQsMTQuODc3TDE0LjY3NCwxNC44Nzd6IE0xOS4zMDgsMTQuODc3di0wLjU5OGMwLTAuMzgyLTAuMDktMC42NzItMC4yNjktMC44NjkKICAgICAgICAgICAgICAgIGMtMC4xOC0wLjE5Ni0wLjQyMS0wLjI5NC0wLjcyNS0wLjI5NGMtMC4zMDUsMC0wLjU0NSwwLjA5OC0wLjcyMiwwLjI5NGMtMC4xNzcsMC4xOTUtMC4yNjYsMC40ODUtMC4yNjYsMC44Njl2MC41OTgKICAgICAgICAgICAgICAgIGMwLDAuMzg0LDAuMDg5LDAuNjc0LDAuMjY4LDAuODY5YzAuMTc5LDAuMTk2LDAuNDE5LDAuMjk0LDAuNzI1LDAuMjk0YzAuMzAyLDAsMC41NDItMC4wOTgsMC43MjEtMC4yOTQKICAgICAgICAgICAgICAgIEMxOS4yMTksMTUuNTUxLDE5LjMwOCwxNS4yNjEsMTkuMzA4LDE0Ljg3N0wxOS4zMDgsMTQuODc3eiBNMTguNjQ4LDE0LjIzNWMwLTAuMjE3LTAuMDI4LTAuMzc0LTAuMDg2LTAuNDY4CiAgICAgICAgICAgICAgICBjLTAuMDU3LTAuMDk1LTAuMTM5LTAuMTQzLTAuMjQ4LTAuMTQzcy0wLjE5LDAuMDQ3LTAuMjQ2LDAuMTQzYy0wLjA1NiwwLjA5NS0wLjA4MywwLjI1MS0wLjA4MywwLjQ2OHYwLjY4MwogICAgICAgICAgICAgICAgYzAsMC4yMjEsMC4wMjcsMC4zNzgsMC4wODMsMC40NzNjMC4wNTcsMC4wOTQsMC4xNCwwLjE0MiwwLjI1MSwwLjE0MmMwLjEwNywwLDAuMTg5LTAuMDQ3LDAuMjQ1LTAuMTQyCiAgICAgICAgICAgICAgICBjMC4wNTctMC4wOTUsMC4wODQtMC4yNTIsMC4wODQtMC40NzNWMTQuMjM1TDE4LjY0OCwxNC4yMzV6IE0xNi40MTYsMTZ2LTIuODQ0bC0xLjI5MywwLjJ2MC40NjRoMC42MzVWMTZIMTYuNDE2TDE2LjQxNiwxNnoKICAgICAgICAgICAgICAgIE0xNC4wMTYsMTQuMjM1YzAtMC4yMTctMC4wMjktMC4zNzQtMC4wODYtMC40NjhjLTAuMDU3LTAuMDk1LTAuMTQtMC4xNDMtMC4yNDgtMC4xNDNjLTAuMTA5LDAtMC4xOTEsMC4wNDctMC4yNDcsMC4xNDMKICAgICAgICAgICAgICAgIGMtMC4wNTUsMC4wOTUtMC4wODMsMC4yNTEtMC4wODMsMC40Njh2MC42ODNjMCwwLjIyMSwwLjAyOCwwLjM3OCwwLjA4NCwwLjQ3M2MwLjA1NiwwLjA5NCwwLjE0LDAuMTQyLDAuMjUsMC4xNDIKICAgICAgICAgICAgICAgIGMwLjEwNywwLDAuMTg5LTAuMDQ3LDAuMjQ2LTAuMTQyYzAuMDU2LTAuMDk1LDAuMDg0LTAuMjUyLDAuMDg0LTAuNDczVjE0LjIzNXoiLz4KICAgIDwvZz4KPC9zdmc+Cg==\"","exports = module.exports = require(\"../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright (C) 2017 TypeFox and others.\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\"); you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\\n */\\n/*\\n// Copied from 'terminal.css', CQ: https://dev.eclipse.org/ipzilla/show_bug.cgi?id=16269\\n*/\\n.terminal-container {\\n    width:100%;\\n    height:100%;\\n    padding: var(--theia-code-padding);\\n}\\n\", \"\"]);\n\n// exports\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {injectable, inject} from 'inversify';\nimport {FrontendApplicationContribution, FrontendApplication} from '@theia/core/lib/browser';\nimport {EnvVariablesServer, EnvVariable} from '@theia/core/lib/common/env-variables';\nimport {FrontendApplicationStateService} from '@theia/core/lib/browser/frontend-application-state';\nimport {CheWorkspaceClientService} from './che-workspace-client-service';\nimport {IWorkspace} from '@eclipse-che/workspace-client';\nimport '../../src/browser/style/che-theia-dashboard-module.css';\n\nconst THEIA_ICON_ID = 'theia:icon';\n\n/**\n * Provides basic Eclipse Che Theia Dashboard extension that adds Show/Hide Dashboard button to the top menu.\n */\n@injectable()\nexport class TheiaDashboardClient implements FrontendApplicationContribution {\n\n    private isExpanded: boolean = false;\n\n    constructor(@inject(EnvVariablesServer) private readonly envVariablesServer: EnvVariablesServer,\n                @inject(CheWorkspaceClientService) private readonly cheWorkspaceClient: CheWorkspaceClientService,\n                @inject(FrontendApplicationStateService) protected readonly frontendApplicationStateService: FrontendApplicationStateService) {\n        this.frontendApplicationStateService.reachedState('ready').then(() => this.onReady());\n    }\n\n    async onStart(app: FrontendApplication): Promise<void> {\n        // load this module at FrontendApplication startup\n    }\n\n    async onReady() {\n        const logoEl: HTMLElement | null = document.getElementById(THEIA_ICON_ID);\n        if (!logoEl || !logoEl.parentElement) {\n            return;\n        }\n\n        const isInFrame = window !== window.parent;\n        const dashboardEl: HTMLElement = document.createElement('div');\n        dashboardEl.className = 'che-dashboard';\n        const arrowEl: HTMLElement = document.createElement(isInFrame ? 'i' : 'a');\n        arrowEl.className = 'fa fa-chevron-left';\n        dashboardEl.appendChild(arrowEl);\n        logoEl!.parentElement!.replaceChild(dashboardEl, logoEl!);\n\n        if (!isInFrame) {\n            arrowEl.setAttribute('target', '_blank');\n            const href = await this.getDashboardWorkspaceUrl();\n            if (href === undefined) {\n                return;\n            }\n            arrowEl.setAttribute('href', href!);\n            arrowEl.title = 'Open with navigation bar';\n\n            return;\n        }\n\n        arrowEl.setAttribute('title', 'Hide navigation bar');\n        arrowEl.addEventListener('click', () => {\n            this.isExpanded = !this.isExpanded;\n            window.parent.postMessage(this.isExpanded ? 'hide-navbar' : 'show-navbar', '*');\n            arrowEl.className = `fa fa-chevron-${this.isExpanded ? 'right' : 'left'}`;\n            arrowEl.title = `${this.isExpanded ? 'Show' : 'Hide'} navigation bar`;\n        });\n    }\n\n    async getDashboardWorkspaceUrl(): Promise<string | undefined> {\n        const envVariables: EnvVariable[] = await this.envVariablesServer.getVariables();\n        if (!envVariables) {\n            return undefined;\n        }\n        const workspaceIdEnvVar = envVariables.find((envVariable) => {\n            return envVariable.name === 'CHE_WORKSPACE_ID';\n        });\n        if (!workspaceIdEnvVar || !workspaceIdEnvVar.value) {\n            return undefined;\n        }\n\n        const workspaceId = workspaceIdEnvVar.value;\n\n        const remoteApi = await this.cheWorkspaceClient.restClient();\n        const workspace: IWorkspace = await remoteApi.getById<IWorkspace>(workspaceId);\n\n        if (!workspace || !workspace.links || !workspace.links.ide) {\n            return undefined;\n        }\n        const ideWorkspaceUrl = workspace!.links!.ide!;\n\n        return ideWorkspaceUrl.replace('/che/', '/dashboard/#/ide/che/');\n    }\n\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../css-loader/index.js!./icons.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../css-loader/index.js!./icons.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../css-loader/index.js!./icons.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TaskService } from '@theia/task/lib/browser';\nimport { CHE_TASK_TYPE } from '../common/task-protocol';\n\n@injectable()\nexport class CheTaskService {\n\n    @inject(TaskService)\n    protected readonly taskService: TaskService;\n\n    run(label: string): void {\n        this.taskService.run(CHE_TASK_TYPE, label);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { TaskConfiguration, TaskInfo } from '@theia/task/lib/common';\n\nexport const CHE_TASK_TYPE = 'che';\n\nexport interface CheTaskConfiguration extends TaskConfiguration {\n    readonly type: 'che',\n    readonly command: string,\n    readonly target?: Target,\n    readonly previewUrl?: string\n}\n\nexport interface Target {\n    workspaceId?: string,\n    machineName?: string\n}\n\nexport interface CheTaskInfo extends TaskInfo {\n    readonly execId: number;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { MessageService } from '@theia/core';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { TaskWatcher, TaskInfo } from '@theia/task/lib/common';\nimport { VariableResolverService } from '@theia/variable-resolver/lib/browser';\nimport { PreviewUrlOpenService } from './preview-url-open-service';\nimport { CheTaskPreferences } from '../task-preferences';\nimport { CheTaskConfiguration, CHE_TASK_TYPE } from '../../common/task-protocol';\n\nconst PREVIEW_ACTION = 'Preview';\nconst GO_TO_ACTION = 'Go To';\n\n@injectable()\nexport class PreviewUrlWatcher implements FrontendApplicationContribution {\n\n    @inject(TaskWatcher)\n    protected readonly taskWatcher: TaskWatcher;\n\n    @inject(CheTaskPreferences)\n    protected readonly taskPreferences: CheTaskPreferences;\n\n    @inject(PreviewUrlOpenService)\n    protected readonly previewService: PreviewUrlOpenService;\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    @inject(VariableResolverService)\n    protected readonly resolver: VariableResolverService;\n\n    onStart(): void {\n        this.taskWatcher.onTaskCreated(event => this.onTaskCreated(event));\n    }\n\n    protected onTaskCreated = async (event: TaskInfo) => {\n        const mode = this.taskPreferences['che.task.preview.notifications'];\n        if (event.config.type !== CHE_TASK_TYPE || !event.config.previewUrl || mode === 'off') {\n            return;\n        }\n\n        const cheTask = event.config as CheTaskConfiguration;\n        if (mode === 'alwaysGoTo') {\n            this.previewService.preview(cheTask, true);\n        } else if (mode === 'alwaysPreview') {\n            this.previewService.preview(cheTask);\n        } else {\n            this.askUser(cheTask);\n        }\n    }\n\n    /** Ask a user how the preview URL should be opened. */\n    protected async askUser(cheTask: CheTaskConfiguration): Promise<void> {\n        const resolvedURL = await this.resolver.resolve(cheTask.previewUrl!);\n        const answer = await this.messageService.info(`Task '${cheTask.label}' launched a service on ${resolvedURL}`, PREVIEW_ACTION, GO_TO_ACTION);\n        if (answer) {\n            this.previewService.preview(cheTask, answer === GO_TO_ACTION);\n        }\n    }\n}\n","// @ts-check\nrequire('es6-promise/auto');\nrequire('reflect-metadata');\nconst { Container } = require('inversify');\nconst { FrontendApplication } = require('@theia/core/lib/browser');\nconst { frontendApplicationModule } = require('@theia/core/lib/browser/frontend-application-module');\nconst { messagingFrontendModule } = require('@theia/core/lib/browser/messaging/messaging-frontend-module');\nconst { loggerFrontendModule } = require('@theia/core/lib/browser/logger-frontend-module');\nconst { ThemeService } = require('@theia/core/lib/browser/theming');\nconst { FrontendApplicationConfigProvider } = require('@theia/core/lib/browser/frontend-application-config-provider');\n\nFrontendApplicationConfigProvider.set({});\n\nconst container = new Container();\ncontainer.load(frontendApplicationModule);\ncontainer.load(messagingFrontendModule);\ncontainer.load(loggerFrontendModule);\n\nfunction load(raw) {\n    return Promise.resolve(raw.default).then(module =>\n        container.load(module)\n    )\n}\n\nfunction start() {\n    const themeService = ThemeService.get();\n    themeService.loadUserTheme();\n\n    const application = container.get(FrontendApplication);\n    application.start();\n}\n\nmodule.exports = Promise.resolve()\n    .then(function () { return Promise.resolve(require('@theia/core/lib/browser/menu/browser-menu-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/core/lib/browser/window/browser-window-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/output/lib/browser/output-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/filesystem/lib/browser/filesystem-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/filesystem/lib/browser/download/file-download-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/filesystem/lib/browser/file-dialog/file-dialog-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/variable-resolver/lib/browser/variable-resolver-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/workspace/lib/browser/workspace-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/languages/lib/browser/languages-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/editor/lib/browser/editor-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/navigator/lib/browser/navigator-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/markers/lib/browser/problem/problem-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/outline-view/lib/browser/outline-view-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/monaco/lib/browser/monaco-browser-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/callhierarchy/lib/browser/callhierarchy-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/console/lib/browser/console-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/userstorage/lib/browser/user-storage-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/preferences/lib/browser/preference-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/terminal/lib/browser/terminal-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/task/lib/browser/task-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/cpp/lib/browser/cpp-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/debug/lib/browser/debug-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/editorconfig/lib/browser/editorconfig-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/file-search/lib/browser/file-search-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/git/lib/browser/git-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/java/lib/browser/java-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/json/lib/browser/json-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/keymaps/lib/browser/keymaps-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/merge-conflicts/lib/browser/merge-conflicts-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/messages/lib/browser/messages-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/mini-browser/lib/browser/mini-browser-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/plugin-ext/lib/plugin-ext-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/preview/lib/browser/preview-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/python/lib/browser/python-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/search-in-workspace/lib/browser/search-in-workspace-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/textmate-grammars/lib/browser/textmate-grammars-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@theia/typescript/lib/browser/typescript-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('github-extension/lib/browser/github-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('che-theia-ssh-extension/lib/browser/ssh-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('theia-machines-extension/lib/browser/theia-machines-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@eclipse-che/theia-dashboard-extension/lib/browser/che-theia-dashboard-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@eclipse-che/theia-java-extension/lib/browser/che-theia-java-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('che-theia-terminal/lib/browser/terminal-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@eclipse-che/theia-task-extension/lib/browser/che-frontend-module')).then(load) })\n    .then(function () { return Promise.resolve(require('@eclipse-che/theia-activity-tracker/lib/browser/che-theia-activity-tracker-frontend-module')).then(load) })\n    .then(start).catch(reason => {\n        console.error('Failed to start the frontend application.');\n        if (reason) {\n            console.error(reason);\n        }\n    });","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { Repository, Collaborator, User, Credentials, PullRequest, Organization } from \"./github-model\";\n\nexport const githubKeyServicePath = '/services/github';\nexport const GithubService = Symbol(\"GithubService\");\n\n/**\n * Representation of JSON-RPC service for GitHub communication.\n */\nexport interface GithubService {\n\n    /**\n     * Get specified repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     */\n    getRepository(credentials: Credentials, owner: string, repository: string): Promise<Repository>;\n\n    /**\n     * Get repositories owned by a user.\n     *\n     * @param {string} user Owner of the repository.\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getUserRepositories(credentials: Credentials, user: string, pageNumber?: number, pageSize?: number): Promise<Repository[]>;\n\n    /**\n     * Get repositories owned by an organization.\n     *\n     * @param {string} organization Organization witch repository belongs to.\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getOrganizationRepositories(credentials: Credentials, organization: string, pageNumber?: number, pageSize?: number): Promise<Repository[]>;\n\n    /**\n     * Get all repositories from logged in user.\n     *\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getAllRepositories(credentials: Credentials, pageNumber?: number, pageSize?: number): Promise<Repository[]>;\n\n    /**\n     * Get Forks of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getForks(credentials: Credentials, owner: string, repository: string, pageNumber?: number, pageSize?: number): Promise<Repository[]>;\n\n    /**\n     * Create fork of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     */\n    createFork(credentials: Credentials, owner: string, repository: string): Promise<void>;\n\n    /**\n     * Comment issue of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {number} id Id of the issue.\n     * @param {string} comment Comment.\n     */\n    commentIssue(credentials: Credentials, owner: string, repository: string, id: number, comment: string): Promise<void>;\n\n    /**\n     * Get specified pull-request of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {number} id Id of the pull-request.\n     */\n    getPullRequest(credentials: Credentials, owner: string, repository: string, id: number): Promise<PullRequest>;\n\n    /**\n     * Get pull-requests of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getPullRequests(credentials: Credentials, owner: string, repository: string, pageNumber?: number, pageSize?: number): Promise<PullRequest[]>;\n\n    /**\n     * Create pull-request for repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {string} head Branch (or git ref) where the changes are implemented.\n     * @param {string} base Branch (or git ref) where the changes are going to be pulled into.\n     * @param {string} title Title of the pull request.\n     */\n    createPullRequest(credentials: Credentials, owner: string, repository: string, head: string, base: string, title: string): Promise<void>;\n\n    /**\n     * Update the pull-request.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {string} id Id of the pull-request.\n     * @param pullRequest Pull-Request object that contains updated fields.\n     */\n    updatePullRequest(credentials: Credentials, owner: string, repository: string, id: string, pullRequest: PullRequest): Promise<void>;\n\n    /**\n     * Get organizations of the logined user.\n     *\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getOrganizations(credentials: Credentials, pageNumber?: number, pageSize?: number): Promise<Organization[]>;\n\n    /**\n     * Get current logined user.\n     */\n    getCurrentUser(credentials: Credentials): Promise<User>;\n\n    /**\n     * Get collaborators of the repository.\n     *\n     * @param {string} owner Owner of the repository.\n     * @param {string} repository Name of the repository.\n     * @param {number} [pageNumber=0] Number of the page (optional, 0 by default).\n     * @param {number} [pageSize=0] Size of the page (optional, 0 by default).\n     */\n    getCollaborators(credentials: Credentials, owner: string, repository: string, pageNumber?: number, pageSize?: number): Promise<Collaborator[]>;\n\n    /**\n     * Upload SSH key.\n     *\n     * @param {string} title Tile of the key.\n     */\n    uploadSshKey(credentials: Credentials, title: string): Promise<void>;\n}\n\nexport const SshKeyServer = Symbol(\"SshKeyServer\");\n\n/**\n * Representation of JSON-RPC service for SSH key pair management.\n */\nexport interface SshKeyServer {\n\n    generate(service: string, name: string): Promise<SshKeyPair>;\n\n    create(sshKeyPair: SshKeyPair): Promise<void>;\n\n    get(service: string, name: string): Promise<SshKeyPair>;\n\n    getAll(service: string): Promise<SshKeyPair[]>;\n\n    delete(service: string, name: string): Promise<void>;\n}\n\n/**\n * Representation of a SSH key pair.\n */\nexport interface SshKeyPair {\n    /**\n     * Che service that uses SSH key pair, e.g. workspace, machine, vcs.\n     */\n    service: string;\n    /**\n     * Key pair identifier.\n     */\n    name: string;\n    privateKey?: string;\n    publicKey?: string;\n}\n","/*\n * Copyright (c) 2012-2018 Red Hat, Inc.\n * This program and the accompanying materials\n * are made available under the terms of the Eclipse Public License v2.0\n * which is available at http://www.eclipse.org/legal/epl-2.0.html\n *\n * SPDX-License-Identifier: EPL-2.0\n *\n * Contributors:\n *   Red Hat, Inc. - initial API and implementation\n */\n\nexport const HELLO_WORLD_COMMAND = 'org.eclipse.che.jdt.ls.extension.samplecommand';\nexport const FILE_STRUCTURE_COMMAND =\n    'org.eclipse.che.jdt.ls.extension.filestructure';\nexport const TEST_DETECT_COMMAND = 'che.jdt.ls.extension.detectTest';\nexport const FIND_TEST_BY_CURSOR_COMMAND = 'che.jdt.ls.extension.findTestByCursor';\nexport const FIND_TESTS_FROM_PROJECT_COMMAND =\n    'che.jdt.ls.extension.findTestFromProject';\nexport const FIND_TESTS_FROM_FOLDER_COMMAND =\n    'che.jdt.ls.extension.findTestFromFolder';\nexport const FIND_TESTS_FROM_ENTRY_COMMAND =\n    'che.jdt.ls.extension.findTestFromEntry';\nexport const FIND_TESTS_IN_FILE_COMMAND = 'che.jdt.ls.extension.findTestInFile';\nexport const RESOLVE_CLASSPATH_COMMAND = 'che.jdt.ls.extension.resolveClasspath';\nexport const GET_OUTPUT_DIR_COMMAND = 'che.jdt.ls.extension.outputDir';\nexport const GET_EFFECTIVE_POM_COMMAND = 'che.jdt.ls.extension.effectivePom';\nexport const GET_MAVEN_PROJECTS_COMMAND = 'che.jdt.ls.extension.mavenProjects';\nexport const RECOMPUTE_POM_DIAGNOSTICS = 'che.jdt.ls.extension.pom.diagnostics';\nexport const REIMPORT_MAVEN_PROJECTS_COMMAND =\n    'che.jdt.ls.extension.reImportMavenProject';\nexport const GET_CLASS_PATH_TREE_COMMAND = 'che.jdt.ls.extension.classpathTree';\n\n/**\n * External Libraries\n */\n\nexport const GET_EXTERNAL_LIBRARIES_COMMAND =\n    'che.jdt.ls.extension.externalLibraries';\nexport const GET_EXTERNAL_LIBRARIES_CHILDREN_COMMAND =\n    'che.jdt.ls.extension.externalLibrariesChildren';\nexport const GET_LIBRARY_CHILDREN_COMMAND = 'che.jdt.ls.extension.libraryChildren';\nexport const GET_LIBRARY_ENTRY_COMMAND = 'che.jdt.ls.extension.libraryEntry';\n\n/**\n * Debug\n */\n\nexport const FIND_RESOURCES_BY_FQN =\n    'che.jdt.ls.extension.debug.findResourcesByFqn';\nexport const IDENTIFY_FQN_IN_RESOURCE =\n    'che.jdt.ls.extension.debug.identifyFqnInResource';\nexport const USAGES_COMMAND = 'che.jdt.ls.extension.usages';\n\nexport const UPDATE_WORKSPACE = 'che.jdt.ls.extension.updateWorkspace';\n\n/**\n * Simple java project\n */\n\nexport const CREATE_SIMPLE_PROJECT = 'che.jdt.ls.extension.plain.createProject';\nexport const UPDATE_PROJECT_CLASSPATH =\n    'che.jdt.ls.extension.plain.updateClasspath';\nexport const GET_SOURCE_FOLDERS = 'che.jdt.ls.extension.plain.sourceFolders';\n\n/**\n * Navigation\n */\n\nexport const FIND_IMPLEMENTERS_COMMAND = 'che.jdt.ls.extension.findImplementers';\n\n/**\n * Configuration\n */\n\nexport const GET_JAVA_CORE_OPTIONS_СOMMAND =\n    'che.jdt.ls.extension.configuration.getJavaCoreOptions';\nexport const UPDATE_JAVA_CORE_OPTIONS_СOMMAND =\n    'che.jdt.ls.extension.configuration.updateJavaCoreOptions';\nexport const GET_PREFERENCES_СOMMAND =\n    'che.jdt.ls.extension.configuration.getPreferences';\nexport const UPDATE_PREFERENCES_СOMMAND =\n    'che.jdt.ls.extension.configuration.updatePreferences';\n\n/**\n * Imports\n */\n\nexport const ORGANIZE_IMPORTS = 'che.jdt.ls.extension.import.organizeImports';\n\n/**\n * Refactoring\n */\n\nexport const RENAME_COMMAND = 'che.jdt.ls.extension.refactoring.rename';\nexport const GET_RENAME_TYPE_COMMAND =\n    'che.jdt.ls.extension.refactoring.rename.get.type';\nexport const VALIDATE_RENAMED_NAME_COMMAND =\n    'che.jdt.ls.extension.refactoring.rename.validate.new.name';\nexport const GET_LINKED_ELEMENTS_COMMAND =\n    'che.jdt.ls.extension.refactoring.rename.get.linked.elements';\nexport const VALIDATE_MOVE_COMMAND =\n    'che.jdt.ls.extension.refactoring.move.validate';\nexport const GET_DESTINATIONS_COMMAND =\n    'che.jdt.ls.extension.refactoring.move.get.destinations.command';\nexport const MOVE_COMMAND = 'che.jdt.ls.extension.refactoring.move.command';\nexport const VERIFY_MOVE_DESTINATION_COMMAND =\n    'che.jdt.ls.extension.refactoring.move.verify.destination';\n\n/**\n * Classpath updater\n */\n\nexport const CLIENT_UPDATE_PROJECTS_CLASSPATH =\n    'che.jdt.ls.extension.workspace.clientUpdateProjectsClasspath';\n\n/**\n * Project updater\n */\n\nexport const CLIENT_UPDATE_PROJECT =\n    'che.jdt.ls.extension.workspace.clientUpdateProject';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { FrontendApplicationContribution } from \"@theia/core/lib/browser\";\nimport { ActivityTrackerService } from \"../common/activity-tracker-protocol\";\n\n/**\n * Client side part of Theia activity tracker.\n * Treats any key press or mouse event as an activity and sends activity update to Theia backed.\n * To avoid flood of backend, sends updates periodially, unless last activity was detected after idling.\n * Might keep workspace alive on the period longer.\n */\n@injectable()\nexport class CheTheiaActivityTrackerFrontendContribution implements FrontendApplicationContribution {\n\n    // Period for which all activity events turn into one request to backend.\n    private static REQUEST_PERIOD_MS = 1 * 60 * 1000;\n\n    private isAnyActivity: boolean;\n    private isTimerRunning: boolean;\n\n    constructor(\n        @inject(ActivityTrackerService) private activityService: ActivityTrackerService\n    ) {\n        this.isAnyActivity = false;\n        this.isTimerRunning = false;\n    }\n\n    initialize(): void {\n        window.addEventListener('keydown', () => this.onAnyActivity());\n        window.addEventListener('mousedown', () => this.onAnyActivity());\n        window.addEventListener('mousemove', () => this.onAnyActivity());\n\n        // is needed if user reopens browser tab\n        this.sendRequestAndSetTimer();\n    }\n\n    private onAnyActivity(): void {\n        this.isAnyActivity = true;\n\n        if (!this.isTimerRunning) {\n            this.sendRequestAndSetTimer();\n        }\n    }\n\n    private sendRequestAndSetTimer(): void {\n        this.activityService.resetTimeout();\n        this.isAnyActivity = false;\n\n        setTimeout(() => this.checkActivityTimerCallback(), CheTheiaActivityTrackerFrontendContribution.REQUEST_PERIOD_MS);\n        this.isTimerRunning = true;\n    }\n\n    private checkActivityTimerCallback(): void {\n        this.isTimerRunning = false;\n        if (this.isAnyActivity) {\n           this.sendRequestAndSetTimer();\n        }\n    }\n\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Message } from '@phosphor/messaging';\nimport { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';\nimport { PreviewsWidgetModel } from './previews-widget-model';\nimport { CheTaskConfiguration } from '../../common/task-protocol';\nimport * as React from 'react';\n\nexport const PREVIEWS_WIDGET_FACTORY_ID = 'previewUrlsView';\n\n/** Displays the preview URLs of all running Che tasks. */\n@injectable()\nexport class PreviewsWidget extends ReactWidget {\n\n    @inject(PreviewsWidgetModel)\n    protected readonly model: PreviewsWidgetModel;\n\n    constructor() {\n        super();\n        this.id = 'previewUrls';\n        this.addClass('preview-urls');\n        this.title.label = 'Preview URLs';\n        this.title.caption = 'Shows the URLs of the services launched by the tasks';\n        this.title.iconClass = 'fa fa-link';\n        this.title.closable = true;\n        this.node.tabIndex = 0;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.update();\n        this.model.onChanged(() => this.update());\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.node.focus();\n    }\n\n    protected render(): React.ReactNode {\n        const tasks = this.model.getTasks();\n        if (tasks.length === 0) {\n            return <React.Fragment>{this.renderPlaceholder()}</React.Fragment>;\n        }\n        return <React.Fragment>{this.renderPreviewsContents()}</React.Fragment>;\n    }\n\n    protected renderPlaceholder(): React.ReactNode {\n        return <div className='container placeholder'>No Che tasks with a preview URL are running</div>;\n    }\n\n    protected renderPreviewsContents(): React.ReactNode {\n        return <div className='container'>{this.renderURLs()}</div>;\n    }\n\n    protected renderURLs(): React.ReactNode[] {\n        return this.model.getTasks().map((task, idx) =>\n            <div key={task.label + idx} className='url-container'>\n                <span key='link' className='link'>{task.previewUrl!}</span>\n                <span key='label' className='label'>{task.label}</span>\n                <div key='actions' className='actions-container'>\n                    {this.renderActions(task)}\n                </div>\n            </div>);\n    }\n\n    protected renderActions(task: CheTaskConfiguration): React.ReactNode[] {\n        return [\n            <button key='preview-url' className='theia-button' onClick={() => this.model.previewURL(task)}>Preview</button>,\n            <button key='goto-url' className='theia-button' onClick={() => this.model.goToURL(task)}>Go To</button>\n        ];\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {inject, injectable} from 'inversify';\nimport WorkspaceClient, {IRemoteAPI, IBackend} from '@eclipse-che/workspace-client';\nimport { EnvVariablesServer, EnvVariable } from '@theia/core/lib/common/env-variables';\n\n@injectable()\nexport class CheWorkspaceClientService {\n\n    private cheApi: Promise<string>;\n    private _backend: IBackend;\n\n    constructor(@inject(EnvVariablesServer) protected readonly baseEnvVariablesServer: EnvVariablesServer) {\n        this.cheApi = this.baseEnvVariablesServer.getValue('CHE_API_EXTERNAL').then((cheApiEnv: EnvVariable | undefined) => {\n            if (cheApiEnv && cheApiEnv.value) {\n                return Promise.resolve(cheApiEnv.value);\n            }\n            return Promise.reject('Failed to get Eclipse CHE api endPoint');\n        });\n        this._backend = WorkspaceClient.getRestBackend();\n    }\n\n    async restClient(): Promise<IRemoteAPI> {\n        const config = {\n            baseUrl: await this.cheApi\n        };\n        return WorkspaceClient.getRestApi(config);\n    }\n\n    get backend(): IBackend {\n        return this._backend;\n    }\n}\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLQoKICAgIENvcHlyaWdodCAoYykgMjAxMi0yMDE4IFJlZCBIYXQsIEluYy4KICAgIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHMKICAgIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjIuMAogICAgd2hpY2ggaXMgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuZWNsaXBzZS5vcmcvbGVnYWwvZXBsLTIuMC5odG1sCiAgICBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogRVBMLTIuMAogICAgQ29udHJpYnV0b3JzOgogICAgICBSZWQgSGF0LCBJbmMuIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uCgotLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJzaW1wbGVGb2xkZXIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgogICAgIHdpZHRoPSIxMHB4IiBoZWlnaHQ9IjEwcHgiIHZpZXdCb3g9IjcgNyAxOCAxOCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iX3gzMF80Ij4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjRTBCOTFEIiBkPSJNOSw5LjIzMmMxLjc5NSwwLDIuOTc2LDAsNC43NzEsMGMwLjU1LDAsMC43ODYsMC40OTMsMSwxICAgbDAuNjE1LDEuNDYxSDIzYzAuNTUxLDAsMSwwLjQ1MSwxLDF2OS4wNzZjMCwwLjU1LTAuNDUsMS0xLDFIOWMtMC41NSwwLTEtMC40NS0xLTFWMTAuMjMyQzgsOS42ODIsOC40NSw5LjIzMiw5LDkuMjMyeiIvPgo8L2c+Cjwvc3ZnPgo=\"","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { ContainerModule, Container, interfaces } from 'inversify';\nimport { WidgetFactory, WebSocketConnectionProvider, KeybindingContext } from '@theia/core/lib/browser';\nimport { TerminalQuickOpenService } from './contribution/terminal-quick-open';\nimport { RemoteTerminalWidgetOptions, REMOTE_TERMINAL_WIDGET_FACTORY_ID } from './terminal-widget/remote-terminal-widget';\nimport { RemoteWebSocketConnectionProvider } from './server-definition/remote-connection';\nimport { TerminalProxyCreator, TerminalProxyCreatorProvider, TerminalApiEndPointProvider } from './server-definition/terminal-proxy-creator';\n\nimport '../../src/browser/terminal-widget/terminal.css';\nimport 'xterm/lib/xterm.css';\nimport { cheWorkspaceServicePath, CHEWorkspaceService } from '../common/workspace-service';\nimport {ExecTerminalFrontendContribution} from './contribution/exec-terminal-contribution';\nimport {TerminalFrontendContribution} from '@theia/terminal/lib/browser/terminal-frontend-contribution';\nimport { TerminalService } from '@theia/terminal/lib/browser/base/terminal-service';\nimport { TerminalWidget, TerminalWidgetOptions } from '@theia/terminal/lib/browser/base/terminal-widget';\nimport { RemoteTerminalWidget } from './terminal-widget/remote-terminal-widget';\nimport { RemoteTerminaActiveKeybingContext } from './contribution/keybinding-context';\nimport { RemoteTerminalServerProxy, RemoteTerminalServer } from './server-definition/base-terminal-protocol';\n\nexport default new ContainerModule((bind: interfaces.Bind, unbind: interfaces.Unbind, isBound: interfaces.IsBound, rebind: interfaces.Rebind)  => {\n    bind(KeybindingContext).to(RemoteTerminaActiveKeybingContext).inSingletonScope();\n\n    bind(RemoteTerminalWidget).toSelf();\n\n    bind(TerminalQuickOpenService).toSelf().inSingletonScope();\n\n    bind(ExecTerminalFrontendContribution).toSelf().inSingletonScope();\n\n    rebind(TerminalFrontendContribution).toService(ExecTerminalFrontendContribution);\n\n    bind(RemoteWebSocketConnectionProvider).toSelf();\n    bind(TerminalProxyCreator).toSelf().inSingletonScope();\n\n    bind(RemoteTerminalServer).toService(RemoteTerminalServerProxy);\n\n    let terminalNum = 0;\n    bind(WidgetFactory).toDynamicValue(ctx => ({\n        id: REMOTE_TERMINAL_WIDGET_FACTORY_ID,\n        createWidget: (options: RemoteTerminalWidgetOptions) => {\n            const child = new Container({ defaultScope: 'Singleton' });\n            child.parent = ctx.container;\n            const counter = terminalNum++;\n            const domId = options.id || 'terminal-' + counter;\n\n            const widgetOptions: RemoteTerminalWidgetOptions = {\n                title: options.machineName + ' terminal ' + counter,\n                useServerTitle: true,\n                destroyTermOnClose: true,\n                ...options\n            };\n            child.bind(TerminalWidgetOptions).toConstantValue(widgetOptions);\n            child.bind(RemoteTerminalWidgetOptions).toConstantValue(widgetOptions);\n            child.bind('terminal-dom-id').toConstantValue(domId);\n\n            return child.get(RemoteTerminalWidget);\n        }\n    }));\n\n    bind(CHEWorkspaceService).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<CHEWorkspaceService>(cheWorkspaceServicePath);\n    }).inSingletonScope();\n\n    bind<TerminalApiEndPointProvider>('TerminalApiEndPointProvider').toProvider<string>((context) => {\n        return () => {\n            return new Promise<string>((resolve, reject) => {\n                const workspaceService = context.container.get<CHEWorkspaceService>(CHEWorkspaceService);\n\n                workspaceService.findTerminalServer().then(server => {\n                    if (server) {\n                        bind(TerminalWidget).to(RemoteTerminalWidget).inTransientScope();\n                        rebind(TerminalService).toService(TerminalQuickOpenService);\n\n                        return resolve(server.url);\n                    }\n                    return resolve(undefined);\n                }).catch(err => {\n                    console.error('Failed to get remote terminal server api end point url. Cause: ', err);\n                    resolve(undefined);\n                });\n            });\n        };\n    });\n\n    bind<TerminalProxyCreatorProvider>('TerminalProxyCreatorProvider').toProvider<TerminalProxyCreator>((context) => {\n        return () => {\n            return new Promise<TerminalProxyCreator>((resolve, reject) => {\n                const provider = context.container.get<TerminalApiEndPointProvider>('TerminalApiEndPointProvider');\n                provider().then(url => {\n                    if (url) {\n                        context.container.bind('term-api-end-point').toConstantValue(url);\n                        return resolve(context.container.get(TerminalProxyCreator));\n                    }\n                    return reject('Unabel to find che-machine-exec server.');\n                }).catch(err => {\n                    console.log('Failed get terminal proxy. Cause: ', err);\n                    return reject(err);\n                });\n            });\n        };\n    });\n});\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema\n} from '@theia/core/lib/browser/preferences';\n\nexport const CheTaskConfigSchema: PreferenceSchema = {\n    'type': 'object',\n    'properties': {\n        'che.task.preview.notifications': {\n            'type': 'string',\n            'enum': [\n                'on',\n                'alwaysPreview',\n                'alwaysGoTo',\n                'off'\n            ],\n            'default': 'on',\n            'description': \"Enable/disable the notifications with a proposal to open a Che task's preview URL. Can be: 'on', 'alwaysPreview', 'alwaysGoTo' or 'off'.\"\n        }\n    }\n};\n\nexport interface CheTaskConfiguration {\n    'che.task.preview.notifications': 'on' | 'alwaysPreview' | 'alwaysGoTo' | 'off'\n}\n\nexport const CheTaskPreferences = Symbol('CheTaskPreferences');\nexport type CheTaskPreferences = PreferenceProxy<CheTaskConfiguration>;\n\nexport function createCheTaskPreferences(preferences: PreferenceService): CheTaskPreferences {\n    return createPreferenceProxy(preferences, CheTaskConfigSchema);\n}\n\nexport function bindCheTaskPreferences(bind: interfaces.Bind): void {\n    bind(CheTaskPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createCheTaskPreferences(preferences);\n    });\n    bind(PreferenceContribution).toConstantValue({ schema: CheTaskConfigSchema });\n}\n","var escape = require(\"../../../../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * Copyright (c) 2012-2018 Red Hat, Inc.\\n * This program and the accompanying materials\\n * are made available under the terms of the Eclipse Public License v2.0\\n * which is available at http://www.eclipse.org/legal/epl-2.0.html\\n *\\n * SPDX-License-Identifier: EPL-2.0\\n *\\n * Contributors:\\n *   Red Hat, Inc. - initial API and implementation\\n */\\n \\n.java-libraries-icon {\\n    background-repeat: no-repeat;\\n    overflow: hidden;\\n    min-width: 10px;\\n    height: 10px;\\n    margin-right: 4px;\\n}\\n\\n.java-class-icon {\\n    background-image: url(\" + escape(require(\"./icons/class.svg\")) + \") !important;\\n}\\n\\n.java-externalLibraries-icon {\\n    background-image: url(\" + escape(require(\"./icons/externalLibraries.svg\")) + \");\\n}\\n\\n.java-file-icon {\\n    background-image: url(\" + escape(require(\"./icons/file.svg\")) + \");\\n}\\n\\n.java-folder-icon {\\n    background-image: url(\" + escape(require(\"./icons/folder.svg\")) + \");\\n}\\n\\n.java-jar-icon {\\n    background-image: url(\" + escape(require(\"./icons/jar.svg\")) + \");\\n}\\n\\n.java-package-icon {\\n    background-image: url(\" + escape(require(\"./icons/package.svg\")) + \");\\n}\\n\\n.java-enum-icon {\\n    background-image: url(\" + escape(require(\"./icons/enum.svg\")) + \") !important;\\n}\\n\\n.java-interface-icon {\\n    background-image: url(\" + escape(require(\"./icons/interface.svg\")) + \") !important;\\n}\\n\\n.java-method-icon {\\n    background-image: url(\" + escape(require(\"./icons/method.svg\")) + \") !important;\\n}\\n\\n.java-field-icon {\\n    background-image: url(\" + escape(require(\"./icons/field.svg\")) + \") !important;\\n}\", \"\"]);\n\n// exports\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { VariableContribution, VariableRegistry } from '@theia/variable-resolver/lib/browser';\nimport { CheWorkspaceClientService } from '../../common/che-workspace-client-service';\n\n/**\n * Contributes the substitution variables, in form of `server.<name>`,\n * which are resolved to the URL of the server of Che machines.\n */\n@injectable()\nexport class ServerVariablesContribution implements VariableContribution {\n\n    @inject(CheWorkspaceClientService)\n    protected readonly cheWsClient: CheWorkspaceClientService;\n\n    async registerVariables(variables: VariableRegistry): Promise<void> {\n        const machines = await this.cheWsClient.getMachines();\n        for (const machineName in machines) {\n            if (!machines.hasOwnProperty(machineName)) {\n                continue;\n            }\n            const servers = machines[machineName].servers;\n            for (const serverName in servers) {\n                if (!servers.hasOwnProperty(serverName)) {\n                    continue;\n                }\n                const url = servers[serverName].url;\n                variables.registerVariable({\n                    name: `server.${serverName}`,\n                    description: url,\n                    resolve: () => url\n                });\n            }\n        }\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { MessageService } from '@theia/core';\nimport { QuickOpenOptions, QuickOpenMode } from '@theia/core/lib/browser';\nimport { QuickOpenService, QuickOpenModel, QuickOpenItem } from '@theia/core/lib/browser/quick-open/';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport { ClipboardService } from './clipboard-service';\nimport { SshKeyServer, SshKeyPair } from '../common/ssh-protocol';\n\nexport interface CheService {\n    name: string,\n    displayName: string,\n    description: string\n}\n\n@injectable()\nexport class SshQuickOpenService {\n\n    /**\n     * Known Che services which can use the SSH key pairs.\n     */\n    protected readonly services: CheService[];\n    protected readonly downloadAction = 'Download';\n\n    constructor(\n        @inject(QuickOpenService) protected readonly quickOpenService: QuickOpenService,\n        @inject(SshKeyServer) protected readonly sshKeyServer: SshKeyServer,\n        @inject(MessageService) protected readonly messageService: MessageService,\n        @inject(ClipboardService) protected readonly clipboardService: ClipboardService,\n        @inject(WindowService) protected readonly windowService: WindowService\n    ) {\n        this.services = [\n            { name: 'vcs', displayName: 'VCS', description: 'SSH keys used by Che VCS plugins' },\n            { name: 'machine', displayName: 'Workspace Containers', description: 'SSH keys injected into all Workspace Containers' }\n        ];\n    }\n\n    generateKeyPair(): void {\n        const executeFn = async (service: string, name: string) => {\n            try {\n                const keyPair = await this.sshKeyServer.generate(service, name);\n                if (service === 'machine' && keyPair.privateKey) {\n                    const action = await this.messageService.info('Do you want to download generated private key?', this.downloadAction);\n                    if (action === this.downloadAction) {\n                        this.windowService.openNewWindow(`data:application/x-pem-key,${encodeURIComponent(keyPair.privateKey)}`);\n                    }\n                }\n            } catch (error) {\n                this.logError(error);\n            }\n        };\n\n        this.chooseServiceAndName('Pick a Che service to generate SSH key pair for', executeFn);\n    }\n\n    createKeyPair(): void {\n        const executeFn = (service: string, name: string) => {\n            const __this = this;\n            const quickOpenModel: QuickOpenModel = {\n                onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                    const items: QuickOpenItem[] = [];\n\n                    if (lookFor === undefined || lookFor.length === 0) {\n                        items.push(new ProvidePublicKeyItem());\n                    } else {\n                        const execute = async (item: ProvidePublicKeyItem) => {\n                            try {\n                                await __this.sshKeyServer.create({ service, name, publicKey: lookFor });\n                            } catch (error) {\n                                __this.logError(error);\n                            }\n                        };\n                        items.push(new ProvidePublicKeyItem(execute));\n                    }\n                    acceptor(items);\n                }\n            };\n            this.quickOpenService.open(quickOpenModel, this.getOptions('public key', false));\n        };\n        this.chooseServiceAndName('Pick a Che service to upload the public key for', executeFn, false);\n    }\n\n    async copyPublicKey(): Promise<void> {\n        let keyPairs: SshKeyPair[];\n        try {\n            keyPairs = await this.fetchAllKeyPairs();\n        } catch (error) {\n            this.logError(error);\n            return;\n        }\n\n        if (keyPairs.length === 0) {\n            this.messageService.info('There are no SSH keys to copy');\n            return;\n        }\n\n        const executeFn = (item: SshKeyPairItem) => {\n            const chosenKeyPair = item.getKeyPair();\n            const publicKey = chosenKeyPair.publicKey;\n            if (publicKey && publicKey.length) {\n                this.clipboardService.copy(publicKey);\n            } else {\n                this.messageService.info(`Key pair ${chosenKeyPair.name} doesn't contain a public key`);\n            }\n        };\n\n        const items = keyPairs.map(keyPair => new SshKeyPairItem(keyPair, executeFn));\n        this.open(items, 'Choose key pair to copy its public key to clipboard');\n    }\n\n    async deleteKeyPair(): Promise<void> {\n        let keyPairs: SshKeyPair[];\n        try {\n            keyPairs = await this.fetchAllKeyPairs();\n        } catch (error) {\n            this.logError(error);\n            return;\n        }\n\n        if (keyPairs.length === 0) {\n            this.messageService.info('There are no SSH key pairs to delete');\n            return;\n        }\n\n        const executeFn = async (item: SshKeyPairItem) => {\n            try {\n                const chosenKeyPair = item.getKeyPair();\n                await this.sshKeyServer.delete(chosenKeyPair.service, chosenKeyPair.name);\n            } catch (error) {\n                this.logError(error);\n            }\n        };\n\n        const items = keyPairs.map(keyPair => new SshKeyPairItem(keyPair, executeFn));\n        this.open(items, 'Choose key pair to delete');\n    }\n\n    /**\n     * Propose user to pick a Che service and enter a key pair name.\n     *\n     * @param placeholder placeholder text\n     * @param execFunc function to call when user enters a key pair name\n     * @param canClose whether quick open service should be closed after entering a key pair name\n     */\n    protected chooseServiceAndName(\n        placeholder: string,\n        execFunc: (service: string, name: string) => void,\n        canClose: boolean = true): void {\n\n        const executeFn = (chosenServiceItem: SshServiceItem) => {\n            const quickOpenModel: QuickOpenModel = {\n                onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                    const quickOpenItems: QuickOpenItem[] = [];\n                    const description = chosenServiceItem.getService().name === 'vcs' ? 'e.g. github.com' : undefined;\n\n                    if (lookFor === undefined || lookFor.length === 0) {\n                        quickOpenItems.push(new ProvideKeyNameItem(description, () => { }, () => false));\n                    } else {\n                        const execute = (item: ProvideKeyNameItem) => execFunc(chosenServiceItem.getService().name, lookFor);\n                        quickOpenItems.push(new ProvideKeyNameItem(description, execute, () => canClose));\n                    }\n                    acceptor(quickOpenItems);\n                }\n            };\n            this.quickOpenService.open(quickOpenModel, this.getOptions(`Key pair name for ${chosenServiceItem.getLabel()}`, false));\n        };\n\n        const items = this.services.map(service => new SshServiceItem(service, executeFn));\n        this.open(items, placeholder);\n    }\n\n    protected async fetchAllKeyPairs(): Promise<SshKeyPair[]> {\n        const promises = this.services.map(service => this.sshKeyServer.getAll(service.name));\n        const promiseResults = await Promise.all(promises);\n        const keyPairs = promiseResults.reduce((prev, current) => prev.concat(current));\n        return keyPairs;\n    }\n\n    open(items: QuickOpenItem | QuickOpenItem[], placeholder: string): void {\n        this.quickOpenService.open(this.getModel(Array.isArray(items) ? items : [items]), this.getOptions(placeholder));\n    }\n\n    protected getModel(items: QuickOpenItem | QuickOpenItem[]): QuickOpenModel {\n        return {\n            onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n                acceptor(Array.isArray(items) ? items : [items]);\n            }\n        };\n    }\n\n    protected getOptions(placeholder: string, fuzzyMatchLabel: boolean = true): QuickOpenOptions {\n        return QuickOpenOptions.resolve({\n            placeholder,\n            fuzzyMatchLabel,\n            fuzzySort: false\n        });\n    }\n\n    protected logError(error: any): void {\n        const message = error instanceof Error ? error.message : error;\n        this.messageService.error(message);\n    }\n}\n\n/**\n * Item represents a Che service which can use the SSH key pairs.\n */\nexport class SshServiceItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly service: CheService,\n        protected readonly execute: (item: SshServiceItem) => void\n    ) {\n        super({\n            label: `${service.displayName}`,\n            detail: `${service.description}`\n        });\n    }\n\n    getService(): CheService {\n        return this.service;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.execute(this);\n        return false;\n    }\n}\n\n/**\n * Item wraps SSH key pair.\n */\nexport class SshKeyPairItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly keyPair: SshKeyPair,\n        protected readonly execute: (item: SshKeyPairItem) => void\n    ) {\n        super({\n            label: `${keyPair.name}`,\n            description: `${keyPair.service}`\n        });\n    }\n\n    getKeyPair(): SshKeyPair {\n        return this.keyPair;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.execute(this);\n        return true;\n    }\n}\n\n/**\n * Placeholder item for providing a key pair name.\n */\nexport class ProvideKeyNameItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly description: string | undefined,\n        protected readonly execute: (item: ProvideKeyNameItem) => void = () => { },\n        private readonly canClose: (mode: QuickOpenMode) => boolean = mode => true\n    ) {\n        super({\n            label: \"Please provide a key pair name (Press 'Enter' to confirm or 'Escape' to cancel)\",\n            description: description\n        });\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.execute(this);\n        return this.canClose(mode);\n    }\n}\n\n/**\n * Placeholder item for providing a public key.\n */\nexport class ProvidePublicKeyItem extends QuickOpenItem {\n    constructor(\n        protected readonly execute: (item: ProvidePublicKeyItem) => void = () => { }\n    ) {\n        super({ label: 'Please provide a public key' });\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        this.execute(this);\n        return true;\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { IMachine, IServer } from '@eclipse-che/workspace-client';\n\nexport const cheWorkspaceServicePath = '/services/che-workspace-service';\n\nexport const CHEWorkspaceService = Symbol('CHEWorkspaceService');\nexport interface CHEWorkspaceService {\n\n    getMachineList(): Promise<{ [attrName: string]: IMachine }>;\n\n    findTerminalServer(): Promise<IServer | undefined>;\n\n    findEditorMachineName(): Promise<string | undefined>\n\n    getWorkspaceId(): Promise<string | undefined>;\n\n    getWsMasterApiEndPoint(): Promise<string | undefined>;\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { WidgetManager, ApplicationShell } from '@theia/core/lib/browser';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport { MiniBrowserProps, MiniBrowser } from '@theia/mini-browser/lib/browser/mini-browser';\nimport { VariableResolverService } from '@theia/variable-resolver/lib/browser';\nimport { CheTaskConfiguration } from '../../common/task-protocol';\n\n@injectable()\nexport class PreviewUrlOpenService {\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(VariableResolverService)\n    protected readonly varResolver: VariableResolverService;\n\n    @inject(WindowService)\n    protected readonly windowService: WindowService;\n\n    /**\n     * Open the given task's preview URL.\n     * @param task a Che task to open its preview URL\n     * @param externally if `true` a URL will opened in a separate browser's tab. Otherwise - into an embedded mini-browsers.\n     */\n    async preview(task: CheTaskConfiguration, externally?: boolean): Promise<void> {\n        const previewURL = task.previewUrl;\n        if (!previewURL || this.preview.length === 0) {\n            return;\n        }\n        if (externally) {\n            this.previewExternally(previewURL);\n        } else {\n            this.previewInternally(previewURL, task.label);\n        }\n    }\n\n    /**\n     * Open the given URL to preview it in a separate browser's tab.\n     * Method also tries to resolve the variables in the given URL.\n     * @param previewURL a URL to go to\n     */\n    protected async previewExternally(previewURL: string): Promise<void> {\n        const url = await this.varResolver.resolve(previewURL);\n        this.windowService.openNewWindow(url);\n    }\n\n    /**\n     * Open the given URL to preview it in the embedded mini-browser.\n     * Method also tries to resolve the variables in the given URL.\n     * @param previewURL a URL to preview\n     * @param label short description of the given URL. Usually, the related task's label\n     */\n    protected async previewInternally(previewURL: string, label: string): Promise<void> {\n        const url = await this.varResolver.resolve(previewURL);\n        const widget = await this.widgetManager.getOrCreateWidget(\n            MiniBrowser.Factory.ID,\n            <MiniBrowserProps>{\n                startPage: url,\n                name: `Preview - ${label}`\n            }\n        );\n        this.shell.addWidget(widget, { area: 'right' });\n        this.shell.activateWidget(widget.id);\n    }\n}\n","/*********************************************************************\n * Copyright (c) 2018 Red Hat, Inc.\n *\n * This program and the accompanying materials are made\n * available under the terms of the Eclipse Public License 2.0\n * which is available at https://www.eclipse.org/legal/epl-2.0/\n *\n * SPDX-License-Identifier: EPL-2.0\n **********************************************************************/\n\nimport {injectable, inject} from 'inversify';\nimport {DisposableCollection} from '@theia/core';\nimport {AbstractViewContribution} from '@theia/core/lib/browser/shell/view-contribution';\nimport {CheWorkspaceMachinesService, IWorkspaceMachine} from './che-workspace-machines-service';\nimport {MachinesViewService} from './machines-view-service';\nimport {MachinesSymbolInformationNode, MachinesViewWidget} from './machines-view-widget';\n\ninterface NodeAndSymbol {\n    node: MachinesSymbolInformationNode;\n    symbol: SymbolInformation;\n}\n\ninterface SymbolInformation {\n    name: string;\n    id: string;\n    parentId: string | undefined;\n    kind?: SymbolKind | undefined;\n}\n\nexport const MACHINES_NAVIGATOR_ID = 'machines-view';\n\nconst enum SymbolKind {\n    Empty = 1,\n    Machine,\n    Terminal\n}\nconst EMPTY_CLASS = 'fa fa-times-circle';\nconst MACHINE_CLASS = 'fa fa-circle';\nconst TERMINAL_CLASS = 'fa fa-terminal';\n\n@injectable()\nexport class MachinesViewContribution extends AbstractViewContribution<MachinesViewWidget> {\n\n    protected ids: string[] = [];\n    protected symbolList: NodeAndSymbol[] = [];\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(@inject(MachinesViewService) protected readonly machineViewService: MachinesViewService,\n                @inject(CheWorkspaceMachinesService) private readonly cheMachines: CheWorkspaceMachinesService) {\n        super({\n            widgetId: MACHINES_NAVIGATOR_ID,\n            widgetName: 'Machines',\n            defaultWidgetOptions: {\n                area: 'right',\n                rank: 500\n            },\n            toggleCommandId: 'machines:toggle',\n            toggleKeybinding: 'ctrlcmd+shift+n'\n        });\n    }\n\n    protected onStart(): void {\n        this.updateMachines();\n        this.machineViewService.onDidChangeOpenState(async isOpen => {\n            if (isOpen) {\n                this.updateMachines();\n            }\n        });\n        this.machineViewService.onDidSelect(async node => {\n            // TODO: Add terminal's call if it terminal node.\n        });\n    }\n\n    protected async updateMachines(): Promise<void> {\n        await this.cheMachines.updateMachines();\n        this.publish(this.cheMachines.machines);\n    }\n\n    protected publish(machines: Array<IWorkspaceMachine>): void {\n        this.ids.length = 0;\n        this.symbolList.length = 0;\n\n        const entries: Array<SymbolInformation> = [];\n\n        machines.forEach(machine => {\n            const machineEntry = {\n                name: machine.machineName || '',\n                id: this.getRandId(machine.machineName || ''),\n                parentId: undefined,\n                kind: machine.status ? SymbolKind.Machine : SymbolKind.Empty\n            };\n            entries.push(machineEntry);\n\n            const status = machine.status;\n            if (status) {\n                entries.push({\n                    name: status,\n                    id: this.getRandId(machine.machineName || '', 'status'),\n                    parentId: machineEntry.id\n                });\n            }\n\n            const servers = machine.servers;\n            if (servers) {\n                const serversEntryName = 'servers';\n                const serversEntry = {\n                    name: serversEntryName,\n                    id: this.getRandId(serversEntryName),\n                    parentId: machineEntry.id\n                };\n                entries.push(serversEntry);\n                Object.keys(servers).forEach((serverName: string) => {\n                    const entryName = servers[serverName].url ? servers[serverName].url : servers[serverName].port;\n                    if (!entryName) {\n                        return;\n                    }\n                    const serverEntry = {\n                        name: entryName.toString(),\n                        id: this.getRandId(serverName),\n                        parentId: serversEntry.id\n                    };\n                    entries.push(serverEntry);\n                    entries.push({\n                        name: `name: ${serverName}`,\n                        id: this.getRandId(serverName, 'name'),\n                        parentId: serverEntry.id\n                    });\n                });\n            }\n            /*\n             // TODO: Add terminal's call if it terminal node.\n             const terminalEntryName = 'terminal';\n             entries.push({\n             name: terminalEntryName,\n             id: this.getRandId(terminalEntryName),\n             parentId: machineEntry.id,\n             kind: SymbolKind.Terminal\n             });\n             */\n        });\n\n        this.machineViewService.publish(this.createTree(undefined, entries));\n    }\n\n    protected createTree(parentNode: NodeAndSymbol | undefined, symbolInformationList: Array<SymbolInformation>): MachinesSymbolInformationNode[] {\n        const childNodes: NodeAndSymbol[] =\n            symbolInformationList\n                .filter(s => (!parentNode && !s.parentId) || (parentNode && parentNode.symbol.id === s.parentId))\n                .map(sym => this.convertToNode(sym, parentNode));\n        childNodes.forEach(childNode => {\n            const nodeSymbol = symbolInformationList.filter(s => childNode.symbol.id !== s.id);\n            childNode.node.children = this.createTree(childNode, nodeSymbol);\n        });\n        return childNodes.map(n => n.node);\n    }\n\n    protected convertToNode(symbol: SymbolInformation, parent: NodeAndSymbol | undefined): NodeAndSymbol {\n        const iconClass = this.getClass(symbol.kind) || '';\n        const node: MachinesSymbolInformationNode = {\n            children: [],\n            id: symbol.id,\n            iconClass,\n            name: symbol.name,\n            parent: parent ? parent.node : undefined,\n            selected: false,\n            expanded: false\n        };\n        const symbolAndNode = {node, symbol};\n        this.symbolList.push(symbolAndNode);\n        return symbolAndNode;\n    }\n\n    private getRandId(nodeName: string, key?: string): string {\n        let uniqueId: string = '';\n        const name = key ? `${nodeName}_${key}` : nodeName;\n        for (let counter = 0; counter < 100; counter++) {\n            uniqueId = `${name}_id_${('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4)}`;\n            if (this.ids.findIndex(id => id === uniqueId) === -1) {\n                break;\n            }\n        }\n        this.ids.push(uniqueId);\n        return uniqueId;\n    }\n\n    private getClass(symbolKind: SymbolKind | undefined): string | undefined {\n        switch (symbolKind) {\n            case SymbolKind.Empty:\n                return EMPTY_CLASS;\n            case SymbolKind.Machine:\n                return MACHINE_CLASS;\n            case SymbolKind.Terminal:\n                return TERMINAL_CLASS;\n        }\n        return undefined;\n    }\n}\n"],"sourceRoot":""}