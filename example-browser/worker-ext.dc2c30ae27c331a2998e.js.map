{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/quick-open.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/is.js","webpack:////home/dfestal/git/theia/node_modules/timers-browserify/main.js","webpack:////home/dfestal/git/theia/packages/core/src/common/os.ts","webpack:////home/dfestal/git/theia/node_modules/ieee754/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/types-impl.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/on-type-formatting.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-uri/lib/esm/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/message-registry.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/hosted/browser/worker/worker-main.ts","webpack:////home/dfestal/git/theia/packages/core/src/common/path.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/env.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/object-identifier.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/signature.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/documents.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/range-formatting.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/text-editor.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/status-bar/vscolor-const.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/markdown-string.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/id-generator.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/document-formatting.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/prefix-sum-computer.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/definition.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/plugin-manager.ts","webpack:////home/dfestal/git/theia/node_modules/process/browser.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/output-channel/output-channel-item.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/completion.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/status-bar/status-bar-item.ts","webpack:////home/dfestal/git/theia/node_modules/buffer/index.js","webpack:////home/dfestal/git/theia/node_modules/os-browserify/browser.js","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/status-bar-message-registry.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/disposable-util.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/errors.ts","webpack:////home/dfestal/git/theia/node_modules/lodash.clonedeep/index.js","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/text-editors.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/api/rpc-protocol.ts","webpack:////home/dfestal/git/theia/node_modules/isarray/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/paths.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-uri/lib/umd/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/word-helper.ts","webpack:////home/dfestal/git/theia/packages/core/src/common/promise-util.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/preference-registry.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages.ts","webpack:////home/dfestal/git/theia/packages/core/src/common/disposable.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/plugin-context.ts","webpack:///(webpack)/buildin/module.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/plugin-protocol.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/editors-and-documents.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/code-action.ts","webpack:////home/dfestal/git/theia/node_modules/base64-js/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/document-data.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/terminal-ext.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/events.js","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/messages.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/glob.ts","webpack:///(webpack)/buildin/global.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/dialogs.ts","webpack:////home/dfestal/git/theia/node_modules/setimmediate/setImmediate.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/token-provider.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/output-channel-registry.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/api/plugin-api.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/diagnostics.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/paths-util.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/lens.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/api/async-util.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/workspace.ts","webpack:////home/dfestal/git/theia/node_modules/path-browserify/index.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/editor-options.ts","webpack:////home/dfestal/git/theia/packages/core/src/common/event.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/tree/tree-views.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/strings.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/assert.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/link-provider.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:////home/dfestal/git/theia/packages/core/src/common/cancellation.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/languages/hover.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/common/types.ts","webpack:////home/dfestal/git/theia/node_modules/vscode-jsonrpc/lib/main.js","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/command-registry.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/window-state.ts","webpack:////home/dfestal/git/theia/packages/plugin-ext/src/plugin/type-converters.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","plugin_api_1","cancellation_1","async_util_1","async_util_2","QuickOpenExtImpl","rpc","this","proxy","getProxy","PLUGIN_RPC_CONTEXT","QUICK_OPEN_MAIN","$onItemSelected","handle","selectItemHandler","$validateInput","input","validateInputHandler","Promise","resolve","showQuickPick","promiseOrItems","options","token","_this","CancellationToken","None","undefined","itemPromise","widgetPromise","$show","canSelectMany","canPickMany","placeHolder","autoFocus","autoFocusFirstEntry","matchOnDescription","machOnDescription","matchOnDetail","machOnDetail","ignoreFocusLost","ignoreFocusOut","promise","anyPromise","then","values","items","pickItems","length","item","label","description","detail","picked","push","onDidSelectItem","$setItems","Array","isArray","map","h","err","$setError","reject","hookCancellationToken","showInput","validateInput","$input","toString","string","array","boolean","number","error","func","stringArray","every","elem","global","scope","self","window","apply","Function","Timeout","id","clearFn","_id","_clearFn","setTimeout","arguments","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","setImmediate","clearImmediate","is","userAgent","platform","navigator","indexOf","process","isWindows","isOSX","cmd","command","args","_i","__spread","OS","Type","type","Windows","OSX","Linux","read","buffer","offset","isLE","mLen","nBytes","e","eLen","eMax","eBias","nBits","NaN","Infinity","Math","pow","write","rt","abs","isNaN","floor","log","LN2","errors_1","vscode_uri_1","paths_util_1","strings_1","markdown_string_1","Disposable","disposable","from","disposables","disposables_1","__values","disposables_1_1","next","done","dispose","StatusBarAlignment","TextEditorLineNumbersStyle","ViewColumn","TextEditorSelectionChangeKind","fromValue","Keyboard","Mouse","Command","Position","line","char","Error","_line","_character","isBefore","other","isBeforeOrEqual","isAfter","isAfterOrEqual","isEqual","compareTo","translate","lineDeltaOrChange","characterDelta","illegalArgument","lineDelta","character","with","lineOrChange","Min","positions","result","pop","positions_1","positions_1_1","Max","positions_2","positions_2_1","isPosition","_a","Range","startLineOrStart","startColumnOrEnd","endLine","endColumn","start","end","_start","_end","contains","positionOrRange","intersection","union","startOrChange","isRange","thing","Selection","_super","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","anchor","_anchor","_active","__extends","EndOfLine","SnippetString","_tabstop","isSnippetString","_escape","replace","appendText","appendTabstop","appendPlaceholder","nested","appendVariable","defaultValue","ThemeColor","ThemeIcon","TextEditorRevealType","DecorationRangeBehavior","OverviewRulerLane","ConfigurationTarget","RelativePattern","base","pattern","default","isUri","uri","fsPath","pathToRelative","to","relative","IndentAction","TextEdit","range","newText","_range","_newText","_newEol","isTextEdit","insert","position","delete","setEndOfLine","eol","ret","newEol","CompletionTriggerKind","CompletionItemKind","CompletionItem","kind","DiagnosticSeverity","CompletionList","isIncomplete","DiagnosticRelatedInformation","location","message","Location","rangeOrPosition","DiagnosticTag","Diagnostic","severity","MarkerSeverity","MarkerTag","ParameterInformation","documentation","SignatureInformation","SignatureHelp","Hover","contents","isMarkdownString","DocumentLink","target","isEmpty","CodeLens","CodeActionTrigger","CodeActionKind","append","parts","sep","startsWithIgnoreCase","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","TextDocumentSaveReason","CodeAction","title","WorkspaceEdit","_edits","renameFile","_type","createFile","deleteFile","edit","resource","has","_b","_c","set","edits","edits_1","edits_1_1","element","filter","res","candidate","entries","textEdits","Map","textEdit","forEach","v","_allEntries","toJSON","SymbolKind","TreeItem","TreeItemCollapsibleState","SymbolInformation","rangeOrContainer","locationOrUri","containerName","validate","DocumentSymbol","selectionRange","children","FileChangeType","FileType","Converter","token_provider_1","OnTypeFormattingAdapter","provider","documents","provideOnTypeFormattingEdits","ch","document","getDocumentData","doc","pos","toPosition","createToken","fromTextEdit","__webpack_exports__","extendStatics","setPrototypeOf","__proto__","b","__","constructor","_schemePattern","_singleSlashStart","_doubleSlashStart","_empty","_slash","_regexp","URI","schemeOrData","authority","path","query","fragment","scheme","_referenceResolution","test","_validateUri","_makeFsPath","configurable","change","_URI","parse","match","exec","decodeURIComponent","file","idx","substring","components","skipEncoding","_asFormatted","revive","data","_fsPath","_formatted","external","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","code","charCodeAt","encodeURIComponent","charAt","substr","escaped","encodeURIComponentMinimal","toLowerCase","encoder","userinfo","String","fromCharCode","MessageRegistryExt","MESSAGE_REGISTRY_MAIN","showInformationMessage","optionsOrFirstItem","$showInformationMessage","showWarningMessage","$showWarningMessage","showErrorMessage","$showErrorMessage","event_1","rpc_protocol_1","plugin_manager_1","plugin_context_1","plugin_protocol_1","env_1","preference_registry_1","ctx","pluginsApiImpl","pluginsModulesNames","emitter","Emitter","RPCProtocolImpl","onMessage","event","send","postMessage","initialize","contextPath","pluginMetadata","importScripts","addEventListener","fire","defaultApi","envExt","EnvExtImpl","preferenceRegistryExt","PreferenceRegistryExtImpl","pluginManager","PluginManagerExtImpl","loadPlugin","plugin","isElectron","getPluginId","model","pluginPath","lifecycle","frontendModuleName","console","init","rawPluginData","foreign","rawPluginData_1","rawPluginData_1_1","plg","pluginModel","pluginLifecycle","entryPoint","frontend","frontendInitPath","pluginFolder","source","packagePath","rawModel","apiImpl","apiFactory","backend","createAPIFactory","handler","emptyPlugin","Proxy","MAIN_RPC_CONTEXT","HOSTED_PLUGIN_MANAGER_EXT","PREFERENCE_REGISTRY_EXT","Path","raw","firstIndex","separator","lastIndex","lastIndexOf","isAbsolute","isRoot","isDrive","root","computeRoot","extIndex","ext","segment","endsWith","index","_dir","computeDir","join","paths","relativePath","startsWith","isEqualOrParent","ENV_MAIN","getEnvVariable","envVarName","$getEnvVariable","x","getQueryParameter","queryParamName","queryParameters","getQueryParameters","setQueryParameters","queryParams","ObjectIdentifier","mixin","obj","of","SignatureHelpAdapter","delegate","provideSignatureHelp","documentData","zeroBasedPosition","document_data_1","disposable_1","DocumentsExtImpl","editorsAndDocuments","toDispose","DisposableCollection","_onDidAddDocument","_onDidRemoveDocument","_onDidChangeDocument","_onDidSaveTextDocument","onDidAddDocument","onDidRemoveDocument","onDidChangeDocument","onDidSaveTextDocument","loadingDocuments","DOCUMENTS_MAIN","onDidAddDocuments","documents_1","documents_1_1","document_1","onDidRemoveDocuments","documents_2","documents_2_1","$acceptModelModeChanged","startUrl","oldModeId","newModeId","uriString","getDocument","acceptLanguageId","$acceptModelSaved","strUrl","$acceptDirtyStateChanged","isDirty","acceptIsDirty","contentChanges","$acceptModelChanged","onEvents","changes","toRange","rangeOffset","rangeLength","text","getAllDocumentData","allDocuments","openDocument","cached","loadingDocument","document_2","loadDocument","sent","error_1","$tryOpenDocument","createDocumentData","$tryCreateDocument","setWordDefinitionFor","modeId","wordDefinition","RangeFormattingAdapter","provideDocumentRangeFormattingEdits","ran","types_impl_1","assert_1","TextEditorExt","_selections","_visibleRanges","viewColumn","disposed","_options","TextEditorOptionsExt","_viewColumn","_document","readonly","acceptViewColumn","val","assign","acceptOptions","ok","accept","trySetSelection","selection","fromSelection","runOnProxy","$trySetSelections","some","acceptSelections","selections","acceptVisibleRanges","_acceptViewColumn","callback","undoStopBefore","undoStopAfter","TextEditorEdit","applyEdit","insertSnippet","snippet","ranges","fromRange","fromPosition","startLineNumber","lineNumber","startColumn","column","endLineNumber","location_1","location_1_1","posOrRange","$tryInsertSnippet","setDecorations","decorationType","rangesOrOptions","isDecorationOptionsArr","$trySetDecorations","fromRangeOrRangeWithMessage","len","$trySetDecorationsFast","revealRange","revealType","$tryRevealRange","Default","editData","finalize","editRanges","sort","a","count","rangeEnd","forceMoveMarkers","$tryApplyEdits","documentVersionId","warn","_tabSize","tabSize","_insertSpace","insertSpaces","_cursorStyle","cursorStyle","_lineNumbers","lineNumbers","validateTabSize","warnOnError","$trySetOptions","parseInt","validateInsertSpaces","Boolean","newOptions","configurationUpdate","hasUpdate","version","collectedEdits","addEdit","endOfLine","CRLF","LF","moveMarkers","validatedRange","validateRange","Touch","First","Last","LinkedMap","_map","_head","_tail","_size","clear","touch","previous","addItemLast","addItemFirst","removeItem","shift","callbackfn","thisArg","current","forEachReverse","keys","VS_COLORS","statusBar.foreground","editorOverviewRuler.errorForeground","editorOverviewRuler.warningForeground","editorOverviewRuler.infoForeground","MarkdownString","appendMarkdown","appendCodeblock","language","isTrusted","IdGenerator","prefix","lastId","nextId","DocumentFormattingAdapter","provideDocumentFormattingEdits","MAX_UINT_32","toUint32","PrefixSumIndexOfResult","remainder","PrefixSumComputer","prefixSum","Uint32Array","prefixSumValidIndex","Int32Array","getCount","insertValues","insertIndex","oldValues","oldPrefixSum","insertValuesLen","subarray","changeValue","removeValues","startIndex","cnt","maxCnt","getTotalValue","_getAccumulatedValue","getAccumulatedValue","max","getIndexOf","accumulatedValue","mid","midStop","midStart","low","high","types","DefinitionAdapter","provideDefinition","definition","fromLocation","isLocationArray","locations","definition_1","definition_1_1","isDefinitionLinkArray","definitionLinks","definition_2","definition_2_1","definitionLink","fromDefinitionLink","path_1","disposable_util_1","promise_util_1","ActivatedPlugin","pluginContext","stopFn","host","preferencesManager","registry","activatedPlugins","pluginActivationPromises","$stopPlugin","subscriptions","$init","pluginInit","env","preferences","_d","__read","plugins","foreignPlugins","foreignPlugins_1","foreignPlugins_1_1","plugins_1","plugins_1_1","plugins_2","plugins_2_1","pluginMain","startPlugin","extensionPath","asAbsolutePath","stopMethod","startMethod","pluginExport","getAllPlugins","getPluginExport","pluginId","activePlugin","getPluginById","isRunning","activatePlugin","deferred","Deferred","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","browser","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","OutputChannelImpl","$dispose","$append","appendLine","$clear","show","preserveFocus","$reveal","hide","$close","types_1","CompletionAdapter","cacheId","cache","provideCompletionItems","context","list","completions","incomplete","wordRangeBeforePos","getWordRangeAtPosition","suggestion","convertCompletionItem","resolveCompletionItem","completion","parentId","resolvedItem","newCompletion","releaseCompletionItems","defaultRange","fromCompletionItemKind","filterText","sortText","preselect","insertText","additionalTextEdits","commitCharacters","snippetType","overwriteBefore","overwriteAfter","isSingleLine","hasResolveSupport","vscolor_const_1","StatusBarItemImpl","_proxy","alignment","priority","Left","_alignment","_priority","_text","update","_tooltip","tooltip","_color","color","_command","_isVisible","_timeoutHandle","_messageId","$setMessage","getColor","colorId","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","arg","encodingOrOffset","allocUnsafe","TypeError","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","slice","fromString","isBuffer","checked","copy","isnan","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","swap","bidirectionalIndexOf","arrayIndexOf","arr","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","str","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","base64Slice","fromByteArray","utf8Slice","min","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","y","swap16","swap32","swap64","hexSlice","asciiSlice","latin1Slice","utf16leSlice","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","trim","stringtrim","base64clean","src","dst","endianness","hostname","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","appVersion","networkInterfaces","getNetworkInterfaces","arch","tmpdir","tmpDir","EOL","homedir","events_1","Is","MessageWriter","onClose","onError","AbstractMessageWriter","errorEmitter","closeEmitter","fireError","asError","fireClose","StreamMessageWriter","writable","errorCount","msg","json","JSON","stringify","headers","IPCMessageWriter","sending","eventEmitter","doWriteMessage","SocketMessageWriter","socket","handleError","status_bar_item_1","StatusBarMessageRegistryExt","STATUS_BAR_MESSAGE_REGISTRY_MAIN","setStatusBarMessage","messageId","createStatusBarItem","DefaultSize","CR","MessageBuffer","chunk","toAppend","bufferLen","newSize","ceil","tryReadHeaders","split","header","nextStart","tryReadContent","MessageReader","listen","onPartialMessage","AbstractMessageReader","partialMessageEmitter","firePartialMessage","info","StreamMessageReader","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","contentLength","setPartialMessageTimer","clearPartialMessageTimer","waitingTime","IPCMessageReader","SocketMessageReader","first","rest","what","LARGE_ARRAY_SIZE","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","pair","addSetEntry","add","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","transform","setToArray","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","uid","IE_PROTO","funcToString","objectToString","reIsNative","RegExp","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","splice","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entry","ListCache","MapCache","Stack","__data__","arrayLikeKeys","inherited","isObjectLike","isArrayLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","isIndex","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","initCloneArray","copyArray","tag","getTag","isFunc","cloneBuffer","isPrototype","proto","baseCreate","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","cloneRegExp","cloneSet","symbol","cloneSymbol","initCloneByTag","stacked","props","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","baseIsNative","isMasked","isFunction","arrayBuffer","newValue","getMapData","isKeyable","getValue","hash","pairs","ctorString","isLength","baseKeys","net_1","messageReader_1","messageWriter_1","createClientSocketTransport","port","connectResolve","connected","_reject","server","createServer","onConnected","createServerSocketTransport","createConnection","Converters","id_generator_1","TextEditorsExtImpl","_onDidChangeTextEditorSelection","_onDidChangeTextEditorOptions","_onDidChangeTextEditorVisibleRanges","_onDidChangeTextEditorViewColumn","_onDidChangeActiveTextEditor","_onDidChangeVisibleTextEditors","onDidChangeTextEditorSelection","onDidChangeTextEditorOptions","onDidChangeTextEditorVisibleRanges","onDidChangeTextEditorViewColumn","onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","TEXT_EDITORS_MAIN","$acceptEditorPropertiesChanged","textEditor","getEditor","toSelection","visibleRanges","$acceptEditorPositionData","toViewColumn","getActiveEditor","activeEditor","getVisibleTextEditors","allEditors","createTextEditorDecorationType","TextEditorDecorationType","Keys","$registerTextEditorDecorationType","$removeTextEditorDecorationType","ProxyIdentifier","isMain","createProxyIdentifier","identifier","connection","remoteHostID","isDisposed","locals","proxies","lastMessageId","invokedHandlers","pendingRPCReplies","multiplexor","RPCMultiplexer","receiveOneMessage","proxyId","createProxy","instance","myArgs","remoteCall","methodName","canceled","callId","MessageFactory","request","messageToSendHostId","rawmsg","setHostID","hostID","receiveRequest","receiveReply","receiveReplyErr","invokeHandler","method","replyOK","replyErr","pendingReply","$isError","doInvokeHandler","actor","remoteHostId","sendAccumulatedBound","sendAccumulated","messagesToSend","tmp","req","rpcId","transformErrorForSerialization","stacktrace","os_1","nativeSep","_posixBadPath","_winBadPath","basename","streql","getRoot","pos_1","extname","normalize","toOSPath","wantsBackslash","win","_isNormal","skip","prev_start","prev_part","part","ignoreCase","sepOffset","USUAL_WORD_SEPARATORS","DEFAULT_WORD_REGEXP","allowInWords","createWordRegExp","ensureValidWordDefinition","flags","multiline","getWordAtText","textOffset","word","getWordAtPosSlow","getWordAtPosFast","cloneDeep","lookUp","tree","node","_onDidChangeConfiguration","onDidChangeConfiguration","PREFERENCE_REGISTRY_MAIN","_preferences","$acceptConfigurationChanged","eventData","toConfigurationChangeEvent","getConfiguration","section","extensionId","toReadonlyValue","clonedConfig_1","cloneOnWriteProxy_1","accessor","clonedTarget","cloneTarget","targ","prop","deleteProperty","descr","$updateConfigurationOption","$removeConfigurationOption","readonlyProxy","isExtensible","preventExtensions","reduce","branch","freeze","affectsConfiguration","preferenceName","reverse","prevValue","curValue","umd_1","glob_1","completion_1","diagnostics_1","signature_1","hover_1","document_formatting_1","range_formatting_1","on_type_formatting_1","code_action_1","link_provider_1","lens_1","LanguagesExtImpl","commands","adaptersMap","LANGUAGES_MAIN","diagnostics","Diagnostics","onDidChangeDiagnostics","getLanguages","$getLanguages","setLanguageConfiguration","configuration","wordPattern","nextCallId","config","brackets","comments","onEnterRules","rules","action","beforeText","serializeRegExp","afterText","serializeEnterRules","indentationRules","increaseIndentPattern","decreaseIndentPattern","indentNextLinePattern","unIndentedLinePattern","serializeIndentation","$setLanguageConfiguration","createDisposable","$unregister","addNewAdapter","adapter","withAdapter","ctor","transformDocumentSelector","selector","sel","doTransformDocumentSelector","$serialized","$provideCompletionItems","$resolveCompletionItem","$releaseCompletionItems","registerCompletionItemProvider","triggerCharacters","$registerCompletionSupport","$provideDefinition","registerDefinitionProvider","$registerDefinitionProvider","$provideSignatureHelp","registerSignatureHelpProvider","$registerSignatureHelpProvider","getDiagnostics","createDiagnosticCollection","registerHoverProvider","HoverAdapter","$registerHoverProvider","$provideHover","provideHover","registerDocumentFormattingEditProvider","$registerDocumentFormattingSupport","$provideDocumentFormattingEdits","registerDocumentRangeFormattingEditProvider","$registerRangeFormattingProvider","$provideDocumentRangeFormattingEdits","registerOnTypeFormattingEditProvider","$registerOnTypeFormattingProvider","$provideOnTypeFormattingEdits","$provideDocumentLinks","LinkProviderAdapter","provideLinks","$resolveDocumentLink","link","resolveLink","registerLinkProvider","$registerDocumentLinkProvider","registerCodeActionsProvider","metadata","CodeActionAdapter","$registerQuickFixProvider","providedCodeActionKinds","$provideCodeActions","rangeOrSelection","provideCodeAction","registerCodeLensProvider","CodeLensAdapter","getConverter","eventHandle","onDidChangeCodeLenses","$registerCodeLensSupport","subscription","$emitCodeLensEvent","$provideCodeLenses","provideCodeLenses","$resolveCodeLens","resolveCodeLens","registerReferenceProvider","registerDocumentSymbolProvider","score","candidateUri","candidateLanguage","candidateIsSynchronized","selector_1","selector_1_1","hasAccessToAllModels","NULL","onDisposeEmitter","disposingElements","checkDisposed","originalDispose","toRemove","pushAll","command_registry_1","quick_open_1","message_registry_1","status_bar_message_registry_1","window_state_1","workspace_1","editors_and_documents_1","text_editors_1","editor_options_1","output_channel_registry_1","terminal_ext_1","languages_1","type_converters_1","dialogs_1","tree_views_1","commandRegistry","COMMAND_REGISTRY_EXT","CommandRegistryImpl","quickOpenExt","QUICK_OPEN_EXT","dialogsExt","DialogsExtImpl","messageRegistryExt","windowStateExt","WINDOW_STATE_EXT","WindowStateExtImpl","EDITORS_AND_DOCUMENTS_EXT","EditorsAndDocumentsExtImpl","editors","TEXT_EDITORS_EXT","DOCUMENTS_EXT","workspaceExt","WORKSPACE_EXT","WorkspaceExtImpl","statusBarMessageRegistryExt","terminalExt","TERMINAL_EXT","TerminalServiceExtImpl","outputChannelRegistryExt","OutputChannelRegistryExt","languagesExt","LANGUAGES_EXT","treeViewsExt","TREE_VIEWS_EXT","TreeViewsExtImpl","registerCommand","executeCommand","commandId","registerTextEditorCommand","registerHandler","activeTextEditor","visibleTextEditors","listener","coreEvent","onCancellationRequested","maxListeners","coreCancellationToken","isCancellationRequested","showWorkspaceFolderPick","pickWorkspaceFolder","showOpenDialog","showSaveDialog","showInputBox","createOutputChannel","state","getWindowState","onDidChangeWindowState","createTerminal","nameOrOptions","shellPath","shellArgs","onDidCloseTerminal","registerTreeDataProvider","viewId","treeDataProvider","createTreeView","workspace","workspaceFolders","onDidChangeWorkspaceFolders","textDocuments","onDidChangeTextDocument","onDidCloseTextDocument","onDidOpenTextDocument","thisArgs","openTextDocument","uriOrFileNameOrOptions","createFileSystemWatcher","globPattern","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","findFiles","include","exclude","maxResults","registerTextDocumentContentProvider","registerFileSystemProvider","languages","fromDocumentSelector","languageId","firstTriggerCharacter","moreTriggerCharacters","registerDocumentLinkProvider","all","Plugin","getPlugin","debug","onDidChangeActiveDebugSession","onDidTerminateDebugSession","registerDebugConfigurationProvider","debugType","EventEmitter","CancellationTokenSource","Uri","TextEditorCursorStyle","packageJSON","isActive","pluginType","activate","webpackPolyfill","deprecate","hostedServicePath","PluginScanner","PluginDeployer","PluginDeployerResolver","PluginDeployerDirectoryHandler","PluginDeployerFileHandler","PluginDeployerEntryType","MetadataProcessor","publisher","buildFrontendModuleName","HostedPluginClient","HostedPluginServer","pluginServerJsonRpcPath","PluginServer","ServerPluginRunner","text_editor_1","_onDidAddDocuments","_onDidRemoveDocuments","_onDidChangeActiveTextEditors","$acceptEditorsAndDocumentsDelta","delta","removedDocuments","addedDocuments","removedEditors","_e","_f","_g","_h","DocumentDataExt","lines","versionId","_j","_k","editor","addedEditors","_l","_m","documentUri","editorPosition","newActiveEditor","activeEditorId","_isSelection","allDiagnostics","diagnostic","codeActionContext","only","provideCodeActions","commandsOrActions","commandsOrActions_1","commandsOrActions_1_1","_isCommand","toInternalCommand","convertDiagnosticToMarkerData","fromWorkspaceEdit","smth","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","tripletToBase64","num","output","prefix_sum_computer_1","word_helper_1","_modeId2WordDefinition","getWordDefinitionFor","textLines","dirty","lineStarts","acceptDeleteRange","acceptInsertText","langId","that_1","fileName","isUntitled","isClosed","save","getText","getTextInRange","lineCount","lineAt","lineOrPos","offsetAt","positionAt","validatePosition","insertLines","setLineText","newLengths","lineIndex","$trySaveDocument","lineEnding","startLineIndex","endLineIndex","resultLines","hasChanged","maxCharacter","lineOrPosition","firstNonWhitespaceCharacterIndex","rangeIncludingLineBreak","isEmptyOrWhitespace","ensureLineStarts","eolLength","linesLength","lineStartValues","lineLength","_position","regExpLeadsToEndlessLoop","wordAtText","terminals","onDidCloseTerminalEmitter","TERMINAL_MAIN","terminal","TerminalExtImpl","processId","$terminalClosed","termProcessId","$createTerminal","sendText","addNewLine","$sendText","$hide","Event","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","invoke","callbacks","contexts","_event","onFirstListenerAdd","_noop","onLastListenerRemove","ErrorCodes","ParseError","InvalidRequest","MethodNotFound","InvalidParams","InternalError","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","MessageWriteError","MessageReadError","ResponseError","toJson","AbstractMessageType","_method","_numberOfParams","RequestType0","_","RequestType","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","isRequestMessage","isNotificationMessage","isResponseMessage","strings","getEmptyExpression","GLOBSTAR","GLOB_SPLIT","PATH_REGEX","NO_PATH_REGEX","ALL_FORWARD_SLASHES","starsToRegExp","starCount","splitGlobAware","splitChar","segments","inBraces","inBrackets","curVal","T1","T2","T3","T3_2","T4","T5","CACHE","FALSE","parsePattern","arg1","patternKey","trimForExclusions","parsedPattern","wrapRelativePattern","base_1","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","trivia2","parsedPatterns","aggregateBasenameMatches","n_1","withBasenames","find","allPaths","trivia3","trivia4and5","regExp_1","parseRegExp","regEx","previousSegmentWasGlobStar_1","braceVal","bracketVal","braceRegExp","escapeRegExpCharacters","toRegExp","arg2","matchPathEnds","nativePath","nativePathEnd","isRelativePattern","parsedPattern_1","resultPattern","expression","getOwnPropertyNames","when_1","when","hasSibling","clausePattern","matched","requiresSiblings","parseExpressionPattern","resultExpression_1","n_2","withBasenames_1","allPaths_1","resultExpression","n_3","parsedExpression","listToMap","list_1","list_1_1","rp","basenamePatterns","aggregate","aggregatedPatterns","hasSiblingPromiseFn","siblingsFn","siblings","hasSiblingFn","parseToAsync","getBasenameTerms","patternOrExpression","getPathTerms","g","eval","DIALOGS_MAIN","optionsMain","openLabel","defaultUri","canSelectFiles","canSelectFolders","filters","$showOpenDialog","uris","catch","reason","saveLabel","$showSaveDialog","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","runIfPresent","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","random","onGlobalMessage","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","createElement","html","documentElement","script","onreadystatechange","removeChild","appendChild","installReadyStateChangeImplementation","task","vscode_jsonrpc_1","output_channel_item_1","OUTPUT_CHANNEL_REGISTRY_MAIN","displayName","engine","engines","TreeViewItem","TreeViewItemCollapsibleState","EditorPosition","TrackedRangeStickiness","COMMAND_REGISTRY_MAIN","WORKSPACE_MAIN","TREE_VIEWS_MAIN","DiagnosticCollection","maxCountPerFile","onDidChangeDiagnosticsEmitter","collectionName","diagnosticsLimitPerResource","onDisposeCallback","ensureNotDisposed","setDiagnosticsForUri","setDiagnostics","fireDiagnosticChangeEvent","sendChangesToEditor","entries_1","entries_1_1","entries_2","entries_2_1","existedDiagnostics","$changeDiagnostics","getAllResourcesUris","$clearDiagnostics","getDiagnosticsByUri","setOnDisposeCallback","resourcesUris","toUrisArray","markers","uriMarkers","uriDiagnostics","this_1","DIAGNOSTICS_PRIORITY","uriDiagnostics_1","uriDiagnostics_1_1","lastMarker","Info","nextUri","uris_1","uris_1_1","Warning","Information","Hint","diagnosticsChangedEmitter","diagnosticCollections","getAllDiagnisticsForResource","getAllDiagnostics","GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX","getNextId","diagnosticCollection","MAX_DIAGNOSTICS_PER_FILE","urisIndexes","nextIndex","diagnosticsCollection","uriIndex","crypto_1","generateRandomPipeName","randomSuffix","randomBytes","createClientPipeTransport","pipeName","createServerPipeTransport","paths_1","replaceRegex","processed","paths_2","paths_2_1","resolved","absolute","removeDuplicateSeparators","goodComponents","components_1","components_1_1","unshift","fromSegments","toSegments","upCount","downSegments","rv","object_identifier_1","lenses","lensSymbol","toInternal","isResolved","newLens","BAD_CMD","promises","workspaceFoldersChangedEmitter","documentContentProviders","folders","$onWorkspaceFoldersChanged","added","$pickWorkspaceFolder","includePattern","excludePatternOrDisregardExcludes","$startFileSearch","onDidChangeSubscription","$registerTextDocumentContentProvider","onDidChange","__awaiter","$provideTextDocumentContent","content","$onTextDocumentContentChange","$unregisterTextDocumentContentProvider","documentURI","provideTextDocumentContent","normalizeArray","allowAboveRoot","up","last","splitPathRe","splitPath","filename","xs","f","resolvedPath","resolvedAbsolute","trailingSlash","fromParts","toParts","samePartsLength","outputParts","delimiter","dirname","cursorStyleToString","Line","Block","Underline","LineThin","BlockOutline","UnderlineThin","_disposed","checkMaxListeners","treeViews","treeViewId","treeView","TreeViewExtImpl","onDidExpandElement","onDidCollapseElement","selectedElements","reveal","selectionOptions","$getChildren","treeItemId","getChildren","$setExpanded","expanded","onExpanded","onCollapsed","$setSelection","onSelectionChanged","onDidExpandElementEmmiter","onDidCollapseElementEmmiter","idCounter","$registerTreeDataProvider","onDidChangeTreeData","$refresh","el","elementId","generateId","cachedElement","treeItems_1","getTreeItem","treeItem","resourceUri","icon","iconPath","treeViewItem","collapsibleState","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","doEqualsIgnoreCase","stopAt","codeA","codeB","diff","haystack","needle","equalsIgnoreCase","candidateLength","provideDocumentLinks","links","links_1","links_1_1","fromDocumentLink","resolveDocumentLink","Cancelled","shortcutEvent","MutableToken","_isCancelled","cancel","_emitter","_token","cancelledMessage","cancelled","isCancelled","checkCancelled","fromHover","Date","destination","overwrite","LogType","__export","messages_1","CancelNotification","Trace","SetTraceNotification","LogTraceNotification","ConnectionErrors","linkedMap_1","NullLogger","Off","Messages","Verbose","ConnectionState","ConnectionError","_createMessageConnection","messageReader","messageWriter","logger","strategy","timer","tracer","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","messageQueue","responsePromises","requestTokens","trace","New","unhandledNotificationEmitter","disposeEmitter","createRequestQueueKey","addMessageToQueue","createResponseQueueKey","cancelUndispatched","_message","isListening","Listening","Closed","Disposed","closeHandler","triggerMessageQueue","requestMessage","reply","resultOrError","startTime","jsonrpc","traceSendingResponse","replyError","params","traceReceivedRequest","requestHandler","now","cancellationSource","tokenKey_1","handlerResult","numberOfParams","replySuccess","handleRequest","notificationHandler","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","response","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","sendNotification","messageParams","notificationMessage","traceSendNotification","onNotification","sendRequest","throwIfNotListening","traceSendingRequest","onRequest","_value","_tracer","onUnhandledNotification","onDispose","AlreadyListening","throwIfListening","verbose","ConnectionStrategy","createMessageConnection","isMessageReader","isMessageWriter","converter","CommandsConverter","$registerCommand","$unregisterCommand","$executeCommand","executeLocalCommand","delegatingCommandId","executeConvertedCommand","isFalsyOrEmpty","fromInternal","actualCmd","windowStateChangedEmitter","windowStateCached","focused","$onWindowStateChanged","something","isDecorationOptions","fromManyMarkdown","markup","fromMarkdown","isCodeblock","fromGlobPattern","ep","ONE","One","TWO","Two","THREE","Three","hoverMessage","renderOptions","Method","Constructor","Field","Variable","Class","Interface","Struct","Module","Property","Unit","Value","Constant","Enum","EnumMember","Keyword","Snippet","Text","Color","File","Reference","Folder","Operator","TypeParameter","toCompletionItemKind","fromLanguageSelector","convertCode","convertSeverity","relatedInformation","diagnosticsRelatedInformation","diagnosticsRelatedInformation_1","diagnosticsRelatedInformation_1_1","convertRelatedInformation","tags","markerTags","tags_1","tags_1_1","Unnecessary","convertTags","hover","targetUri","targetRange","origin","originSelectionRange","targetSelectionRange","url","uriOrEdits","modelVersionId","oldUri","newUri"],"mappings":"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","file":"worker-ext.dc2c30ae27c331a2998e.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"4bqe\");\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, PickOpenItem } from '../api/plugin-api';\nimport { QuickPickOptions, QuickPickItem, InputBoxOptions } from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { anyPromise } from '../api/async-util';\nimport { hookCancellationToken } from '../api/async-util';\n\nexport type Item = string | QuickPickItem;\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private selectItemHandler: undefined | ((handle: number) => void);\n    private validateInputHandler: undefined | ((input: string) => string | PromiseLike<string | undefined> | undefined);\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n    $onItemSelected(handle: number): void {\n        if (this.selectItemHandler) {\n            this.selectItemHandler(handle);\n        }\n    }\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined {\n        if (this.validateInputHandler) {\n            return Promise.resolve(this.validateInputHandler(input));\n        }\n        return undefined;\n    }\n\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<QuickPickItem | undefined>;\n    // tslint:disable-next-line:max-line-length\n    showQuickPick(promiseOrItems: QuickPickItem[] | PromiseLike<QuickPickItem[]>, options?: QuickPickOptions & { canSelectMany: true; }, token?: CancellationToken): PromiseLike<QuickPickItem[] | undefined>;\n    showQuickPick(promiseOrItems: string[] | PromiseLike<string[]>, options?: QuickPickOptions, token?: CancellationToken): PromiseLike<string | undefined>;\n    // tslint:disable-next-line:max-line-length\n    showQuickPick(promiseOrItems: Item[] | PromiseLike<Item[]>, options?: QuickPickOptions, token: CancellationToken = CancellationToken.None): PromiseLike<Item | Item[] | undefined> {\n        this.selectItemHandler = undefined;\n        const itemPromise = Promise.resolve(promiseOrItems);\n        const widgetPromise = this.proxy.$show({\n            canSelectMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            autoFocus: { autoFocusFirstEntry: true },\n            matchOnDescription: options && options.machOnDescription,\n            matchOnDetail: options && options.machOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        });\n\n        const promise = anyPromise(<PromiseLike<number | Item[]>[]>[widgetPromise, itemPromise]).then(values => {\n            if (values.key === 0) {\n                return undefined;\n            }\n            return itemPromise.then(items => {\n                const pickItems: PickOpenItem[] = [];\n                for (let handle = 0; handle < items.length; handle++) {\n                    const item = items[handle];\n                    let label: string;\n                    let description: string | undefined;\n                    let detail: string | undefined;\n                    let picked: boolean | undefined;\n                    if (typeof item === 'string') {\n                        label = item;\n                    } else {\n                        ({ label, description, detail, picked } = item);\n                    }\n                    pickItems.push({\n                        label,\n                        description,\n                        handle,\n                        detail,\n                        picked\n                    });\n                }\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.selectItemHandler = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        return items[handle];\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            }, err => {\n                this.proxy.$setError(err);\n                return Promise.reject(err);\n            });\n        });\n        return hookCancellationToken<Item | Item[] | undefined>(token, promise);\n    }\n\n    showInput(options?: InputBoxOptions, token: CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options && options.validateInput;\n\n        if (!options) {\n            options = {\n                placeHolder: ''\n            };\n        }\n\n        const promise = this.proxy.$input(options, typeof this.validateInputHandler === 'function');\n        return hookCancellationToken(token, promise);\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar toString = Object.prototype.toString;\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return toString.call(value) === '[object Error]';\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return toString.call(value) === '[object Function]';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(function (elem) { return string(elem); });\r\n}\r\nexports.stringArray = stringArray;\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { illegalArgument } from '../common/errors';\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '../common/strings';\nimport { MarkdownString, isMarkdownString } from './markdown-string';\n\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // tslint:disable-next-line:no-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    One = 1,\n    Two = 2,\n    Three = 3\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined) {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n}\n\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    static isRange(thing: {}): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Position.isPosition((<Range>thing).start)\n            && Position.isPosition((<Range>thing).end);\n    }\n\n}\n\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon;\n\n    static readonly Folder: ThemeIcon;\n\n    private constructor(public id: string) {\n    }\n\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    User = 0,\n    Workspace = 1\n}\n\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing))\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15,\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24\n}\n\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    detail: string;\n    documentation: string | MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n}\n\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n}\n\nexport class ParameterInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownString;\n    parameters: ParameterInformation[];\n\n    constructor(label: string, documentation?: string | MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport class Hover {\n\n    public contents: MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: MarkdownString | theia.MarkedString | MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <MarkdownString[] | theia.MarkedString[]>contents;\n        } else if (isMarkdownString(contents)) {\n            this.contents = [contents];\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\nexport type Definition = Location | Location[];\n\nexport class DocumentLink {\n    range: Range;\n    target: URI;\n\n    constructor(range: Range, target: URI) {\n        if (target && !(target instanceof URI)) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n}\n\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from, to, options });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options });\n    }\n\n    replace(uri: URI, range: Range, newText: string): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText) });\n    }\n\n    insert(resource: URI, position: Position, newText: string): void {\n        this.replace(resource, new Range(position, position), newText);\n    }\n\n    delete(resource: URI, range: Range): void {\n        this.replace(resource, range, '');\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] {\n        const res: ([URI, TextEdit[]] | [URI, URI, FileOperationOptions])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!]);\n            } else {\n                res.push([edit.uri, [edit.edit]]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\nexport class TreeItem {\n\n    label?: string;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    collapsibleState?: TreeItemCollapsibleState;\n\n    contextValue?: string;\n\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // tslint:disable-next-line:no-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum FileChangeType {\n\tChanged = 1,\n\tCreated = 2,\n\tDeleted = 3,\n}\n\nexport enum FileType {\n\tUnknown = 0,\n\tFile = 1,\n\tDirectory = 2,\n\tSymbolicLink = 64\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, SingleEditOperation } from '../../api/model';\nimport { Position } from '../../api/plugin-api';\nimport { createToken } from '../token-provider';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, createToken())).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret) {\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment) {\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = schemeOrData || _empty;\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === void 0) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === void 0) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === void 0) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === void 0) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === void 0) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value) {\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string presentation for this URI. It's guardeed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._fsPath = data.fsPath;\n            result._formatted = data.external;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n * @param uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain\n} from '../api/plugin-api';\nimport {RPCProtocol} from '../api/rpc-protocol';\nimport {MessageItem, MessageOptions} from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    showInformationMessage(message: string,\n                           optionsOrFirstItem: MessageOptions | string | MessageItem,\n                           items: string[] | MessageItem[]): PromiseLike<string | MessageItem | undefined> {\n        return this.proxy.$showInformationMessage(message, optionsOrFirstItem, items);\n    }\n\n    showWarningMessage(message: string,\n                           optionsOrFirstItem: MessageOptions | string | MessageItem,\n                           items: string[] | MessageItem[]): PromiseLike<string | MessageItem | undefined> {\n        return this.proxy.$showWarningMessage(message, optionsOrFirstItem, items);\n    }\n\n    showErrorMessage(message: string,\n                           optionsOrFirstItem: MessageOptions | string | MessageItem,\n                           items: string[] | MessageItem[]): PromiseLike<string | MessageItem | undefined> {\n        return this.proxy.$showErrorMessage(message, optionsOrFirstItem, items);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocolImpl } from '../../../api/rpc-protocol';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { MAIN_RPC_CONTEXT, Plugin, emptyPlugin } from '../../../api/plugin-api';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { getPluginId, PluginMetadata } from '../../../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\n\n// tslint:disable-next-line:no-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst emitter = new Emitter();\nconst rpc = new RPCProtocolImpl({\n    onMessage: emitter.event,\n    send: (m: {}) => {\n        ctx.postMessage(m);\n    }\n});\n// tslint:disable-next-line:no-any\naddEventListener('message', (message: any) => {\n    emitter.fire(message.data);\n});\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    ctx.importScripts('/context/' + contextPath);\n}\nconst envExt = new EnvExtImpl(rpc);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // tslint:disable-next-line:no-any\n    loadPlugin(plugin: Plugin): any {\n        if (isElectron()) {\n            ctx.importScripts(plugin.pluginPath);\n        } else {\n            ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    init(rawPluginData: PluginMetadata[]): [Plugin[], Plugin[]] {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        for (const plg of rawPluginData) {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: plg.source.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    rawModel: plg.source\n                };\n                result.push(plugin);\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n            } else {\n                foreign.push({\n                    pluginPath: pluginModel.entryPoint.backend!,\n                    pluginFolder: plg.source.packagePath,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    rawModel: plg.source\n                });\n            }\n        }\n\n        return [result, foreign];\n    }\n}, envExt, preferenceRegistryExt);\n\nconst apiFactory = createAPIFactory(rpc, pluginManager, envExt, preferenceRegistryExt);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\n// tslint:disable-next-line:no-null-keyword\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\n\nfunction isElectron() {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\nexport class Path {\n    public static separator: '/' = '/';\n\n    public static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        private raw: string\n    ) {\n        const firstIndex = raw.indexOf(Path.separator);\n        const lastIndex = raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? raw : raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    protected computeDir(): Path {\n        if (this.isRoot) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (lastIndex === -1) {\n            return this;\n        }\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../api/plugin-api';\nimport { QueryParameters } from '../common/env';\n\nexport class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // tslint:disable-next-line:no-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../api/plugin-api';\nimport { SignatureHelp } from '../../api/model';\nimport { createToken } from '../token-provider';\n\nexport class SignatureHelpAdapter {\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideSignatureHelp(resource: URI, position: Position): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideSignatureHelp(document, zeroBasedPosition, createToken()));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain } from '../api/plugin-api';\nimport URI from 'vscode-uri';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            data.acceptIsDirty(isDirty);\n            this._onDidChangeDocument.fire({\n                document: data.document,\n                contentChanges: []\n            });\n        }\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            data.acceptIsDirty(isDirty);\n            data.onEvents(e);\n            this._onDidChangeDocument.fire({\n                document: data.document,\n                contentChanges: e.changes.map(change =>\n                    ({\n                        range: Converter.toRange(change.range),\n                        rangeOffset: change.rangeOffset,\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    }))\n            });\n        }\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // retun opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    private async loadDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, SingleEditOperation, Range } from '../../api/model';\nimport { createToken } from '../token-provider';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, createToken())).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../api/plugin-api';\nimport { Range as ApiRange } from '../api/model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn) {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // tslint:disable-next-line:max-line-length\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // tslint:disable-next-line:max-line-length\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n            ({\n                range: Converter.fromRange(e.range)!,\n                text: e.text,\n                forceMoveMarkers: e.forceMoveMarkers\n            }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // tslint:disable-next-line:no-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions) {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// tslint:disable-next-line:no-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nvar LinkedMap = /** @class */ (function () {\r\n    function LinkedMap() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    LinkedMap.prototype.clear = function () {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    };\r\n    LinkedMap.prototype.isEmpty = function () {\r\n        return !this._head && !this._tail;\r\n    };\r\n    Object.defineProperty(LinkedMap.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LinkedMap.prototype.has = function (key) {\r\n        return this._map.has(key);\r\n    };\r\n    LinkedMap.prototype.get = function (key) {\r\n        var item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    };\r\n    LinkedMap.prototype.set = function (key, value, touch) {\r\n        if (touch === void 0) { touch = Touch.None; }\r\n        var item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key: key, value: value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    };\r\n    LinkedMap.prototype.delete = function (key) {\r\n        var item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    };\r\n    LinkedMap.prototype.shift = function () {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        var item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    };\r\n    LinkedMap.prototype.forEach = function (callbackfn, thisArg) {\r\n        var current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    };\r\n    LinkedMap.prototype.forEachReverse = function (callbackfn, thisArg) {\r\n        var current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    };\r\n    LinkedMap.prototype.values = function () {\r\n        var result = [];\r\n        var current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    };\r\n    LinkedMap.prototype.keys = function () {\r\n        var result = [];\r\n        var current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    };\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    LinkedMap.prototype.addItemFirst = function (item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    };\r\n    LinkedMap.prototype.addItemLast = function (item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    };\r\n    LinkedMap.prototype.removeItem = function (item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    };\r\n    LinkedMap.prototype.touch = function (item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            var next = item.next;\r\n            var previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    };\r\n    return LinkedMap;\r\n}());\r\nexports.LinkedMap = LinkedMap;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport const VS_COLORS: {[vsColorId: string]: string} = {\n    'statusBar.foreground': '--theia-layout-color4',\n    'editorOverviewRuler.errorForeground': '--theia-error-color0',\n    'editorOverviewRuler.warningForeground': '--theia-warn-color0',\n    'editorOverviewRuler.infoForeground': '--theia-info-color0'\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport class MarkdownString {\n\n    value: string;\n    isTrusted?: boolean;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(value: string): MarkdownString {\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        this.value += value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&');\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownString {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(code: string, language: string = ''): MarkdownString {\n        this.value += '\\n```';\n        this.value += language;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n}\n\n// tslint:disable-next-line:no-any\nexport function isMarkdownString(thing: any): thing is MarkdownString {\n    if (thing instanceof MarkdownString) {\n        return true;\n    } else if (thing && typeof thing === 'object') {\n        return typeof (<MarkdownString>thing).value === 'string'\n            && (typeof (<MarkdownString>thing).isTrusted === 'boolean' || (<MarkdownString>thing).isTrusted === void 0);\n    }\n    return false;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport URI from 'vscode-uri/lib/umd';\nimport { FormattingOptions, SingleEditOperation } from '../../api/model';\nimport { createToken } from '../token-provider';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, createToken())).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, cnt: number): boolean {\n        startIndex = toUint32(startIndex);\n        cnt = toUint32(cnt);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCnt = oldValues.length - startIndex;\n        if (cnt >= maxCnt) {\n            cnt = maxCnt;\n        }\n\n        if (cnt === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - cnt);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + cnt), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../api/plugin-api';\nimport { Definition, DefinitionLink, Location } from '../../api/model';\nimport { createToken } from '../token-provider';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position): Promise<Definition | DefinitionLink[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, createToken())).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: DefinitionLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n\n/* tslint:disable-next-line:no-any */\nfunction isLocationArray(array: any): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\n/* tslint:disable-next-line:no-any */\nfunction isDefinitionLinkArray(array: any): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { PluginManagerExt, PluginInitData, PluginManager, Plugin, PluginAPI } from '../api/plugin-api';\nimport { PluginMetadata } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\n\nimport { join } from 'path';\nimport { dispose } from '../common/disposable-util';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\n\nexport interface PluginHost {\n\n    // tslint:disable-next-line:no-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): [Plugin[], Plugin[]];\n}\n\ninterface StopFn {\n    (): void;\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    private registry = new Map<string, Plugin>();\n    private activatedPlugins = new Map<string, ActivatedPlugin>();\n    private pluginActivationPromises = new Map<string, Deferred<void>>();\n\n    constructor(private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly preferencesManager: PreferenceRegistryExtImpl) {\n    }\n\n    $stopPlugin(contextPath: string): PromiseLike<void> {\n        this.activatedPlugins.forEach(plugin => {\n            if (plugin.stopFn) {\n                plugin.stopFn();\n            }\n\n            // dispose any objects\n            const pluginContext = plugin.pluginContext;\n            if (pluginContext) {\n                dispose(pluginContext.subscriptions);\n            }\n        });\n        return Promise.resolve();\n    }\n\n    $init(pluginInit: PluginInitData): PromiseLike<void> {\n        // init query parameters\n        this.envExt.setQueryParameters(pluginInit.env.queryParams);\n\n        this.preferencesManager.init(pluginInit.preferences);\n\n        const [plugins, foreignPlugins] = this.host.init(pluginInit.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registry.set(plugin.model.id, plugin);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registry.set(plugin.model.id, plugin);\n        }\n        // run plugins\n        for (const plugin of plugins) {\n            const pluginMain = this.host.loadPlugin(plugin);\n            // able to load the plug-in ?\n            if (pluginMain !== undefined) {\n                this.startPlugin(plugin, pluginMain);\n            } else {\n                return Promise.reject(new Error('Unable to load the given plugin'));\n            }\n        }\n\n        return Promise.resolve();\n    }\n\n    // tslint:disable-next-line:no-any\n    private startPlugin(plugin: Plugin, pluginMain: any): void {\n\n        // Create pluginContext object for this plugin.\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const pluginContext: theia.PluginContext = {\n            extensionPath: plugin.pluginFolder,\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath\n        };\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            const pluginExport = pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n\n            // resolve activation promise\n            if (this.pluginActivationPromises.has(plugin.model.id)) {\n                this.pluginActivationPromises.get(plugin.model.id)!.resolve();\n                this.pluginActivationPromises.delete(plugin.model.id);\n            }\n        } else {\n            console.log(`There is no ${plugin.lifecycle.startMethod} method on plugin`);\n        }\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        if (this.pluginActivationPromises.has(pluginId)) {\n            return this.pluginActivationPromises.get(pluginId)!.promise;\n        }\n\n        const deferred = new Deferred<void>();\n        this.pluginActivationPromises.set(pluginId, deferred);\n        return deferred.promise;\n    }\n\n}\n\n// for electron\nfunction getGlobal() {\n    // tslint:disable-next-line:no-null-keyword\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport {OutputChannelRegistryMain} from '../../api/plugin-api';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, private proxy: OutputChannelRegistryMain) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocus: boolean | undefined): void {\n        this.validate();\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    private validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { mixin } from '../../common/types';\nimport { Position } from '../../api/plugin-api';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto } from '../../api/model';\nimport { createToken } from '../token-provider';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.CompletionItem[]>();\n\n    constructor(private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, createToken(), context)).then(value => {\n            const id = this.cacheId++;\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos))\n                .with({ end: pos });\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], pos, wordRangeBeforePos, i, id);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    resolveCompletionItem(resource: URI, position: Position, completion: Completion): Promise<Completion> {\n\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return Promise.resolve(completion);\n        }\n\n        const { parentId, id } = (<CompletionDto>completion);\n        const item = this.cache.has(parentId) && this.cache.get(parentId)![id];\n        if (!item) {\n            return Promise.resolve(completion);\n        }\n\n        return Promise.resolve(this.delegate.resolveCompletionItem(item, undefined)).then(resolvedItem => {\n\n            if (!resolvedItem) {\n                return completion;\n            }\n\n            const doc = this.documents.getDocumentData(resource)!.document;\n            const pos = Converter.toPosition(position);\n            const wordRangeBeforePos = (doc.getWordRangeAtPosition(pos) as Range || new Range(pos, pos)).with({ end: pos });\n            const newCompletion = this.convertCompletionItem(resolvedItem, pos, wordRangeBeforePos, id, parentId);\n            if (newCompletion) {\n                mixin(completion, newCompletion, true);\n            }\n\n            return completion;\n        });\n    }\n\n    releaseCompletionItems(id: number) {\n        this.cache.delete(id);\n        return Promise.resolve();\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, position: theia.Position, defaultRange: theia.Range, id: number, parentId: number): CompletionDto | undefined {\n        if (typeof item.label !== 'string' || item.label.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const result: CompletionDto = {\n            id,\n            parentId,\n            label: item.label,\n            type: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation: item.documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText: '',\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: undefined,   // TODO: implement this: this.commands.toInternal(item.command),\n            commitCharacters: item.commitCharacters\n        };\n\n        if (typeof item.insertText === 'string') {\n            result.insertText = item.insertText;\n            result.snippetType = 'internal';\n\n        } else if (item.insertText instanceof SnippetString) {\n            result.insertText = item.insertText.value;\n            result.snippetType = 'textmate';\n\n        } else {\n            result.insertText = item.label;\n            result.snippetType = 'internal';\n        }\n\n        let range: theia.Range;\n        if (item.range) {\n            range = item.range;\n        } else {\n            range = defaultRange;\n        }\n        result.overwriteBefore = position.character - range.start.character;\n        result.overwriteAfter = range.end.character - position.character;\n\n        if (!range.isSingleLine || range.start.line !== position.line) {\n            console.warn('Invalid Completion Item -> must be single line and on the same line');\n            return undefined;\n        }\n\n        return result;\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../api/plugin-api';\nimport { VS_COLORS } from './vscolor-const';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n    private _messageId: string;\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _text: string;\n    private _tooltip: string;\n    private _color: string | ThemeColor;\n    private _command: string;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor {\n        return this._color;\n    }\n\n    public get command(): string {\n        return this._command;\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor) {\n        this._color = color;\n        this.update();\n    }\n\n    public set command(command: string) {\n        this._command = command;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        if (this._messageId) {\n            this._proxy.$dispose(this._messageId);\n        }\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n\n        if (this._messageId) {\n            this._proxy.$dispose(this._messageId);\n        }\n\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            // Set to status bar\n            this._proxy.$setMessage(this.text,\n                this.priority,\n                this.alignment,\n                this.getColor(),\n                this.tooltip,\n                this.command).then((id: string) => {\n                    this._messageId = id;\n                });\n        }, 0);\n    }\n\n    private getColor(): string | undefined {\n        if (typeof this.color !== 'string' && typeof this.color !== 'undefined') {\n            const colorId = (<ThemeColor>this.color).id;\n            return `var(${VS_COLORS[colorId] ? VS_COLORS[colorId] : colorId})`;\n        }\n        return this.color;\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar ContentLength = 'Content-Length: ';\r\nvar CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nvar AbstractMessageWriter = /** @class */ (function () {\r\n    function AbstractMessageWriter() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    AbstractMessageWriter.prototype.dispose = function () {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    };\r\n    Object.defineProperty(AbstractMessageWriter.prototype, \"onError\", {\r\n        get: function () {\r\n            return this.errorEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageWriter.prototype.fireError = function (error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    };\r\n    Object.defineProperty(AbstractMessageWriter.prototype, \"onClose\", {\r\n        get: function () {\r\n            return this.closeEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageWriter.prototype.fireClose = function () {\r\n        this.closeEmitter.fire(undefined);\r\n    };\r\n    AbstractMessageWriter.prototype.asError = function (error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(\"Writer recevied error. Reason: \" + (Is.string(error.message) ? error.message : 'unknown'));\r\n        }\r\n    };\r\n    return AbstractMessageWriter;\r\n}());\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nvar StreamMessageWriter = /** @class */ (function (_super) {\r\n    __extends(StreamMessageWriter, _super);\r\n    function StreamMessageWriter(writable, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.writable = writable;\r\n        _this.encoding = encoding;\r\n        _this.errorCount = 0;\r\n        _this.writable.on('error', function (error) { return _this.fireError(error); });\r\n        _this.writable.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    StreamMessageWriter.prototype.write = function (msg) {\r\n        var json = JSON.stringify(msg);\r\n        var contentLength = Buffer.byteLength(json, this.encoding);\r\n        var headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    };\r\n    return StreamMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nvar IPCMessageWriter = /** @class */ (function (_super) {\r\n    __extends(IPCMessageWriter, _super);\r\n    function IPCMessageWriter(process) {\r\n        var _this = _super.call(this) || this;\r\n        _this.process = process;\r\n        _this.errorCount = 0;\r\n        _this.queue = [];\r\n        _this.sending = false;\r\n        var eventEmitter = _this.process;\r\n        eventEmitter.on('error', function (error) { return _this.fireError(error); });\r\n        eventEmitter.on('close', function () { return _this.fireClose; });\r\n        return _this;\r\n    }\r\n    IPCMessageWriter.prototype.write = function (msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    };\r\n    IPCMessageWriter.prototype.doWriteMessage = function (msg) {\r\n        var _this = this;\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, function (error) {\r\n                    _this.sending = false;\r\n                    if (error) {\r\n                        _this.errorCount++;\r\n                        _this.fireError(error, msg, _this.errorCount);\r\n                    }\r\n                    else {\r\n                        _this.errorCount = 0;\r\n                    }\r\n                    if (_this.queue.length > 0) {\r\n                        _this.doWriteMessage(_this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    };\r\n    return IPCMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nvar SocketMessageWriter = /** @class */ (function (_super) {\r\n    __extends(SocketMessageWriter, _super);\r\n    function SocketMessageWriter(socket, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.socket = socket;\r\n        _this.queue = [];\r\n        _this.sending = false;\r\n        _this.encoding = encoding;\r\n        _this.errorCount = 0;\r\n        _this.socket.on('error', function (error) { return _this.fireError(error); });\r\n        _this.socket.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    SocketMessageWriter.prototype.write = function (msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    };\r\n    SocketMessageWriter.prototype.doWriteMessage = function (msg) {\r\n        var _this = this;\r\n        var json = JSON.stringify(msg);\r\n        var contentLength = Buffer.byteLength(json, this.encoding);\r\n        var headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', function (error) {\r\n                if (error) {\r\n                    _this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    _this.socket.write(json, _this.encoding, function (error) {\r\n                        _this.sending = false;\r\n                        if (error) {\r\n                            _this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            _this.errorCount = 0;\r\n                        }\r\n                        if (_this.queue.length > 0) {\r\n                            _this.doWriteMessage(_this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    _this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    };\r\n    SocketMessageWriter.prototype.handleError = function (error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    };\r\n    return SocketMessageWriter;\r\n}(AbstractMessageWriter));\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {Disposable, StatusBarAlignment} from './types-impl';\nimport {StatusBarItem} from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../api/plugin-api';\nimport {RPCProtocol} from '../api/rpc-protocol';\nimport {StatusBarItemImpl} from './status-bar/status-bar-item';\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n    }\n\n    // tslint:disable-next-line:no-any\n    setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n        let id: string;\n        this.proxy.$setMessage(text, 0, 1, undefined, undefined, undefined).then((messageId: string) => {\n            id = messageId;\n        });\n        let handle: NodeJS.Timer;\n\n        if (typeof arg === 'number') {\n            handle = setTimeout(() => this.dispose(id), <number>arg);\n        } else if (typeof arg !== 'undefined') {\n            arg.then(() => this.dispose(id), () => this.dispose(id));\n        }\n\n        return Disposable.create(() => {\n            this.dispose(id);\n            if (handle) {\n                clearTimeout(handle);\n            }\n        });\n    }\n\n    private dispose(id: string): void {\n        if (!id) {\n            return;\n        }\n        this.proxy.$dispose(id);\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority);\n    }\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar DefaultSize = 8192;\r\nvar CR = new Buffer('\\r', 'ascii')[0];\r\nvar LF = new Buffer('\\n', 'ascii')[0];\r\nvar CRLF = '\\r\\n';\r\nvar MessageBuffer = /** @class */ (function () {\r\n    function MessageBuffer(encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = new Buffer(DefaultSize);\r\n    }\r\n    MessageBuffer.prototype.append = function (chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = new Buffer(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = new Buffer(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    };\r\n    MessageBuffer.prototype.tryReadHeaders = function () {\r\n        var result = undefined;\r\n        var current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        var headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach(function (header) {\r\n            var index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            var key = header.substr(0, index);\r\n            var value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        var nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    };\r\n    MessageBuffer.prototype.tryReadContent = function (length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        var result = this.buffer.toString(this.encoding, 0, length);\r\n        var nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    };\r\n    Object.defineProperty(MessageBuffer.prototype, \"numberOfBytes\", {\r\n        get: function () {\r\n            return this.index;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MessageBuffer;\r\n}());\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nvar AbstractMessageReader = /** @class */ (function () {\r\n    function AbstractMessageReader() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    AbstractMessageReader.prototype.dispose = function () {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onError\", {\r\n        get: function () {\r\n            return this.errorEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.fireError = function (error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onClose\", {\r\n        get: function () {\r\n            return this.closeEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.fireClose = function () {\r\n        this.closeEmitter.fire(undefined);\r\n    };\r\n    Object.defineProperty(AbstractMessageReader.prototype, \"onPartialMessage\", {\r\n        get: function () {\r\n            return this.partialMessageEmitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    AbstractMessageReader.prototype.firePartialMessage = function (info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    };\r\n    AbstractMessageReader.prototype.asError = function (error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(\"Reader recevied error. Reason: \" + (Is.string(error.message) ? error.message : 'unknown'));\r\n        }\r\n    };\r\n    return AbstractMessageReader;\r\n}());\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nvar StreamMessageReader = /** @class */ (function (_super) {\r\n    __extends(StreamMessageReader, _super);\r\n    function StreamMessageReader(readable, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf8'; }\r\n        var _this = _super.call(this) || this;\r\n        _this.readable = readable;\r\n        _this.buffer = new MessageBuffer(encoding);\r\n        _this._partialMessageTimeout = 10000;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StreamMessageReader.prototype, \"partialMessageTimeout\", {\r\n        get: function () {\r\n            return this._partialMessageTimeout;\r\n        },\r\n        set: function (timeout) {\r\n            this._partialMessageTimeout = timeout;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    StreamMessageReader.prototype.listen = function (callback) {\r\n        var _this = this;\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', function (data) {\r\n            _this.onData(data);\r\n        });\r\n        this.readable.on('error', function (error) { return _this.fireError(error); });\r\n        this.readable.on('close', function () { return _this.fireClose(); });\r\n    };\r\n    StreamMessageReader.prototype.onData = function (data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                var headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                var contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                var length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    };\r\n    StreamMessageReader.prototype.clearPartialMessageTimer = function () {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    };\r\n    StreamMessageReader.prototype.setPartialMessageTimer = function () {\r\n        var _this = this;\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout(function (token, timeout) {\r\n            _this.partialMessageTimer = undefined;\r\n            if (token === _this.messageToken) {\r\n                _this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                _this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    };\r\n    return StreamMessageReader;\r\n}(AbstractMessageReader));\r\nexports.StreamMessageReader = StreamMessageReader;\r\nvar IPCMessageReader = /** @class */ (function (_super) {\r\n    __extends(IPCMessageReader, _super);\r\n    function IPCMessageReader(process) {\r\n        var _this = _super.call(this) || this;\r\n        _this.process = process;\r\n        var eventEmitter = _this.process;\r\n        eventEmitter.on('error', function (error) { return _this.fireError(error); });\r\n        eventEmitter.on('close', function () { return _this.fireClose(); });\r\n        return _this;\r\n    }\r\n    IPCMessageReader.prototype.listen = function (callback) {\r\n        this.process.on('message', callback);\r\n    };\r\n    return IPCMessageReader;\r\n}(AbstractMessageReader));\r\nexports.IPCMessageReader = IPCMessageReader;\r\nvar SocketMessageReader = /** @class */ (function (_super) {\r\n    __extends(SocketMessageReader, _super);\r\n    function SocketMessageReader(socket, encoding) {\r\n        if (encoding === void 0) { encoding = 'utf-8'; }\r\n        return _super.call(this, socket, encoding) || this;\r\n    }\r\n    return SocketMessageReader;\r\n}(StreamMessageReader));\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar net_1 = require(\"net\");\r\nvar messageReader_1 = require(\"./messageReader\");\r\nvar messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var connectResolve;\r\n    var connected = new Promise(function (resolve, _reject) {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise(function (resolve, reject) {\r\n        var server = net_1.createServer(function (socket) {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', function () {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: function () { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // tslint:disable-next-line:no-any\n        this.proxy.$registerTextEditorDecorationType(this.key, <any>options);\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* tslint:disable:no-any */\n\nimport { Event } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport interface MessageConnection {\n    send(msg: {}): void;\n    onMessage: Event<{}>;\n}\n\nexport interface RPCProtocol {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = id.toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private isDisposed: boolean;\n    private readonly locals: { [id: string]: any; };\n    private readonly proxies: { [id: string]: any; };\n    private lastMessageId: number;\n    private readonly invokedHandlers: { [req: string]: Promise<any>; };\n    private readonly pendingRPCReplies: { [msgId: string]: Deferred<any>; };\n    private readonly multiplexor: RPCMultiplexer;\n    private messageToSendHostId: string | undefined;\n\n    constructor(connection: MessageConnection, readonly remoteHostID?: string) {\n        this.isDisposed = false;\n        // tslint:disable-next-line:no-null-keyword\n        this.locals = Object.create(null);\n        // tslint:disable-next-line:no-null-keyword\n        this.proxies = Object.create(null);\n        this.lastMessageId = 0;\n        // tslint:disable-next-line:no-null-keyword\n        this.invokedHandlers = Object.create(null);\n        this.pendingRPCReplies = {};\n        this.multiplexor = new RPCMultiplexer(connection, msg => this.receiveOneMessage(msg), remoteHostID);\n    }\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (!this.proxies[proxyId.id]) {\n            this.proxies[proxyId.id] = this.createProxy(proxyId.id);\n        }\n        return this.proxies[proxyId.id];\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        this.locals[identifier.id] = instance;\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        // tslint:disable-next-line:no-null-keyword\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        this.pendingRPCReplies[callId] = result;\n        this.multiplexor.send(MessageFactory.request(callId, proxyId, methodName, args, this.messageToSendHostId));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        const msg = <RPCMessage>JSON.parse(rawmsg);\n\n        // handle message that sets the Host ID\n        if ((<any>msg).setHostID) {\n            this.messageToSendHostId = (<any>msg).setHostID;\n            return;\n        }\n\n        // skip message if not matching host\n        if (this.remoteHostID && (<any>msg).hostID && this.remoteHostID !== (<any>msg).hostID) {\n            return;\n        }\n\n        switch (msg.type) {\n            case MessageType.Request:\n                this.receiveRequest(msg);\n                break;\n            case MessageType.Reply:\n                this.receiveReply(msg);\n                break;\n            case MessageType.ReplyErr:\n                this.receiveReplyErr(msg);\n                break;\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n\n        this.invokedHandlers[callId] = this.invokeHandler(proxyId, msg.method, msg.args);\n\n        this.invokedHandlers[callId].then(r => {\n            delete this.invokedHandlers[callId];\n            this.multiplexor.send(MessageFactory.replyOK(callId, r, this.messageToSendHostId));\n        }, err => {\n            delete this.invokedHandlers[callId];\n            this.multiplexor.send(MessageFactory.replyErr(callId, err, this.messageToSendHostId));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        if (!this.pendingRPCReplies.hasOwnProperty(callId)) {\n            return;\n        }\n\n        const pendingReply = this.pendingRPCReplies[callId];\n        delete this.pendingRPCReplies[callId];\n\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        if (!this.pendingRPCReplies.hasOwnProperty(callId)) {\n            return;\n        }\n\n        const pendingReply = this.pendingRPCReplies[callId];\n        delete this.pendingRPCReplies[callId];\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        if (!this.locals[proxyId]) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const actor = this.locals[proxyId];\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    constructor(connection: MessageConnection, onMessage: (msg: string) => void, remoteHostId?: string) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.messagesToSend = [];\n        if (remoteHostId) {\n            this.send(`{\"setHostID\":\"${remoteHostId}\"}`);\n        }\n\n        this.connection.onMessage((data: string[]) => {\n            const len = data.length;\n            for (let i = 0; i < len; i++) {\n                onMessage(data[i]);\n            }\n        });\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(tmp);\n    }\n\n    public send(msg: string): void {\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\nclass MessageFactory {\n\n    public static request(req: string, rpcId: string, method: string, args: any[], messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        return `{${prefix}\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args)}}`;\n    }\n\n    public static replyOK(req: string, res: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        if (typeof res === 'undefined') {\n            return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{${prefix}\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${JSON.stringify(res)}}`;\n    }\n\n    public static replyErr(req: string, err: any, messageToSendHostId?: string): string {\n        let prefix = '';\n        if (messageToSendHostId) {\n            prefix = `\"hostID\":\"${messageToSendHostId}\",`;\n        }\n        if (err instanceof Error) {\n            return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${JSON.stringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{${prefix}\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\nconst enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { startsWithIgnoreCase } from './strings';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { CharCode } from './char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // tslint:disable-next-line:no-shadowed-variable\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// tslint:disable-next-line:no-shadowed-variable\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // tslint:disable-next-line:no-shadowed-variable\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret) {\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment) {\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = schemeOrData || _empty;\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === void 0) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === void 0) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === void 0) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === void 0) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === void 0) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value) {\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty));\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string presentation for this URI. It's guardeed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._fsPath = data.fsPath;\n            result._formatted = data.external;\n            return result;\n        }\n    };\n    return URI;\n}());\nexports.default = URI;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n * @param uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && ((uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122) /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // tslint:disable-line\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* tslint:disable:no-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT,\n    PreferenceRegistryExt,\n    PreferenceRegistryMain\n} from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { isObject } from '../common/types';\nimport { PreferenceChange } from '@theia/core/lib/browser';\nimport { ConfigurationTarget } from './types-impl';\n\nimport cloneDeep = require('lodash.clonedeep');\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// tslint:disable-next-line:no-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    // tslint:disable-next-line:no-any\n    private _preferences: any;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    // tslint:disable-next-line:no-any\n    init(data: { [key: string]: any }): void {\n        this._preferences = this.parse(data);\n    }\n\n    // tslint:disable-next-line:no-any\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChange): void {\n        this.init(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData));\n    }\n\n    getConfiguration(section?: string, resource?: theia.Uri | null, extensionId?: string): theia.WorkspaceConfiguration {\n        const preferences = this.toReadonlyValue(section\n            ? lookUp(this._preferences, section)\n            : this._preferences);\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = cloneTarget ? cloneTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, arg?: ConfigurationTarget | boolean): PromiseLike<void> => {\n                key = section ? `${section}.${key}` : key;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(arg, key, value, resource);\n                } else {\n                    return this.proxy.$removeConfigurationOption(arg, key, resource);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> => {\n                throw new Error('Not implemented yet.');\n            }\n        };\n        return configuration;\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => readonlyProxy(targ[prop]),\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: any): any {\n        return Object.keys(data).reduce((result: any, key: string) => {\n            const parts = key.split('.');\n            let branch = result;\n            for (let i = 0; i < parts.length; i++) {\n                if (i === parts.length - 1) {\n                    branch[parts[i]] = data[key];\n                    continue;\n                }\n                if (!branch[parts[i]]) {\n                    branch[parts[i]] = {};\n                }\n                branch = branch[parts[i]];\n            }\n            return result;\n        }, {});\n    }\n\n    private toConfigurationChangeEvent(eventData: PreferenceChange): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, uri?: theia.Uri): boolean => {\n                const tree = eventData.preferenceName\n                    .split('.')\n                    .reverse()\n                    .reduce((prevValue: any, curValue: any) => ({ [curValue]: prevValue }), eventData.newValue);\n                return !!lookUp(tree, section);\n            }\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    SerializedRegExp,\n    SerializedOnEnterRule,\n    SerializedIndentationRule,\n    Position,\n    Selection\n} from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable } from './types-impl';\nimport URI from 'vscode-uri/lib/umd';\nimport { match as matchGlobPattern } from '../common/glob';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    Range,\n    SingleEditOperation,\n    FormattingOptions,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol\n} from '../api/model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { CommandRegistryImpl } from './command-registry';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    LinkProviderAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private diagnostics: Diagnostics;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(rpc: RPCProtocol, private readonly documents: DocumentsExtImpl, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n    }\n\n    get onDidChangeDiagnostics() {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            // tslint:disable-next-line:no-null-keyword\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // tslint:disable-next-line:no-any\n    private withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!(adapter instanceof ctor)) {\n            return Promise.reject(new Error('no adapter found'));\n        }\n        return callback(<A>adapter);\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (Array.isArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern\n            };\n        }\n\n        return undefined;\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position, context: CompletionContext): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context));\n    }\n\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion): Promise<Completion> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(URI.revive(resource), position, completion));\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, adapter => adapter.releaseCompletionItems(id));\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[]): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents));\n        this.proxy.$registerCompletionSupport(callId, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position): Promise<Definition | DefinitionLink[] | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position));\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(handle: number, resource: UriComponents, position: Position): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position));\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, ...triggerCharacters: string[]): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position));\n    }\n    // ### Hover Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options));\n    }\n    // ### Document Formatting Edit end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options));\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[]\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string, options: FormattingOptions): Promise<SingleEditOperation[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options));\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource)));\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link));\n    }\n\n    registerLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : ''));\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value!) : undefined\n        );\n        return this.createDisposable(callId);\n    }\n\n    $provideCodeActions(handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: monaco.languages.CodeActionContext\n    ): Promise<monaco.languages.CodeAction[]> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context));\n    }\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands.getConverter()));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource)));\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol));\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n        // FIXME: to implement\n        return new Disposable(() => { });\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider): theia.Disposable {\n        // FIXME: to implement\n        return new Disposable(() => { });\n    }\n    // ### Document Symbol Provider end\n\n}\n\nfunction serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n        ({\n            action: r.action,\n            beforeText: serializeRegExp(r.beforeText),\n            afterText: serializeRegExp(r.afterText)\n        } as SerializedOnEnterRule));\n}\n\nfunction serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nfunction serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, candidateUri: URI, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, candidateUri, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === candidateUri.scheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === candidateUri.fsPath || matchGlobPattern(pattern, candidateUri.fsPath)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function create(func: () => void): Disposable {\n        return {\n            dispose: func\n        };\n    }\n    export const NULL = create(() => { });\n}\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport { MAIN_RPC_CONTEXT, Plugin as InternalPlugin, PluginManager, PluginAPIFactory } from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    Location,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    Hover,\n    DocumentLink,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    TextDocumentSaveReason,\n    CodeAction,\n    TreeItem,\n    TreeItemCollapsibleState,\n    SymbolKind,\n    DocumentSymbol,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType\n} from './types-impl';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport Uri from 'vscode-uri';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExt } from './output-channel-registry';\nimport { TerminalServiceExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl, score } from './languages';\nimport { fromDocumentSelector } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl): PluginAPIFactory {\n\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const messageRegistryExt = new MessageRegistryExt(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl());\n    const editorsAndDocuments = rpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, new EditorsAndDocumentsExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocuments));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocuments));\n    const workspaceExt = rpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, new WorkspaceExtImpl(rpc, editorsAndDocuments));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = new OutputChannelRegistryExt(rpc);\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const commands: typeof theia.commands = {\n            // tslint:disable-next-line:no-any\n            registerCommand(command: theia.Command, handler?: <T>(...args: any[]) => T | Thenable<T>): Disposable {\n                return commandRegistry.registerCommand(command, handler);\n            },\n            // tslint:disable-next-line:no-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, args);\n            },\n            // tslint:disable-next-line:no-any\n            registerTextEditorCommand(command: theia.Command, callback: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void): Disposable {\n                throw new Error('Function registerTextEditorCommand is not implemented');\n            },\n            // tslint:disable-next-line:no-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler);\n            }\n        };\n\n        const window: typeof theia.window = {\n            get activeTextEditor() {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors() {\n                return editors.getVisibleTextEditors();\n            },\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            // tslint:disable-next-line:no-any\n            showQuickPick(items: any, options: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showQuickPick(items, options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showQuickPick(items, options);\n                }\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions) {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage(message: string,\n                optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n                // tslint:disable-next-line:no-any\n                ...items: any[]): PromiseLike<any> {\n                return messageRegistryExt.showInformationMessage(message, optionsOrFirstItem, items);\n            },\n            showWarningMessage(message: string,\n                optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n                // tslint:disable-next-line:no-any\n                ...items: any[]): PromiseLike<any> {\n                return messageRegistryExt.showWarningMessage(message, optionsOrFirstItem, items);\n            },\n            showErrorMessage(message: string,\n                optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n                // tslint:disable-next-line:no-any\n                ...items: any[]): PromiseLike<any> {\n                return messageRegistryExt.showErrorMessage(message, optionsOrFirstItem, items);\n            },\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<Uri | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            // tslint:disable-next-line:no-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken) {\n                if (token) {\n                    const coreEvent = Object.assign(token.onCancellationRequested, { maxListeners: 0 });\n                    const coreCancellationToken = { isCancellationRequested: token.isCancellationRequested, onCancellationRequested: coreEvent };\n                    return quickOpenExt.showInput(options, coreCancellationToken);\n                } else {\n                    return quickOpenExt.showInput(options);\n                }\n            },\n            createStatusBarItem(alignment?: theia.StatusBarAlignment, priority?: number): theia.StatusBarItem {\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority);\n            },\n            createOutputChannel(name: string): theia.OutputChannel {\n                return outputChannelRegistryExt.createOutputChannel(name);\n            },\n\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            get onDidCloseTerminal(): theia.Event<theia.Terminal> {\n                return terminalExt.onDidCloseTerminal;\n            },\n            set onDidCloseTerminal(event: theia.Event<theia.Terminal>) {\n                terminalExt.onDidCloseTerminal = event;\n            },\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: { treeDataProvider: theia.TreeDataProvider<T> }): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(viewId, options);\n            }\n        };\n\n        const workspace: typeof theia.workspace = {\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get textDocuments() {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            getConfiguration(section?, resource?): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: Uri;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = Uri.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof Uri) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject('illegal argument - uriOrFileNameOrOptions');\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            createFileSystemWatcher(globPattern: theia.GlobPattern,\n                ignoreCreateEvents?: boolean,\n                ignoreChangeEvents?: boolean,\n                ignoreDeleteEvents?: boolean): theia.FileSystemWatcher {\n                return workspaceExt.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n            },\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | undefined, maxResults?: number, token?: CancellationToken): PromiseLike<Uri[]> {\n                return workspaceExt.findFiles(include, undefined, maxResults, token);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider, options?: { isCaseSensitive?: boolean, isReadonly?: boolean }): theia.Disposable {\n                // FIXME: to implement\n                return new Disposable(() => { });\n            }\n        };\n\n        const env: typeof theia.env = {\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            }\n        };\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: Uri) {\n                // tslint:disable-next-line:no-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters);\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider);\n            },\n            registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerSignatureHelpProvider(selector, provider, ...triggerCharacters);\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider);\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider);\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider);\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters));\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerLinkProvider(selector, provider);\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider);\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider);\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider);\n            }\n        };\n\n        const plugins: typeof theia.plugins = {\n            // tslint:disable-next-line:no-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new Plugin(pluginManager, plg));\n            },\n            // tslint:disable-next-line:no-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId);\n                if (plg) {\n                    return new Plugin(pluginManager, plg);\n                }\n                return undefined;\n            }\n        };\n\n        const debug: typeof theia.debug = {\n            onDidChangeActiveDebugSession(listener, thisArg?, disposables?) {\n                // FIXME: to implement\n                return new Disposable(() => { });\n            },\n            onDidTerminateDebugSession(listener, thisArg?, disposables?) {\n                // FIXME: to implement\n                return new Disposable(() => { });\n            },\n            registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider): theia.Disposable {\n                // FIXME: to implement\n                return new Disposable(() => { });\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            commands,\n            window,\n            workspace,\n            env,\n            languages,\n            plugins,\n            debug,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: Uri,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            Location,\n            DiagnosticTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            ParameterInformation,\n            SignatureInformation,\n            SignatureHelp,\n            Hover,\n            DocumentLink,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            TextDocumentSaveReason,\n            CodeAction,\n            TreeItem,\n            TreeItemCollapsibleState,\n            SymbolKind,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FileChangeType\n        };\n    };\n}\n\nclass Plugin<T> implements theia.Plugin<T> {\n    id: string;\n    pluginPath: string;\n    isActive: boolean;\n    // tslint:disable-next-line:no-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n    constructor(private readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.isActive = true;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from '../api/plugin-api';\nimport { PreferenceSchema } from '@theia/core/lib/browser/preferences';\n\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    publisher: string;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration: PreferenceSchema;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    menus?: { [location: string]: PluginPackageMenu[] };\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n}\n\nexport interface PluginPackageMenu {\n    command: string;\n    group?: string;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\nexport const PluginDeployer = Symbol('PluginDeployer');\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\n\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext): Promise<void>;\n\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: {\n        frontend?: string;\n        backend?: string;\n    };\n    contributes?: PluginContribution;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    configuration?: PreferenceSchema;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    menus?: { [location: string]: Menu[] };\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n}\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command: string;\n    group?: string;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    source: PluginPackage;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport interface DebugConfiguration {\n    port?: number;\n    debugMode?: string;\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n    getHostedPlugin(): Promise<PluginMetadata | undefined>;\n\n    getDeployedMetadata(): Promise<PluginMetadata[]>;\n    getDeployedFrontendMetadata(): Promise<PluginMetadata[]>;\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<void>;\n    getDeployedBackendMetadata(): Promise<PluginMetadata[]>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<void>;\n\n    onMessage(message: string): Promise<void>;\n\n    isPluginValid(uri: string): Promise<boolean>;\n    runHostedPluginInstance(uri: string): Promise<string>;\n    runDebugHostedPluginInstance(uri: string, debugConfig: DebugConfiguration): Promise<string>;\n    terminateHostedPluginInstance(): Promise<void>;\n    isHostedPluginInstanceRunning(): Promise<boolean>;\n    getHostedPluginInstanceURI(): Promise<string>;\n    getHostedPluginURI(): Promise<string>;\n\n    runWatchCompilation(uri: string): Promise<void>;\n    stopWatchCompilation(uri: string): Promise<void>;\n    isWatchCompilationRunning(uri: string): Promise<boolean>;\n}\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin\n     */\n    deploy(pluginEntry: string): Promise<void>\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // tslint:disable-next-line:no-any\n    acceptMessage(jsonMessage: any): boolean;\n    // tslint:disable-next-line:no-any\n    onMessage(jsonMessage: any): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../api/plugin-api';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport URI from 'vscode-uri';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | undefined;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditors = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditors.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' doesn't exist`);\n            this.activeEditorId = delta.newActiveEditor;\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if (delta.removedDocuments || delta.addedDocuments) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            this._onDidChangeActiveTextEditors.fire(this.activeEditor());\n        } else if (this.editors.size === 0 && delta.removedEditors) {\n            this.activeEditorId = undefined;\n            this._onDidChangeActiveTextEditors.fire(undefined);\n        }\n\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport URI from 'vscode-uri/lib/umd';\nimport { Selection } from '../../api/plugin-api';\nimport { Range } from '../../api/model';\nimport * as Converter from '../type-converters';\nimport { createToken } from '../token-provider';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string\n    ) { }\n\n    provideCodeAction(resource: URI, rangeOrSelection: Range | Selection, context: monaco.languages.CodeActionContext): Promise<monaco.languages.CodeAction[]> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document form ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined\n        };\n\n        return Promise.resolve(this.provider.provideCodeActions(doc, ran, codeActionContext, createToken())).then(commandsOrActions => {\n            if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n                return undefined!;\n            }\n            const result: monaco.languages.CodeAction[] = [];\n            for (const candidate of commandsOrActions) {\n                if (!candidate) {\n                    continue;\n                }\n                if (CodeActionAdapter._isCommand(candidate)) {\n                    result.push({\n                        title: candidate.label || '',\n                        command: Converter.toInternalCommand(candidate)\n                    });\n                } else {\n                    if (codeActionContext.only) {\n                        if (!candidate.kind) {\n                            /* tslint:disable-next-line:max-line-length */\n                            console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                        } else if (!codeActionContext.only.contains(candidate.kind)) {\n                            /* tslint:disable-next-line:max-line-length */\n                            console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                        }\n                    }\n\n                    result.push({\n                        title: candidate.title,\n                        command: candidate.command && Converter.toInternalCommand(candidate.command),\n                        diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData) as monaco.editor.IMarker[],\n                        edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit) as monaco.languages.WorkspaceEdit,\n                        kind: candidate.kind && candidate.kind.value\n                    });\n                }\n            }\n\n            return result;\n        });\n\n    }\n\n    // tslint:disable-next-line:no-any\n    private static _isCommand(smth: any): smth is theia.Command {\n        return typeof (<theia.Command>smth).id === 'string';\n    }\n\n    // tslint:disable-next-line:no-any\n    private static _isSelection(obj: any): obj is Selection {\n        return (\n            obj\n            && (typeof obj.selectionStartLineNumber === 'number')\n            && (typeof obj.selectionStartColumn === 'number')\n            && (typeof obj.positionLineNumber === 'number')\n            && (typeof obj.positionColumn === 'number')\n        );\n    }\n\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../api/plugin-api';\nimport { Range as ARange } from '../api/model';\nimport URI from 'vscode-uri';\nimport { ok } from '../common/assert';\nimport { Range, Position, EndOfLine } from './types-impl';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private isDisposed = false;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        throw new Error('Method not implemented.');\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri() { return that.uri; },\n                get fileName() { return that.uri.fsPath; },\n                get isUntitled() { return that.uri.scheme === 'untitled'; },\n                get languageId() { return that.languageId; },\n                get version() { return that.versionId; },\n                get isClosed() { return that.isDisposed; },\n                get isDirty() { return that.dirty; },\n                save() { return that.save(); },\n                getText(range?) { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol() { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount() { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position) { return that.lineAt(lineOrPos); },\n                offsetAt(pos) { return that.offsetAt(pos); },\n                positionAt(offset) { return that.positionAt(offset); },\n                validateRange(ran) { return that.validateRange(ran); },\n                validatePosition(pos) { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?) { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.isDisposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // tslint:disable-next-line:no-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Terminal, TerminalOptions } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n    private readonly terminals: Map<number, Terminal> = new Map();\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    createTerminal(nameOrOptions: TerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): Terminal {\n        let options: TerminalOptions;\n        if (typeof nameOrOptions === 'object') {\n            options = nameOrOptions;\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n\n        const terminal = new TerminalExtImpl(this.proxy, options.name || 'Terminal');\n        terminal.create(options, shellPath, shellArgs);\n        terminal.processId.then(id => {\n            this.terminals.set(id, terminal);\n        });\n        return terminal;\n    }\n\n    $terminalClosed(id: number): void {\n        const terminal = this.terminals.get(id);\n        if (terminal) {\n            this.onDidCloseTerminalEmitter.fire(terminal);\n        }\n    }\n\n    public set onDidCloseTerminal(event: theia.Event<Terminal>) {\n        this.onDidCloseTerminalEmitter.event.apply(event);\n    }\n\n    public get onDidCloseTerminal(): theia.Event<Terminal> {\n        return this.onDidCloseTerminalEmitter.event;\n    }\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    termProcessId: PromiseLike<number>;\n\n    constructor(private readonly proxy: TerminalServiceMain, readonly name: string) { }\n\n    create(nameOrOptions: TerminalOptions, shellPath?: string, shellArgs?: string[]): void {\n        this.termProcessId = this.proxy.$createTerminal(nameOrOptions);\n    }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.termProcessId.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.termProcessId.then(id => this.proxy.$show(id));\n    }\n\n    hide(): void {\n        this.termProcessId.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.termProcessId.then(id => this.proxy.$dispose(id));\n    }\n\n    public get processId(): Thenable<number> {\n        return this.termProcessId;\n    }\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    var _disposable = { dispose: function () { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nvar CallbackList = /** @class */ (function () {\r\n    function CallbackList() {\r\n    }\r\n    CallbackList.prototype.add = function (callback, context, bucket) {\r\n        var _this = this;\r\n        if (context === void 0) { context = null; }\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: function () { return _this.remove(callback, context); } });\r\n        }\r\n    };\r\n    CallbackList.prototype.remove = function (callback, context) {\r\n        if (context === void 0) { context = null; }\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    };\r\n    CallbackList.prototype.invoke = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    CallbackList.prototype.isEmpty = function () {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    };\r\n    CallbackList.prototype.dispose = function () {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    };\r\n    return CallbackList;\r\n}());\r\nvar Emitter = /** @class */ (function () {\r\n    function Emitter(_options) {\r\n        this._options = _options;\r\n    }\r\n    Object.defineProperty(Emitter.prototype, \"event\", {\r\n        /**\r\n         * For the public to allow to subscribe\r\n         * to events from this Emitter\r\n         */\r\n        get: function () {\r\n            var _this = this;\r\n            if (!this._event) {\r\n                this._event = function (listener, thisArgs, disposables) {\r\n                    if (!_this._callbacks) {\r\n                        _this._callbacks = new CallbackList();\r\n                    }\r\n                    if (_this._options && _this._options.onFirstListenerAdd && _this._callbacks.isEmpty()) {\r\n                        _this._options.onFirstListenerAdd(_this);\r\n                    }\r\n                    _this._callbacks.add(listener, thisArgs);\r\n                    var result;\r\n                    result = {\r\n                        dispose: function () {\r\n                            _this._callbacks.remove(listener, thisArgs);\r\n                            result.dispose = Emitter._noop;\r\n                            if (_this._options && _this._options.onLastListenerRemove && _this._callbacks.isEmpty()) {\r\n                                _this._options.onLastListenerRemove(_this);\r\n                            }\r\n                        }\r\n                    };\r\n                    if (Array.isArray(disposables)) {\r\n                        disposables.push(result);\r\n                    }\r\n                    return result;\r\n                };\r\n            }\r\n            return this._event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    Emitter.prototype.fire = function (event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    };\r\n    Emitter.prototype.dispose = function () {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    };\r\n    Emitter._noop = function () { };\r\n    return Emitter;\r\n}());\r\nexports.Emitter = Emitter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nvar ResponseError = /** @class */ (function (_super) {\r\n    __extends(ResponseError, _super);\r\n    function ResponseError(code, message, data) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        _this.data = data;\r\n        Object.setPrototypeOf(_this, ResponseError.prototype);\r\n        return _this;\r\n    }\r\n    ResponseError.prototype.toJson = function () {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    };\r\n    return ResponseError;\r\n}(Error));\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nvar AbstractMessageType = /** @class */ (function () {\r\n    function AbstractMessageType(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    Object.defineProperty(AbstractMessageType.prototype, \"method\", {\r\n        get: function () {\r\n            return this._method;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AbstractMessageType.prototype, \"numberOfParams\", {\r\n        get: function () {\r\n            return this._numberOfParams;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return AbstractMessageType;\r\n}());\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nvar RequestType0 = /** @class */ (function (_super) {\r\n    __extends(RequestType0, _super);\r\n    function RequestType0(method) {\r\n        var _this = _super.call(this, method, 0) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType0;\r\n}(AbstractMessageType));\r\nexports.RequestType0 = RequestType0;\r\nvar RequestType = /** @class */ (function (_super) {\r\n    __extends(RequestType, _super);\r\n    function RequestType(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType;\r\n}(AbstractMessageType));\r\nexports.RequestType = RequestType;\r\nvar RequestType1 = /** @class */ (function (_super) {\r\n    __extends(RequestType1, _super);\r\n    function RequestType1(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType1;\r\n}(AbstractMessageType));\r\nexports.RequestType1 = RequestType1;\r\nvar RequestType2 = /** @class */ (function (_super) {\r\n    __extends(RequestType2, _super);\r\n    function RequestType2(method) {\r\n        var _this = _super.call(this, method, 2) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType2;\r\n}(AbstractMessageType));\r\nexports.RequestType2 = RequestType2;\r\nvar RequestType3 = /** @class */ (function (_super) {\r\n    __extends(RequestType3, _super);\r\n    function RequestType3(method) {\r\n        var _this = _super.call(this, method, 3) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType3;\r\n}(AbstractMessageType));\r\nexports.RequestType3 = RequestType3;\r\nvar RequestType4 = /** @class */ (function (_super) {\r\n    __extends(RequestType4, _super);\r\n    function RequestType4(method) {\r\n        var _this = _super.call(this, method, 4) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType4;\r\n}(AbstractMessageType));\r\nexports.RequestType4 = RequestType4;\r\nvar RequestType5 = /** @class */ (function (_super) {\r\n    __extends(RequestType5, _super);\r\n    function RequestType5(method) {\r\n        var _this = _super.call(this, method, 5) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType5;\r\n}(AbstractMessageType));\r\nexports.RequestType5 = RequestType5;\r\nvar RequestType6 = /** @class */ (function (_super) {\r\n    __extends(RequestType6, _super);\r\n    function RequestType6(method) {\r\n        var _this = _super.call(this, method, 6) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType6;\r\n}(AbstractMessageType));\r\nexports.RequestType6 = RequestType6;\r\nvar RequestType7 = /** @class */ (function (_super) {\r\n    __extends(RequestType7, _super);\r\n    function RequestType7(method) {\r\n        var _this = _super.call(this, method, 7) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType7;\r\n}(AbstractMessageType));\r\nexports.RequestType7 = RequestType7;\r\nvar RequestType8 = /** @class */ (function (_super) {\r\n    __extends(RequestType8, _super);\r\n    function RequestType8(method) {\r\n        var _this = _super.call(this, method, 8) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType8;\r\n}(AbstractMessageType));\r\nexports.RequestType8 = RequestType8;\r\nvar RequestType9 = /** @class */ (function (_super) {\r\n    __extends(RequestType9, _super);\r\n    function RequestType9(method) {\r\n        var _this = _super.call(this, method, 9) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return RequestType9;\r\n}(AbstractMessageType));\r\nexports.RequestType9 = RequestType9;\r\nvar NotificationType = /** @class */ (function (_super) {\r\n    __extends(NotificationType, _super);\r\n    function NotificationType(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType;\r\n}(AbstractMessageType));\r\nexports.NotificationType = NotificationType;\r\nvar NotificationType0 = /** @class */ (function (_super) {\r\n    __extends(NotificationType0, _super);\r\n    function NotificationType0(method) {\r\n        var _this = _super.call(this, method, 0) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType0;\r\n}(AbstractMessageType));\r\nexports.NotificationType0 = NotificationType0;\r\nvar NotificationType1 = /** @class */ (function (_super) {\r\n    __extends(NotificationType1, _super);\r\n    function NotificationType1(method) {\r\n        var _this = _super.call(this, method, 1) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType1;\r\n}(AbstractMessageType));\r\nexports.NotificationType1 = NotificationType1;\r\nvar NotificationType2 = /** @class */ (function (_super) {\r\n    __extends(NotificationType2, _super);\r\n    function NotificationType2(method) {\r\n        var _this = _super.call(this, method, 2) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType2;\r\n}(AbstractMessageType));\r\nexports.NotificationType2 = NotificationType2;\r\nvar NotificationType3 = /** @class */ (function (_super) {\r\n    __extends(NotificationType3, _super);\r\n    function NotificationType3(method) {\r\n        var _this = _super.call(this, method, 3) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType3;\r\n}(AbstractMessageType));\r\nexports.NotificationType3 = NotificationType3;\r\nvar NotificationType4 = /** @class */ (function (_super) {\r\n    __extends(NotificationType4, _super);\r\n    function NotificationType4(method) {\r\n        var _this = _super.call(this, method, 4) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType4;\r\n}(AbstractMessageType));\r\nexports.NotificationType4 = NotificationType4;\r\nvar NotificationType5 = /** @class */ (function (_super) {\r\n    __extends(NotificationType5, _super);\r\n    function NotificationType5(method) {\r\n        var _this = _super.call(this, method, 5) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType5;\r\n}(AbstractMessageType));\r\nexports.NotificationType5 = NotificationType5;\r\nvar NotificationType6 = /** @class */ (function (_super) {\r\n    __extends(NotificationType6, _super);\r\n    function NotificationType6(method) {\r\n        var _this = _super.call(this, method, 6) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType6;\r\n}(AbstractMessageType));\r\nexports.NotificationType6 = NotificationType6;\r\nvar NotificationType7 = /** @class */ (function (_super) {\r\n    __extends(NotificationType7, _super);\r\n    function NotificationType7(method) {\r\n        var _this = _super.call(this, method, 7) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType7;\r\n}(AbstractMessageType));\r\nexports.NotificationType7 = NotificationType7;\r\nvar NotificationType8 = /** @class */ (function (_super) {\r\n    __extends(NotificationType8, _super);\r\n    function NotificationType8(method) {\r\n        var _this = _super.call(this, method, 8) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType8;\r\n}(AbstractMessageType));\r\nexports.NotificationType8 = NotificationType8;\r\nvar NotificationType9 = /** @class */ (function (_super) {\r\n    __extends(NotificationType9, _super);\r\n    function NotificationType9(method) {\r\n        var _this = _super.call(this, method, 9) || this;\r\n        _this._ = undefined;\r\n        return _this;\r\n    }\r\n    return NotificationType9;\r\n}(AbstractMessageType));\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    var candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    var candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    var candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n/* tslint:disable:no-null-keyword no-shadowed-variable one-variable-per-declaration */\nexport interface IExpression {\n    // tslint:disable-next-line:no-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // tslint:disable-next-line:prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // tslint:disable-next-line:prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // tslint:disable-next-line:prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behaviour\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trival glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// tslint:disable-next-line:max-line-length\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function () {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename) {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename) {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename) {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common ppatterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string) {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // tslint:disable-next-line:no-shadowed-variable\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename) {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // tslint:disable-next-line:no-shadowed-variable\n    } : function (path, basename) {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string) {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// tslint:disable-next-line:no-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// tslint:disable-next-line:no-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string) {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // tslint:disable-next-line:no-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // tslint:disable-next-line:no-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>) {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]) {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]) {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// tslint:disable-next-line:no-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // tslint:disable-next-line:no-shadowed-variable\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string) {\n            // tslint:disable-next-line:no-shadowed-variable\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // tslint:disable-next-line:no-shadowed-variable\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>) {\n        let name: string = null!;\n\n        // tslint:disable-next-line:no-shadowed-variable\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// tslint:disable-next-line:no-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename) {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain } from '../api/plugin-api';\nimport { OpenDialogOptions, SaveDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport Uri from 'vscode-uri';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<Uri[] | undefined> {\n        const optionsMain = {\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: options.canSelectFiles,\n            canSelectFolders: options.canSelectFolders,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = Uri.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<Uri | undefined> {\n        const optionsMain = {\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(Uri.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event } from 'vscode-jsonrpc';\n\n/**\n * Provides a token (for now it's a NONE)\n */\n// tslint:disable-next-line:no-any\nexport function createToken(): any {\n    return Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryMain\n} from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string): theia.OutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        } else {\n            return new OutputChannelImpl(name, this.proxy);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* tslint:disable:no-any */\n\nimport { createProxyIdentifier, ProxyIdentifier } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage } from '../common/plugin-protocol';\nimport { QueryParameters } from '../common/env';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { TextEditorLineNumbersStyle, EndOfLine, OverviewRulerLane, IndentAction, FileOperationOptions } from '../plugin/types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { PreferenceChange } from '@theia/core/lib/browser';\nimport { ConfigurationTarget } from '../plugin/types-impl';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    FormattingOptions,\n    SingleEditOperation as ModelSingleEditOperation,\n    Definition,\n    DefinitionLink,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit\n} from './model';\n\nexport interface PluginInitData {\n    plugins: PluginMetadata[];\n    preferences: { [key: string]: any };\n    env: EnvInit;\n}\n\nexport interface Plugin {\n    pluginPath: string;\n    pluginFolder: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    }\n};\n\nexport interface PluginManagerExt {\n    $stopPlugin(contextPath: string): PromiseLike<void>;\n\n    $init(pluginInit: PluginInitData): PromiseLike<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.Command): void;\n\n    $unregisterCommand(id: string): void;\n    $executeCommand<T>(id: string, args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T>;\n}\n\nexport interface TerminalServiceExt {\n    $terminalClosed(id: number): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(options: theia.TerminalOptions): PromiseLike<number>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: number, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: number, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hide(id: number): void;\n\n    /**\n     * Distroy terminal.\n     * @param id - terminal id.\n     */\n    $dispose(id: number): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport interface PickOptions {\n    placeHolder?: string;\n    autoFocus?: AutoFocus;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    ignoreFocusLost?: boolean;\n    quickNavigationConfiguration?: {}; // TODO\n    contextKey?: string;\n    canSelectMany?: boolean;\n}\n\nexport interface PickOpenItem {\n    handle: number;\n    id?: string;\n    label: string;\n    description?: string;\n    detail?: string;\n    picked?: boolean;\n}\n\nexport interface MessageRegistryMain {\n    $showInformationMessage(message: string,\n        optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n        items: string[] | theia.MessageItem[]): PromiseLike<string | theia.MessageItem | undefined>;\n    $showWarningMessage(message: string,\n        optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n        items: string[] | theia.MessageItem[]): PromiseLike<string | theia.MessageItem | undefined>;\n    $showErrorMessage(message: string,\n        optionsOrFirstItem: theia.MessageOptions | string | theia.MessageItem,\n        items: string[] | theia.MessageItem[]): PromiseLike<string | theia.MessageItem | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(text: string,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        tooltip: string | undefined,\n        command: string | undefined): PromiseLike<string>;\n    $dispose(id: string): void;\n}\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): PromiseLike<string | undefined> | undefined;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickOpenMain {\n    $show(options: PickOptions): Promise<number | number[]>;\n    $setItems(items: PickOpenItem[]): Promise<any>;\n    $setError(error: Error): Promise<any>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean): Promise<string | undefined>;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: theia.WorkspaceFoldersChangeEvent): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined>;\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): void;\n    $reveal(treeViewId: string, treeItemId: string): Promise<any>;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemId: string): Promise<any>;\n}\n\nexport class TreeViewItem {\n\n    id: string;\n\n    label: string;\n\n    icon?: string;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: string | UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: number;\n    letterSpacing?: string;\n\n    gutterIconPath?: string | UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    // $tryShowTextDocument(resource: UriComponents, options: TextDocumentShowOptions): Promise<string>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    // $tryShowEditor(id: string, position: EditorPosition): Promise<void>;\n    // $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    // $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    newActiveEditor?: string;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryOpenDocument(uri: UriComponents): Promise<void>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource: any | undefined\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource: any | undefined\n    ): PromiseLike<void>;\n}\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChange): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface EnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    action: EnterAction;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n}\n\nexport interface ResourceFileEditDto {\n    oldUri: UriComponents;\n    newUri: UriComponents;\n    options: FileOperationOptions;\n}\n\nexport interface ResourceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edits: TextEdit[];\n}\n\nexport interface WorkspaceEditDto {\n    edits: (ResourceFileEditDto | ResourceTextEditDto)[];\n    rejectReason?: string;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position, context: CompletionContext): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, resource: UriComponents, position: Position, completion: Completion): Promise<Completion>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position): Promise<Definition | DefinitionLink[] | undefined>;\n    $provideSignatureHelp(handle: number, resource: UriComponents, position: Position): Promise<SignatureHelp | undefined>;\n    $provideHover(handle: number, resource: UriComponents, position: Position): Promise<Hover | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents, options: FormattingOptions): Promise<ModelSingleEditOperation[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range, options: FormattingOptions): Promise<ModelSingleEditOperation[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions\n    ): Promise<ModelSingleEditOperation[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink): Promise<DocumentLink | undefined>;\n    $provideCodeLenses(handle: number, resource: UriComponents): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol): Promise<CodeLensSymbol | undefined>;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: monaco.languages.CodeActionContext\n    ): Promise<monaco.languages.CodeAction[]>;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerDefinitionProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, selector: SerializedDocumentFilter[], triggerCharacters: string[]): void;\n    $registerHoverProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, selector: SerializedDocumentFilter[], codeActionKinds?: string[]): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [UriComponents, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n};\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../api/model';\nimport { RPCProtocol } from '../../api/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../api/plugin-api';\nimport URI from 'vscode-uri';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined) {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri, []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // tslint:disable-next-line:no-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined) {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [URI, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri, uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri, uriMarkers]);\n                }\n            } else {\n                markers.push([uri, []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic colection\n    private nextId: number;\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n        this.nextId = 0;\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnisticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): number {\n        return this.nextId++;\n    }\n\n    private getAllDiagnisticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path_1 = require(\"path\");\r\nvar os_1 = require(\"os\");\r\nvar crypto_1 = require(\"crypto\");\r\nvar net_1 = require(\"net\");\r\nvar messageReader_1 = require(\"./messageReader\");\r\nvar messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    var randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return \"\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-\" + randomSuffix + \"-sock\";\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), \"vscode-\" + randomSuffix + \".sock\");\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var connectResolve;\r\n    var connected = new Promise(function (resolve, _reject) {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise(function (resolve, reject) {\r\n        var server = net_1.createServer(function (socket) {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, function () {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: function () { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding) {\r\n    if (encoding === void 0) { encoding = 'utf-8'; }\r\n    var socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { sep } from './paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../api/model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { createToken } from '../token-provider';\nimport { CommandsConverter } from '../command-registry';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n\tprivate static readonly BAD_CMD: theia.Command = { id: 'missing', label: '<<MISSING COMMAND>>' };\n\n\tprivate cacheId = 0;\n\tprivate cache = new Map<number, theia.CodeLens>();\n\n\tconstructor(\n\t\tprivate readonly provider: theia.CodeLensProvider,\n\t\tprivate readonly documents: DocumentsExtImpl,\n\t\tprivate readonly commands: CommandsConverter\n\t) { }\n\n\tprovideCodeLenses(resource: URI): Promise<CodeLensSymbol[] | undefined> {\n\t\tconst document = this.documents.getDocumentData(resource);\n\t\tif (!document) {\n\t\t\treturn Promise.reject(new Error(`There is no document for ${resource}`));\n\t\t}\n\n\t\tconst doc = document.document;\n\n\t\treturn Promise.resolve(this.provider.provideCodeLenses(doc, createToken())).then(lenses => {\n\t\t\tif (Array.isArray(lenses)) {\n\t\t\t\treturn lenses.map(lens => {\n\t\t\t\t\tconst id = this.cacheId++;\n\t\t\t\t\tconst lensSymbol = ObjectIdentifier.mixin({\n\t\t\t\t\t\trange: Converter.fromRange(lens.range)!,\n\t\t\t\t\t\tcommand: this.commands.toInternal(lens.command)\n\t\t\t\t\t}, id);\n\t\t\t\t\tthis.cache.set(id, lens);\n\t\t\t\t\treturn lensSymbol;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tresolveCodeLens(resource: URI, symbol: CodeLensSymbol): Promise<CodeLensSymbol | undefined> {\n\t\tconst lens = this.cache.get(ObjectIdentifier.of(symbol));\n\t\tif (!lens) {\n\t\t\treturn Promise.resolve(undefined);\n\t\t}\n\n\t\tlet resolve: Promise<theia.CodeLens | undefined>;\n\t\tif (typeof this.provider.resolveCodeLens !== 'function' || lens.isResolved) {\n\t\t\tresolve = Promise.resolve(lens);\n\t\t} else {\n\t\t\tresolve = Promise.resolve(this.provider.resolveCodeLens(lens, createToken()));\n\t\t}\n\n\t\treturn resolve.then(newLens => {\n\t\t\tnewLens = newLens || lens;\n\t\t\tsymbol.command = this.commands.toInternal(newLens.command || CodeLensAdapter.BAD_CMD);\n\t\t\treturn symbol;\n\t\t});\n\t}\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport function hookCancellationToken<T>(token: CancellationToken, promise: Promise<T>): PromiseLike<T> {\n    return new Promise<T>((resolve, reject) => {\n        const sub = token.onCancellationRequested(() => reject('This promise is cancelled'));\n        promise.then(value => {\n            sub.dispose();\n            resolve(value);\n        }).catch(err => {\n            sub.dispose();\n            reject(err);\n        });\n    });\n}\n\nexport function anyPromise<T>(promises: PromiseLike<T>[]): Promise<{ key: number; value: PromiseLike<T>; }> {\n    const result = new Deferred<{ key: number; value: PromiseLike<T>; }>();\n    if (promises.length === 0) {\n        result.resolve();\n    }\n\n    promises.forEach((val, key) => {\n        Promise.resolve(promises[key]).then(() => {\n            result.resolve({ key: key, value: promises[key] });\n        }, err => {\n            result.resolve({ key: key, value: promises[key] });\n        });\n    });\n    return result.promise;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    WorkspaceFolder,\n    WorkspaceFoldersChangeEvent,\n    WorkspaceFolderPickOptions,\n    GlobPattern,\n    FileSystemWatcher,\n    TextDocumentContentProvider,\n    Disposable\n} from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext\n} from '../api/plugin-api';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport URI from 'vscode-uri';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n\n    private workspaceFoldersChangedEmitter = new Emitter<WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: WorkspaceFolder[] | undefined;\n\n    private documentContentProviders = new Map<string, TextDocumentContentProvider>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n    }\n\n    get workspaceFolders(): WorkspaceFolder[] | undefined {\n        return this.folders;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceFoldersChangeEvent): void {\n        this.folders = event.added;\n        this.workspaceFoldersChangedEmitter.fire(event);\n    }\n\n    pickWorkspaceFolder(options?: WorkspaceFolderPickOptions): PromiseLike<WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            } as WorkspaceFolderPickOptionsMain;\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: GlobPattern, exclude?: GlobPattern | undefined, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = false;\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false;\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(URI.revive) : []);\n    }\n\n    createFileSystemWatcher(globPattern: GlobPattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): FileSystemWatcher {\n        // FIXME: to implement\n        return new Proxy(<FileSystemWatcher>{}, {});\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: TextDocumentContentProvider): Disposable {\n        if (scheme === 'file' || scheme === 'untitled' || this.documentContentProviders.has(scheme)) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose() {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): string {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable:no-any\n\nimport { Disposable } from './disposable';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]): Disposable;\n    /**\n     * An emitter will print a warning if more listeners are added for this event.\n     * The event.maxListeners allows the limit to be modified for this specific event.\n     * The value can be set to 0 to indicate an unlimited number of listener.\n     */\n    maxListeners: number\n}\n\nexport namespace Event {\n    const _disposable = { dispose() { } };\n    export const None: Event<any> = Object.assign(function () { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n}\n\nclass CallbackList {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    public invoke(...args: any[]): any[] {\n        if (!this._callbacks) {\n            return [];\n        }\n\n        const ret: any[] = [];\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        for (let i = 0; i < callbacks.length; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T> {\n\n    private static _noop = function () { };\n\n    private _event: Event<T>;\n    private _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    constructor(private _options?: EmitterOptions) {\n    }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                this.checkMaxListeners(this._event.maxListeners);\n\n                let result: Disposable;\n                result = {\n                    dispose: () => {\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n\n                return result;\n            }, {\n                    maxListeners: 30\n                }\n            );\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): void {\n        if (maxListeners === 0 || !this._callbacks) {\n            return;\n        }\n        const count = this._callbacks.length;\n        if (count > maxListeners) {\n            console.warn(new Error(`Possible Emitter memory leak detected. ${maxListeners} exit listeners added. Use event.maxListeners to increase limit`));\n        }\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TreeDataProvider, TreeView, TreeViewExpansionEvent } from '@theia/plugin';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable } from '../types-impl';\nimport { PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem } from '../../api/plugin-api';\nimport { RPCProtocol } from '../../api/rpc-protocol';\nimport { CommandRegistryImpl } from '../command-registry';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n\n    private proxy: TreeViewsMain;\n\n    private treeViews: Map<string, TreeViewExtImpl<any>> = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, private commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n    }\n\n    registerTreeDataProvider<T>(treeViewId: string, treeDataProvider: TreeDataProvider<T>): Disposable {\n        const treeView = this.createTreeView(treeViewId, { treeDataProvider });\n\n        return Disposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(treeViewId: string, options: { treeDataProvider: TreeDataProvider<T> }): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl(treeViewId, options.treeDataProvider, this.proxy, this.commandRegistry);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n\n            get selection() {\n                return treeView.selectedElements;\n            },\n\n            reveal: (element: T, selectionOptions: { select?: boolean }): Thenable<void> =>\n                treeView.reveal(element, selectionOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemId: string): Promise<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error('No tree view with id' + treeViewId);\n        }\n\n        treeView.onSelectionChanged(treeItemId);\n    }\n\n}\n\nclass TreeViewExtImpl<T> extends Disposable {\n\n    private onDidExpandElementEmmiter: Emitter<TreeViewExpansionEvent<T>> = new Emitter<TreeViewExpansionEvent<T>>();\n    public readonly onDidExpandElement = this.onDidExpandElementEmmiter.event;\n\n    private onDidCollapseElementEmmiter: Emitter<TreeViewExpansionEvent<T>> = new Emitter<TreeViewExpansionEvent<T>>();\n    public readonly onDidCollapseElement = this.onDidCollapseElementEmmiter.event;\n\n    private selection: T[] = [];\n    get selectedElements(): T[] { return this.selection; }\n\n    private cache: Map<string, T> = new Map<string, T>();\n\n    private idCounter: number = 0;\n\n    constructor(\n        private treeViewId: string,\n        private treeDataProvider: TreeDataProvider<T>,\n        private proxy: TreeViewsMain,\n        private commandRegistry: CommandRegistryImpl) {\n\n        super(() => {\n            this.dispose();\n        });\n\n        proxy.$registerTreeDataProvider(treeViewId);\n\n        if (treeDataProvider.onDidChangeTreeData) {\n            treeDataProvider.onDidChangeTreeData((e: T) => {\n                proxy.$refresh(treeViewId);\n            });\n        }\n    }\n\n    dispose() {\n    }\n\n    async reveal(element: T, selectionOptions?: { select?: boolean }): Promise<void> {\n        // find element id in a cache\n        let elementId;\n        this.cache.forEach((el, id) => {\n            if (Object.is(el, element)) {\n                elementId = id;\n            }\n        });\n\n        if (elementId) {\n            return this.proxy.$reveal(this.treeViewId, elementId);\n        }\n    }\n\n    generateId(): string {\n        this.idCounter++;\n        return 'item-' + this.idCounter;\n    }\n\n    async getChildren(treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        // get element from a cache\n        const cachedElement: T | undefined = this.cache.get(treeItemId);\n\n        // ask data provider for children for cached element\n        const result = await this.treeDataProvider.getChildren(cachedElement);\n\n        if (result) {\n            const treeItems: TreeViewItem[] = [];\n            const promises = result.map(async value => {\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = this.generateId();\n\n                // Add element to the cache\n                this.cache.set(id, value);\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem = await this.treeDataProvider.getTreeItem(value);\n\n                // Convert theia.TreeItem to the TreeViewItem\n\n                // Take a label\n                let label = treeItem.label;\n\n                // Use resource URI if label is not set\n                if (!label && treeItem.resourceUri) {\n                    label = treeItem.resourceUri.path.toString();\n                    label = decodeURIComponent(label);\n                    if (label.indexOf('/') >= 0) {\n                        label = label.substring(label.lastIndexOf('/') + 1);\n                    }\n                }\n\n                // Use item ID if item label is still not set\n                if (!label) {\n                    label = id;\n                }\n\n                // Take the icon\n                // currently only icons from font-awesome are supported\n                let icon = undefined;\n                if (typeof treeItem.iconPath === 'string') {\n                    icon = treeItem.iconPath;\n                }\n\n                const treeViewItem = {\n                    id,\n                    label: label,\n                    icon,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState\n                } as TreeViewItem;\n\n                treeItems.push(treeViewItem);\n            });\n\n            await Promise.all(promises);\n            return treeItems;\n        } else {\n            return undefined;\n        }\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement: T | undefined = this.cache.get(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmmiter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement: T | undefined = this.cache.get(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmmiter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onSelectionChanged(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement: T | undefined = this.cache.get(treeItemId);\n\n        if (cachedElement) {\n            this.selection = [cachedElement];\n\n            // Ask data provider for a tree item for the value\n            const treeItem = await this.treeDataProvider.getTreeItem(cachedElement);\n\n            if (treeItem.command) {\n                this.commandRegistry.executeCommand(treeItem.command.id, treeItem.command.arguments ?\n                    treeItem.command.arguments : []);\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/strings.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './char-code';\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// tslint:disable-next-line:no-any\nexport function ok(val?: any, message?: string) {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../api/model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { createToken } from '../token-provider';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, createToken())).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.fromDocumentLink(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, undefined)).then(value => {\n            if (value) {\n                return Converter.fromDocumentLink(value);\n            }\n            return undefined;\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar events_1 = require(\"./events\");\r\nvar Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nvar shortcutEvent = Object.freeze(function (callback, context) {\r\n    var handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose: function () { clearTimeout(handle); } };\r\n});\r\nvar MutableToken = /** @class */ (function () {\r\n    function MutableToken() {\r\n        this._isCancelled = false;\r\n    }\r\n    MutableToken.prototype.cancel = function () {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(MutableToken.prototype, \"isCancellationRequested\", {\r\n        get: function () {\r\n            return this._isCancelled;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MutableToken.prototype, \"onCancellationRequested\", {\r\n        get: function () {\r\n            if (this._isCancelled) {\r\n                return shortcutEvent;\r\n            }\r\n            if (!this._emitter) {\r\n                this._emitter = new events_1.Emitter();\r\n            }\r\n            return this._emitter.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return MutableToken;\r\n}());\r\nvar CancellationTokenSource = /** @class */ (function () {\r\n    function CancellationTokenSource() {\r\n    }\r\n    Object.defineProperty(CancellationTokenSource.prototype, \"token\", {\r\n        get: function () {\r\n            if (!this._token) {\r\n                // be lazy and create the token only when\r\n                // actually needed\r\n                this._token = new MutableToken();\r\n            }\r\n            return this._token;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CancellationTokenSource.prototype.cancel = function () {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    };\r\n    CancellationTokenSource.prototype.dispose = function () {\r\n        this.cancel();\r\n    };\r\n    return CancellationTokenSource;\r\n}());\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n\t * An event emitted when cancellation is requested\n\t * @event\n\t */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// tslint:disable-next-line:no-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose() { clearTimeout(handle); } };\n}, { maxListeners: 0 }));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from 'vscode-uri/lib/umd';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../api/model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../api/plugin-api';\nimport { createToken } from '../token-provider';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, createToken())).then(value => {\n            /* tslint:disable-next-line:no-any */\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// tslint:disable-next-line:no-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// tslint:disable-next-line:no-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Is = require(\"./is\");\r\nvar messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nvar messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nvar messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nvar events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nvar cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nvar linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: function () { },\r\n    warn: function () { },\r\n    info: function () { },\r\n    log: function () { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nvar ConnectionError = /** @class */ (function (_super) {\r\n    __extends(ConnectionError, _super);\r\n    function ConnectionError(code, message) {\r\n        var _this = _super.call(this, message) || this;\r\n        _this.code = code;\r\n        Object.setPrototypeOf(_this, ConnectionError.prototype);\r\n        return _this;\r\n    }\r\n    return ConnectionError;\r\n}(Error));\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    var sequenceNumber = 0;\r\n    var notificationSquenceNumber = 0;\r\n    var unknownResponseSquenceNumber = 0;\r\n    var version = '2.0';\r\n    var starRequestHandler = undefined;\r\n    var requestHandlers = Object.create(null);\r\n    var starNotificationHandler = undefined;\r\n    var notificationHandlers = Object.create(null);\r\n    var timer;\r\n    var messageQueue = new linkedMap_1.LinkedMap();\r\n    var responsePromises = Object.create(null);\r\n    var requestTokens = Object.create(null);\r\n    var trace = Trace.Off;\r\n    var tracer;\r\n    var state = ConnectionState.New;\r\n    var errorEmitter = new events_1.Emitter();\r\n    var closeEmitter = new events_1.Emitter();\r\n    var unhandledNotificationEmitter = new events_1.Emitter();\r\n    var disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(function () {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        var message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    var callback = function (message) {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                var key = createRequestQueueKey(message.params.id);\r\n                var toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    var response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            var message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        var element = requestHandlers[requestMessage.method];\r\n        var type;\r\n        var requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        var startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            var cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            var tokenKey_1 = String(requestMessage.id);\r\n            requestTokens[tokenKey_1] = cancellationSource;\r\n            try {\r\n                var handlerResult = void 0;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler.apply(void 0, requestMessage.params.concat([cancellationSource.token])) : starRequestHandler.apply(void 0, [requestMessage.method].concat(requestMessage.params, [cancellationSource.token]));\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                var promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey_1];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then(function (resultOrError) {\r\n                        delete requestTokens[tokenKey_1];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, function (error) {\r\n                        delete requestTokens[tokenKey_1];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed with message: \" + error.message), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed unexpectedly without providing any details.\"), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey_1];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey_1];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed with message: \" + error.message), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, \"Request \" + requestMessage.method + \" failed unexpectedly without providing any details.\"), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, \"Unhandled method \" + requestMessage.method), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(\"Received response message without id: Error is: \\n\" + JSON.stringify(responseMessage.error, undefined, 4));\r\n            }\r\n            else {\r\n                logger.error(\"Received response message without id. No further error information provided.\");\r\n            }\r\n        }\r\n        else {\r\n            var key = String(responseMessage.id);\r\n            var responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        var error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(\"Response handler '\" + responsePromise.method + \"' failed with message: \" + error.message);\r\n                    }\r\n                    else {\r\n                        logger.error(\"Response handler '\" + responsePromise.method + \"' failed unexpectedly.\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        var type = undefined;\r\n        var notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = function (params) {\r\n                var id = params.id;\r\n                var source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            var element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler.apply(void 0, message.params) : starNotificationHandler.apply(void 0, [message.method].concat(message.params));\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(\"Notification handler '\" + message.method + \"' failed with message: \" + error.message);\r\n                }\r\n                else {\r\n                    logger.error(\"Notification handler '\" + message.method + \"' failed unexpectedly.\");\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(\"Received message which is neither a response nor a notification message:\\n\" + JSON.stringify(message, null, 4));\r\n        // Test whether we find an id to reject the promise\r\n        var responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            var key = String(responseMessage.id);\r\n            var responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose && message.params) {\r\n            data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n        }\r\n        tracer.log(\"Sending request '\" + message.method + \" - (\" + message.id + \")'.\", data);\r\n    }\r\n    function traceSendNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.params) {\r\n                data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                data = 'No parameters provided.\\n\\n';\r\n            }\r\n        }\r\n        tracer.log(\"Sending notification '\" + message.method + \"'.\", data);\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.error && message.error.data) {\r\n                data = \"Error data: \" + JSON.stringify(message.error.data, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                if (message.result) {\r\n                    data = \"Result: \" + JSON.stringify(message.result, null, 4) + \"\\n\\n\";\r\n                }\r\n                else if (message.error === void 0) {\r\n                    data = 'No result returned.\\n\\n';\r\n                }\r\n            }\r\n        }\r\n        tracer.log(\"Sending response '\" + method + \" - (\" + message.id + \")'. Processing request took \" + (Date.now() - startTime) + \"ms\", data);\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose && message.params) {\r\n            data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n        }\r\n        tracer.log(\"Received request '\" + message.method + \" - (\" + message.id + \")'.\", data);\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.params) {\r\n                data = \"Params: \" + JSON.stringify(message.params, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                data = 'No parameters provided.\\n\\n';\r\n            }\r\n        }\r\n        tracer.log(\"Received notification '\" + message.method + \"'.\", data);\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        var data = undefined;\r\n        if (trace === Trace.Verbose) {\r\n            if (message.error && message.error.data) {\r\n                data = \"Error data: \" + JSON.stringify(message.error.data, null, 4) + \"\\n\\n\";\r\n            }\r\n            else {\r\n                if (message.result) {\r\n                    data = \"Result: \" + JSON.stringify(message.result, null, 4) + \"\\n\\n\";\r\n                }\r\n                else if (message.error === void 0) {\r\n                    data = 'No result returned.\\n\\n';\r\n                }\r\n            }\r\n        }\r\n        if (responsePromise) {\r\n            var error = message.error ? \" Request failed: \" + message.error.message + \" (\" + message.error.code + \").\" : '';\r\n            tracer.log(\"Received response '\" + responsePromise.method + \" - (\" + message.id + \")' in \" + (Date.now() - responsePromise.timerStart) + \"ms.\" + error, data);\r\n        }\r\n        else {\r\n            tracer.log(\"Received response \" + message.id + \" without active response promise.\", data);\r\n        }\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        var result;\r\n        var numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (var i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (var i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    var connection = {\r\n        sendNotification: function (type) {\r\n            var params = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                params[_i - 1] = arguments[_i];\r\n            }\r\n            throwIfClosedOrDisposed();\r\n            var method;\r\n            var messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            var notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: function (type, handler) {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler: handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type: type, handler: handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: function (type) {\r\n            var params = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                params[_i - 1] = arguments[_i];\r\n            }\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            var method;\r\n            var messageParams;\r\n            var token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        var last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(function (value) { return undefinedToNull(value); });\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(function (value) { return undefinedToNull(value); });\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                var numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            var id = sequenceNumber++;\r\n            var result = new Promise(function (resolve, reject) {\r\n                var requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                var responsePromise = { method: method, timerStart: Date.now(), resolve: resolve, reject: reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(function () {\r\n                    connection.sendNotification(CancelNotification.type, { id: id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: function (type, handler) {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler: handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type: type, handler: handler };\r\n                }\r\n            }\r\n        },\r\n        trace: function (_value, _tracer, sendNotification) {\r\n            if (sendNotification === void 0) { sendNotification = false; }\r\n            trace = _value;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: function () {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            var error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach(function (key) {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: function () {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: function () {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, function (params) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    var reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    var writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as theia from '@theia/plugin';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../api/plugin-api';\nimport { RPCProtocol } from '../api/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { Command } from '../api/model';\nimport { ObjectIdentifier } from '../common/object-identifier';\n\n// tslint:disable-next-line:no-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T>;\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private commands = new Map<string, Handler>();\n\n    private readonly converter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.converter = new CommandsConverter(this);\n    }\n\n    getConverter(): CommandsConverter {\n        return this.converter;\n    }\n\n    registerCommand(command: theia.Command, handler?: Handler): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        if (handler) {\n            this.commands.set(command.id, handler);\n        }\n        this.proxy.$registerCommand(command);\n\n        return Disposable.create(() => {\n            this.proxy.$unregisterCommand(command.id);\n        });\n\n    }\n\n    registerHandler(commandId: string, handler: Handler): Disposable {\n        if (this.commands.has(commandId)) {\n            throw new Error(`Command ${commandId} already has handler`);\n        }\n        this.commands.set(commandId, handler);\n        return Disposable.create(() => {\n            this.proxy.$unregisterCommand(commandId);\n        });\n    }\n\n    dispose(): void {\n        throw new Error('Method not implemented.');\n    }\n\n    // tslint:disable-next-line:no-any\n    $executeCommand<T>(id: string, args: any[]): PromiseLike<T> {\n        if (this.commands.has(id)) {\n            return this.executeLocalCommand(id, args);\n        } else {\n            return Promise.reject(`Command: ${id} does not exist.`);\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    executeCommand<T>(id: string, args: any[]): PromiseLike<T | undefined> {\n        if (this.commands.has(id)) {\n            return this.executeLocalCommand(id, args);\n        } else {\n            return this.proxy.$executeCommand(id, args);\n        }\n    }\n\n    // tslint:disable-next-line:no-any\n    private executeLocalCommand<T>(id: string, args: any[]): PromiseLike<T> {\n        const handler = this.commands.get(id);\n        if (handler) {\n            return Promise.resolve(handler(args));\n        } else {\n            return Promise.reject(new Error(`Command ${id} doesn't exist`));\n        }\n    }\n}\n\n/** Converter between internal and api commands. */\nexport class CommandsConverter {\n\n    private readonly delegatingCommandId: string;\n\n    private cacheId = 0;\n    private cache = new Map<number, theia.Command>();\n\n    constructor(private readonly commands: CommandRegistryImpl) {\n        this.delegatingCommandId = `_internal_command_delegation_${Date.now()}`;\n        this.commands.registerHandler(this.delegatingCommandId, this.executeConvertedCommand);\n    }\n\n    toInternal(command: theia.Command | undefined): Command | undefined {\n        if (!command || !command.label) {\n            return undefined;\n        }\n\n        const result: Command = {\n            id: command.id,\n            title: command.label\n        };\n\n        if (command.id && !CommandsConverter.isFalsyOrEmpty(command.arguments)) {\n            const id = this.cacheId++;\n            ObjectIdentifier.mixin(result, id);\n            this.cache.set(id, command);\n\n            result.id = this.delegatingCommandId;\n            result.arguments = [id];\n        }\n\n        if (command.tooltip) {\n            result.tooltip = command.tooltip;\n        }\n\n        return result;\n    }\n\n    fromInternal(command: Command | undefined): theia.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n\n        const id = ObjectIdentifier.of(command);\n        if (typeof id === 'number') {\n            return this.cache.get(id);\n        } else {\n            return {\n                id: command.id,\n                label: command.title,\n                arguments: command.arguments\n            };\n        }\n    }\n\n    private executeConvertedCommand(...args: any[]): PromiseLike<any> {\n        const actualCmd = this.cache.get(args[0]);\n        if (!actualCmd) {\n            return Promise.resolve(undefined);\n        }\n        return this.commands.executeCommand(actualCmd.id, actualCmd.arguments || []);\n    }\n\n    /**\n     * @returns `false` if the provided object is an array and not empty.\n     */\n    private static isFalsyOrEmpty(obj: any): boolean {\n        return !Array.isArray(obj) || (<Array<any>>obj).length === 0;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt } from '../api/plugin-api';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    constructor() {\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorPosition, Selection, Position, DecorationOptions, WorkspaceEditDto, ResourceTextEditDto, ResourceFileEditDto } from '../api/plugin-api';\nimport {\n    Range,\n    Hover,\n    MarkdownString,\n    CompletionType,\n    SingleEditOperation,\n    MarkerData,\n    RelatedInformation,\n    Location,\n    DefinitionLink,\n    DocumentLink,\n    Command\n} from '../api/model';\nimport * as theia from '@theia/plugin';\nimport * as types from './types-impl';\nimport { LanguageSelector, LanguageFilter, RelativePattern } from './languages';\nimport { isMarkdownString } from './markdown-string';\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    }\n\n    return undefined;\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: Range): types.Range {\n    // if (!range) {\n    //     return undefined;\n    // }\n\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: theia.Range | undefined): Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\n// tslint:disable-next-line:no-any\nfunction isDecorationOptions(something: any): something is theia.DecorationOptions {\n    return (typeof something.range !== 'undefined');\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // tslint:disable-next-line:no-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map((r): DecorationOptions =>\n            ({\n                range: fromRange(r)!\n            }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): MarkdownString[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\n// tslint:disable-next-line:no-any\nfunction isCodeblock(thing: any): thing is Codeblock {\n    return thing && typeof thing === 'object'\n        && typeof (<Codeblock>thing).language === 'string'\n        && typeof (<Codeblock>thing).value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): MarkdownString {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (isMarkdownString(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: <string>markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.base, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): CompletionType {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return 'method';\n        case types.CompletionItemKind.Function: return 'function';\n        case types.CompletionItemKind.Constructor: return 'constructor';\n        case types.CompletionItemKind.Field: return 'field';\n        case types.CompletionItemKind.Variable: return 'variable';\n        case types.CompletionItemKind.Class: return 'class';\n        case types.CompletionItemKind.Interface: return 'interface';\n        case types.CompletionItemKind.Struct: return 'struct';\n        case types.CompletionItemKind.Module: return 'module';\n        case types.CompletionItemKind.Property: return 'property';\n        case types.CompletionItemKind.Unit: return 'unit';\n        case types.CompletionItemKind.Value: return 'value';\n        case types.CompletionItemKind.Constant: return 'constant';\n        case types.CompletionItemKind.Enum: return 'enum';\n        case types.CompletionItemKind.EnumMember: return 'enum-member';\n        case types.CompletionItemKind.Keyword: return 'keyword';\n        case types.CompletionItemKind.Snippet: return 'snippet';\n        case types.CompletionItemKind.Text: return 'text';\n        case types.CompletionItemKind.Color: return 'color';\n        case types.CompletionItemKind.File: return 'file';\n        case types.CompletionItemKind.Reference: return 'reference';\n        case types.CompletionItemKind.Folder: return 'folder';\n        case types.CompletionItemKind.Event: return 'event';\n        case types.CompletionItemKind.Operator: return 'operator';\n        case types.CompletionItemKind.TypeParameter: return 'type-parameter';\n    }\n    return 'property';\n}\n\nexport function toCompletionItemKind(type?: CompletionType): types.CompletionItemKind {\n    if (type) {\n        switch (type) {\n            case 'method': return types.CompletionItemKind.Method;\n            case 'function': return types.CompletionItemKind.Function;\n            case 'constructor': return types.CompletionItemKind.Constructor;\n            case 'field': return types.CompletionItemKind.Field;\n            case 'variable': return types.CompletionItemKind.Variable;\n            case 'class': return types.CompletionItemKind.Class;\n            case 'interface': return types.CompletionItemKind.Interface;\n            case 'struct': return types.CompletionItemKind.Struct;\n            case 'module': return types.CompletionItemKind.Module;\n            case 'property': return types.CompletionItemKind.Property;\n            case 'unit': return types.CompletionItemKind.Unit;\n            case 'value': return types.CompletionItemKind.Value;\n            case 'constant': return types.CompletionItemKind.Constant;\n            case 'enum': return types.CompletionItemKind.Enum;\n            case 'enum-member': return types.CompletionItemKind.EnumMember;\n            case 'keyword': return types.CompletionItemKind.Keyword;\n            case 'snippet': return types.CompletionItemKind.Snippet;\n            case 'text': return types.CompletionItemKind.Text;\n            case 'color': return types.CompletionItemKind.Color;\n            case 'file': return types.CompletionItemKind.File;\n            case 'reference': return types.CompletionItemKind.Reference;\n            case 'folder': return types.CompletionItemKind.Folder;\n            case 'event': return types.CompletionItemKind.Event;\n            case 'operator': return types.CompletionItemKind.Operator;\n            case 'type-parameter': return types.CompletionItemKind.TypeParameter;\n        }\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): SingleEditOperation {\n    return <SingleEditOperation>{\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nexport function fromLanguageSelector(selector: theia.DocumentSelector): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (Array.isArray(selector)) {\n        return <LanguageSelector>selector.map(fromLanguageSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return <LanguageFilter>{\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        };\n    }\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nfunction convertCode(code: string | number | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    } else {\n        return code;\n    }\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri,\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary: markerTags.push(types.MarkerTag.Unnecessary);\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): Hover {\n    return <Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromLocation(location: theia.Location): Location {\n    return <Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): DefinitionLink {\n    return <DefinitionLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        origin: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        selectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport function fromDocumentLink(definitionLink: theia.DocumentLink): DocumentLink {\n    return <DocumentLink>{\n        range: fromRange(definitionLink.range),\n        url: definitionLink.target && definitionLink.target.toString()\n    };\n}\n\nexport function toInternalCommand(command: theia.Command): Command {\n    return {\n        id: command.id,\n        title: command.label || '',\n        tooltip: command.tooltip,\n        arguments: command.arguments\n    };\n}\n\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        const [uri, uriOrEdits] = entry;\n        if (Array.isArray(uriOrEdits)) {\n            // text edits\n            const doc = documents ? documents.getDocument(uri.toString()) : undefined;\n            result.edits.push(<ResourceTextEditDto>{ resource: uri, modelVersionId: doc && doc.version, edits: uriOrEdits.map(fromTextEdit) });\n        } else {\n            // resource edits\n            result.edits.push(<ResourceFileEditDto>{ oldUri: uri, newUri: uriOrEdits, options: entry[2] });\n        }\n    }\n    return result;\n}\n"],"sourceRoot":""}